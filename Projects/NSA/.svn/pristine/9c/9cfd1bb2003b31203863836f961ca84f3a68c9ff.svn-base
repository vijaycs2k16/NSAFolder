!function(){var e=function(){var e={jY:"G9AD",_:{},status:"unloaded",basePath:function(){var e=window.CKFINDER_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(i){e=i[1];break}}return-1==e.indexOf("://")&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e),e}(),getUrl:function(e){return-1==e.indexOf("://")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.jY&&"/"!=e.charAt(e.length-1)&&(e+=(e.indexOf("?")>=0?"&":"?")+"t="+this.jY),e}},t=window.CKFINDER_GETURL;if(t){var n=e.getUrl;e.getUrl=function(i){return t.call(e,i)||n.call(e,i)}}return e}();function t(t){return e.instances[t]}var n,i,o,a,r,l,s={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};function d(t){var n=this;n.id=t.name;var i=t.element.getDocument().getWindow().$,o=e.oC.getWindow().$;n.inPopup=!(!i||!i.opener),n.inIframe=!n.inPopup&&i!=o.top&&"iframe"==i.frameElement.nodeName.toLowerCase(),n.inFrame=!n.inPopup&&i!=o.top&&"frame"==i.frameElement.nodeName.toLowerCase(),n.inUrlPopup=!(!n.inPopup||!o.opener)}if(e.jd=function(){var e=this,t={};for(var n in e)e.hasOwnProperty(n)&&("function"==typeof e[n]&&!s[n]||void 0===e[n]||(t[n]=e[n]));return e.callback&&(t.callback=e.callback),t},e.lj=function(e){var t,n=this,i="";return(e=e||n.basePath)&&0!==e.length||(e=CKFinder.DEFAULT_basePath),"/"!=e.substr(e.length-1,1)&&(e+="/"),e+="ckfinder.html",n.hh&&("function"==typeof(t=n.hh)&&(t=t.toString().match(/function ([^(]+)/)[1]),i+="?action=js&amp;func="+t),n.jx&&(i+=i?"&amp;":"?",i+="data="+encodeURIComponent(n.jx)),n.disableThumbnailSelection?(i+=i?"&amp;":"?",i+="dts=1"):(n.lH||n.hh)&&("function"==typeof(t=n.lH||n.hh)&&(t=t.toString().match(/function ([^(]+)/)[1]),i+=i?"&amp;":"?",i+="thumbFunc="+t,n.nm?i+="&amp;tdata="+encodeURIComponent(n.nm):!n.lH&&n.jx&&(i+="&amp;tdata="+encodeURIComponent(n.jx))),n.startupPath&&(i+=i?"&amp;":"?",i+="start="+encodeURIComponent(n.startupPath+(n.startupFolderExpanded?":1":":0"))),void 0===n.rememberLastFolder||n.rememberLastFolder||(i+=i?"&amp;":"?",i+="rlf=0"),n.id&&(i+=i?"&amp;":"?",i+="id="+encodeURIComponent(n.id)),n.skin&&(i+=i?"&amp;":"?",i+="skin="+encodeURIComponent(n.skin)),e+i},d.prototype={_:{},addFileContextMenuOption:function(n,i,o){var a=t(this.id),r="FileContextMenu_"+n.command;a.bD(r,{exec:function(e){var t=e.ld["filesview.filesview"].tools.dH();i(e.cg,t)}}),n.command=r,n.group||(n.group="file1"),a.gp(r,n),a.ld["filesview.filesview"].on("beforeContextMenu",function(t){if(o){var n=o(this.tools.dH());n&&(t.data.bj[r]=-1==n?e.aY:e.aS)}else t.data.bj[r]=e.aS})},disableFileContextMenuOption:function(e,n){var i=t(this.id),o=n?"FileContextMenu_"+e:e,a=function(e){delete e.data.bj[o]};return i.ld["filesview.filesview"].on("beforeContextMenu",a),function(){i.ld["filesview.filesview"].removeListener("beforeContextMenu",a)}},addFolderContextMenuOption:function(n,i,o){var a=t(this.id),r="FolderContextMenu_"+n.command;a.bD(r,{exec:function(e){i(e.cg,e.aV)}}),n.command=r,n.group||(n.group="folder1"),a.gp(r,n),a.ld["foldertree.foldertree"].on("beforeContextMenu",function(t){if(o){var n=o(this.app.aV);n&&(t.data.bj[r]=-1==n?e.aY:e.aS)}else t.data.bj[r]=e.aS})},disableFolderContextMenuOption:function(e,n){var i=t(this.id),o=n?"FolderContextMenu_"+e:e,a=function(e){delete e.data.bj[o]};return i.ld["foldertree.foldertree"].on("beforeContextMenu",a),function(){i.ld["foldertree.foldertree"].removeListener("beforeContextMenu",a)}},addFolderDropMenuOption:function(n,i,o){var a=t(this.id),r="FolderDropMenu_"+n.command;a.bD(r,{exec:function(e){i(e.cg,e.cK.oa())}}),n.command=r;var l=new e.iD(a,r,n);a.ld["foldertree.foldertree"].on("beforeDropMenu",function(e){o&&!o.call(a.cg,e.data.folder)||(e.data.iG[r]=l)})},disableFolderDropMenuOption:function(e,n){var i=t(this.id),o=n?"FolderDropMenu_"+e:e,a=function(e){delete e.data.iG[o]};return i.ld["foldertree.foldertree"].on("beforeDropMenu",a),function(){i.ld["foldertree.foldertree"].removeListener("beforeDropMenu",a)}},getSelectedFile:function(){return t(this.id).ld["filesview.filesview"].tools.dH()},getSelectedFiles:function(){return t(this.id).ld["filesview.filesview"].tools.oO(!0)},getSelectedFolder:function(){return t(this.id).aV},filterFiles:function(e){t(this.id).ld["filesview.filesview"].oW("requestRenderFiles",{lookup:e})},setUiColor:function(e){return t(this.id).setUiColor(e)},destroy:function(e){t(this.id).destroy(),e&&e()},openDialog:function(n,i){var o=this,a=new e.dom.document(window.document).getHead();t(o.id).document.getWindow();return(o.inFrame||o.inPopup||o.inIframe)&&(e.document=t(o.id).document),t(o.id).openDialog(n,i,a)},openMsgDialog:function(e,n){t(this.id).msgDialog(e,n)},openConfirmDialog:function(e,n,i){t(this.id).fe(e,n,i)},openInputDialog:function(e,n,i,o){t(this.id).hs(e,n,i,o)},openSkippedFilesDialog:function(e,n,i,o){t(this.id).skippedFilesDialog(e,n,i,o)},addTool:function(e){return t(this.id).plugins.tools.addTool(e)},addToolPanel:function(e){return t(this.id).plugins.tools.addToolPanel(e)},removeTool:function(e){t(this.id).plugins.tools.removeTool(e)},showTool:function(e){t(this.id).plugins.tools.showTool(e)},hideTool:function(e){t(this.id).plugins.tools.hideTool(e)},getResourceType:function(e){return t(this.id).getResourceType(e)},log:function(t){e.log.apply(e.log,arguments)},getLog:function(){return e.mZ()},emptyBasket:function(){t(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(n,i,o,a){var r=t(this.id);if(a||(a=10),!(a>=(r.dC||20)))return r.dC=a,r.ld["formpanel.formpanel"].on("beforeUploadFileForm",function(t){if(2==t.data.step&&!(a>r.dC)){t.cancel(!0);var l=this.data();t.data.folder;try{"upload"==l.dc?this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(e.aS)}):(this.data().dc&&this.oW("requestUnloadForm"),o||this.eh.removeClass("show_border"),this.oW("requestLoadForm",{html:n,command:"upload"}),i&&i())}catch(n){throw this.oW("failedUploadFileForm",t.data),this.oW("afterUploadFileForm",t.data),e.ba(n)}}}),{hide:function(){r.oW("requestUnloadForm",function(){r.cS("upload").bR(e.aS)})}}},resizeFormPanel:function(e){var n=t(this.id);if(void 0===e)n.document.getById("panel_view").setStyle("height",""),n.document.getById("panel_widget").setStyle("height","");else{var i=Math.min(e,Math.max(90,n.document.getById("main_container").$.offsetHeight-300));n.document.getById("panel_view").setStyle("height",i+"px"),n.document.getById("panel_widget").setStyle("height",i-3+"px")}n.layout.ea(!0)},refreshOpenedFolder:function(){var e=t(this.id),n=e.ld["filesview.filesview"].tools.currentFolder();e.oW("requestSelectFolder",{folder:n})},selectFile:function(e){var n=t(this.id);console.log("id",n),n.oW("requestSelectFile",{file:e,scrollTo:1})},closePopup:function(){this.inPopup&&t(this.id).element.getDocument().getWindow().$.close()},openFolder:function(e,n){var i=t(this.id);n=n.replace(/\/$/,""),e=e.toLowerCase();for(var o=0;o<i.folders.length;o++){var a=i.folders[o];if(a.getPath().replace(/\/$/,"")==n&&e==a.type.toLowerCase())return i.oW("requestSelectFolder",{folder:a}),void i.oW("requestShowFolderFiles",{folder:a})}},setUiColor:function(e){t(this.id).setUiColor(e)},execCommand:function(e){t(this.id).execCommand(e)}},function(){function t(e){for(var t=1;CKFinder._.instanceConfig[t];)t++;return CKFinder._.instanceConfig[t]=e,t}window.CKFinder=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&("function"==typeof e[n]&&"callback"!=n||(this[n]=e[n]));this.callback=t},CKFinder.prototype={create:function(t){var n="ckf"+Math.random().toString().substr(2,9);document.write('<span id="'+n+'"></span>'),t=e.tools.extend(e.jd.call(this),t,!0);var i=e.replace(n,t,CKFinder);return this.api=i.cg,i.cg},appendTo:function(t,n){n=e.tools.extend(e.jd.call(this),n,!0);var i=e.appendTo(t,n,CKFinder);return this.api=i.cg,i.cg},replace:function(t,n){n=e.tools.extend(e.jd.call(this),n,!0);var i=e.replace(t,n,CKFinder);return this.api=i.cg,i.cg},popup:function(t,n){var i;null!==t&&"object"==typeof t&&(i=t,t=parseInt(i.width,10),n=parseInt(i.height,10)),t=t||"80%",n=n||"70%","string"==typeof t&&t.length>1&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&n.length>1&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),t<200&&(t=200),n<200&&(n=200);var o=parseInt((window.screen.height-n)/2,10),a=parseInt((window.screen.width-t)/2,10),r=(i&&i.popupFeatures?i.popupFeatures:CKFinder.config.popupFeatures)+",width="+t+",height="+n+",top="+o+",left="+a,l=e.env.webkit?"about:blank":"",s=window.open(l,"CKFinderpopup",r,!0);if(!s)return!1;this.width=this.height="100%";var d='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>'+(i&&i.popupTitle?i.popupTitle:CKFinder.config.popupTitle)+'</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>',c=this;function u(){var i=new e.dom.document(s.document);i.$.open(),e.env.isCustomDomain()&&(i.$.domain=window.document.domain),i.$.write(d),i.$.close();try{return-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(a,o),s.resizeTo(t,n)),s.focus(),c.appendTo(i.bH())}catch(e){return c.appendTo(i.bH())}return!1}return CKFinder.env.safari?(setTimeout(u,0),null):u()}},CKFinder._={},CKFinder._.instanceConfig=[],CKFinder.lang={},CKFinder.version="2.6.2",CKFinder.revision="UNKNOWN",CKFinder.addPlugin=function(t,n,i){var o={bM:i||[]};"function"==typeof n&&(n={appReady:n});for(var a in n)n.hasOwnProperty(a)&&"connectorInitialized"!=a&&"uiReady"!=a&&(o[a]=n[a]);o.bz=function(t){if(t.config.readOnly&&!1===o.readOnly)return null;n.connectorInitialized&&t.on("connectorInitialized",function(e){var i=n.connectorInitialized;i&&i.call(i,t.cg,e.data.xml)},null,null,1e3),n.connectorResponse&&t.on("connectorResponse",function(e){var i=n.connectorResponse;i&&i.call(i,t.cg,e.data.xml)}),n.galleryCallback&&t.on("launchGallery",function(e){var i=n.galleryCallback;i&&(e.data.bx=i.call(i,t.cg,e.data.selected,e.data.files))}),n.uiReady&&t.on("uiReady",function(){var e=n.uiReady;e.call(e,t.cg)},null,null,1e3),n.appReady&&t.on("appReady",function(){var e=n.appReady;e.call(e,t.cg)},null,null,1e3),function(t,n){if(t.toolbarButtons)for(var i=0;i<t.toolbarButtons.length;i++){var o=t.toolbarButtons[i];if(!n.bY._.items[o[0]]){var a=e.tools.deepCopy(o[1]),r=a.command;if(!a.command){var l=o[1].onClick;r="ToolbarButton_"+o[0],n.bD(r,{exec:function(e){l(e.cg)}}),a.command=r}var s=e.tools.capitalize(t.name);"function"==typeof a.label?a.label=a.label.call(t,n.cg):n.lang[t.name]&&n.lang[t.name][a.label]?a.label=n.lang[t.name][a.label]:n.lang[s]&&n.lang[s][a.label]?a.label=n.lang[s][a.label]:n.lang[a.label]&&(a.label=n.lang[a.label]),n.bY.add(o[0],CKFinder._.UI_BUTTON,a)}}}(o,t)},e.plugins.add(t,o)},CKFinder.getPluginPath=function(t){return e.plugins.getPath(t)},CKFinder.addExternalPlugin=function(t,n,i){e.plugins.tR(t,n,i)},CKFinder.setPluginLang=function(t,n,i){e.plugins.rX(t,n,i)},CKFinder.dialog={add:function(t,n){"function"==typeof n&&(n=e.tools.override(n,function(e){return function(t){return e(t.cg)}})),e.dialog.add(t,n)}},CKFinder.tools={},CKFinder.env={},CKFinder.dom={},CKFinder.create=function(e,t,n,i,o){var a;if(null!==e&&"object"==typeof e){a=new CKFinder;for(var r in e)a[r]=e[r]}else(a=new CKFinder).basePath=e,t&&(a.width=t),n&&(a.height=t),i&&(a.selectActionFunction=i),o&&(a.callback=o);return a.create()},CKFinder.popup=function(e,t,n,i,o){var a,r,l;if(null!==e&&"object"==typeof e){a=new CKFinder;for(var s in e)a[s]=e[s];r=e.popupTitle,l=e.popupFeatures,t||(t=e.width),n||(n=e.height)}else(a=new CKFinder).basePath=e,i&&(a.selectActionFunction=i),o&&(a.callback=o);return a.popup({width:t,height:n,popupTitle:r,popupFeatures:l})},CKFinder.setupFCKeditor=function(n,i,o,a){var r,l;if(null!==i&&"object"==typeof i){l=t(i),r=new CKFinder;for(var s in i)if(r[s]=i[s],"width"==s){var d=r[s]||800;"string"==typeof d&&d.length>1&&"%"==d.substr(d.length-1,1)&&(d=parseInt(window.screen.width*parseInt(d,10)/100,10)),n.Config.LinkBrowserWindowWidth=d,n.Config.ImageBrowserWindowWidth=d,n.Config.FlashBrowserWindowWidth=d}else if("height"==s){var c=r[s]||600;"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),n.Config.LinkBrowserWindowHeight=c,n.Config.ImageBrowserWindowHeight=c,n.Config.FlashBrowserWindowHeight=c}}else(r=new CKFinder).basePath=i;var u=r.basePath;"/"!=u.substr(0,1)&&-1==u.indexOf("://")&&(u=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+u);var f=-1!==(u=e.lj.call(r,u)).indexOf("?")?"&":"?";l&&(u+=f+"configId="+l,f="&"),n.Config.LinkBrowserURL=u,n.Config.ImageBrowserURL=u+f+"type="+(o||"Images"),n.Config.FlashBrowserURL=u+f+"type="+(a||"Flash");u.substring(0,1+u.lastIndexOf("/"));n.Config.LinkUploadURL="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",n.Config.ImageUploadURL="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(o||"Images"),n.Config.FlashUploadURL="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(a||"Flash")},CKFinder.setupCKEditor=function(n,i,o,a){if(null!==n){var r,l;if(null!==i&&"object"==typeof i){l=t(i),r=new CKFinder;for(var s in i)if(r[s]=i[s],"width"==s){var d=r[s]||800;"string"==typeof d&&d.length>1&&"%"==d.substr(d.length-1,1)&&(d=parseInt(window.screen.width*parseInt(d,10)/100,10)),n.config.filebrowserWindowWidth=d}else if("height"==s){var c=r[s]||600;"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),n.config.filebrowserWindowHeight=c}}else(r=new CKFinder).basePath=i;var u=r.basePath;"/"!=u.substr(0,1)&&-1==u.indexOf("://")&&(u=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+u);var f=-1!==(u=e.lj.call(r,u)).indexOf("?")?"&":"?";l&&(u+=f+"configId="+l,f="&"),n.config.filebrowserBrowseUrl=u,n.config.filebrowserImageBrowseUrl=u+f+"type="+(o||"Images"),n.config.filebrowserFlashBrowseUrl=u+f+"type="+(a||"Flash");u.substring(0,1+u.lastIndexOf("/"));n.config.filebrowserUploadUrl="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",n.config.filebrowserImageUploadUrl="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(o||"Images"),n.config.filebrowserFlashUploadUrl="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(a||"Flash")}else{for(var p in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[p],i,o,a);CKEDITOR.on("instanceCreated",function(e){CKFinder.setupCKEditor(e.editor,i,o,a)})}}}(),e.event||(e.event=function(){},e.event.du=function(t,n){var i=e.event.prototype;for(var o in i)void 0==t[o]&&(t[o]=i[o])},e.event.prototype=(r=function(e){var t=e.kk&&e.kk()||e._||(e._={});return t.cC||(t.cC={})},(l=function(e){this.name=e,this.dF=[]}).prototype={mi:function(e){for(var t=0,n=this.dF;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{on:function(e,t,n,i,o){var a=r(this),s=a[e]||(a[e]=new l(e));if(s.mi(t)<0){var d=s.dF;n||(n=this),isNaN(o)&&(o=10);var c=this,u=function(o,a,r,l){var s={name:e,jN:this,application:o,data:a,jO:i,stop:r,cancel:l,removeListener:function(){c.removeListener(e,t)}};return t.call(n,s),s.data};u.fn=t,u.nT=o;for(var f=d.length-1;f>=0;f--)if(d[f].nT<=o)return void d.splice(f+1,0,u);d.unshift(u)}},oW:(n=!1,i=function(){n=!0},o=!1,a=function(e){o=!e||2},function(t,l,s,d){"function"==typeof l?(d=l,l=null):"function"==typeof s&&(d=s,s=null),"mousemove"!=t&&e.log("[EVENT] "+t,l,d);var c=r(this)[t],u=n,f=o;if(n=o=!1,c){var p=c.dF;if(p.length){p=p.slice(0);for(var h=0;h<p.length;h++){var m=p[h].call(this,s,l,i,a);if(void 0!==m&&(l=m),n||o&&2!=o)break}}}var g=o||void 0!==l&&(l&&void 0!==l.result?l.result:l);return"function"==typeof d&&2!=o&&(g=d.call(this,o,l)||g),n=u,o=f,g}),cr:function(e,t,n){var i=this.oW(e,t,n);return delete r(this)[e],i},removeListener:function(e,t){var n=r(this)[e];if(n){var i=n.mi(t);i>=0&&n.dF.splice(i,1)}},mF:function(){for(var e=r(this),t=0;t<e.length;t++)e[t].dF=[]},rC:function(e){var t=r(this)[e];return t&&t.dF.length>0}})),e.application||(e.kZ=0,e.fc=1,e.qE=2,e.application=function(t,n,i,o){this._={instanceConfig:t,element:n},this.ff=i||e.kZ,e.event.call(this),this.iI(o)},e.application.replace=function(t,n,i){var o=t;if("object"!=typeof o){if(!(o=document.getElementById(t)))for(var a=0,r=document.getElementsByName(t);(o=r[a++])&&"textarea"!=o.tagName.toLowerCase(););if(!o)throw'[CKFINDER.application.replace] The element with id or name "'+t+'" was not found.'}return new e.application(n,o,e.fc,i)},e.application.appendTo=function(t,n,i){if("object"!=typeof t&&!(t=document.getElementById(t)))throw'[CKFINDER.application.appendTo] The element with id "'+t+'" was not found.';return new e.application(n,t,e.qE,i)},e.application.prototype={iI:function(){(e.application.eb||(e.application.eb=[])).push(this)},oW:function(t,n,i){return e.event.prototype.oW.call(this,t,n,this,i)},cr:function(t,n,i){return e.event.prototype.cr.call(this,t,n,this,i)}},e.event.du(e.application.prototype,!0)),!e.env){var c=/rv:([\d\.]+)/,u=/trident\/([\d]+)/;e.env=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!1,iemodern:!1,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.opera,n.chrome=!1,n.safari=!1,n.webkit&&(e.indexOf(" chrome/")>-1?n.chrome=!0:n.safari=!0);var i=0;if(n.ie&&(i=parseFloat(e.match(/msie (\d+)/)[1]),n.ie8=!!document.documentMode,n.ie8Compat=8==document.documentMode,n.ie7Compat=7==i&&!document.documentMode||7==document.documentMode,n.ie6Compat=i<7||n.quirks),n.gecko){var o=e.match(c);o&&(i=1e4*(o=o[1].split("."))[0]+100*(o[1]||0)+ +(o[2]||0)),u.test(e)?(n.gecko=!1,n.iemodern=!0):n.isMobile=e.indexOf("fennec")>-1}return n.opera&&(i=parseFloat(t.version()),n.isMobile=e.indexOf("opera mobi")>-1),n.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1]),n.isMobile=e.indexOf("mobile")>-1),n.version=i,n.isCompatible=n.ie&&i>=6||n.iemodern&&i>=11||n.gecko&&i>=10801||n.opera&&i>=9.5||n.air&&i>=1||n.webkit&&i>=522||!1,n.cssClass="browser_"+(n.ie?"ie":n.iemodern?"iemodern":n.gecko?"gecko":n.opera?"opera":n.air?"air":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" browser_quirks"),n.ie&&(n.cssClass+=" browser_ie"+(n.version<7?"6":n.version>=8?"8":"7"),n.quirks&&(n.cssClass+=" browser_iequirks"),n.ie7Compat&&(n.cssClass+=" browser_ie7Compat")),n.gecko&&i<10900&&(n.cssClass+=" browser_gecko18"),n}(),CKFinder.env=e.env}var f=e.env,p=f.ie;"unloaded"==e.status&&function(){e.event.du(e),e.dO=function(){if("basic_ready"==e.status){delete e.dO;var t=document.createElement("script");t.type="text/javascript",t.src=e.basePath+"ckfinder.js",document.getElementsByTagName("head")[0].appendChild(t)}else e.dO.qr=!0},e.mS=0,e.uQ="ckfinder",e.uM=!0;var t,n=function(t,n,i,o){if(f.isCompatible){e.dO&&e.dO();var a=i(t,n,o);return e.add(a),a}return null};e.replace=function(t,i,o){return n(t,i,e.application.replace,o)},e.appendTo=function(t,i,o){return n(t,i,e.application.appendTo,o)},e.add=function(e){(this._.io||(this._.io=[])).push(e)},e.uL=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,i=e[t];i.name;if(i.name||i.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^| )"+arguments[0]+"(?:$| )").test(i.className))continue}else if("function"==typeof arguments[0]&&(n={},!1===arguments[0](i,n)))continue;this.replace(i,n)}}},t=function(){var t=e.dO,n=e.mS;e.status="basic_ready",t&&t.qr?t():n&&setTimeout(function(){e.dO&&e.dO()},1e3*n)},window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t),e.status="basic_loaded"}(),e.dom={},CKFinder.dom=e.dom;var h,m,g,v,b,y,w,_,F,k,C,x,E=e.dom;e.ajax=(h=function(e){return 4==e.readyState&&(e.status>=200&&e.status<300||304==e.status||0===e.status||1223==e.status)},m=function(e){return h(e)?e.responseText:null},g=function(t){if(h(t)){var n=t.responseXML,i=new e.xml(n&&n.firstChild&&n.documentElement&&"parsererror"!=n.documentElement.nodeName?n:t.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,""));if(i&&i.mq&&i.mq.documentElement&&"parsererror"!=i.mq.documentElement.nodeName&&"html"!=i.mq.documentElement.nodeName&&"br"!=i.mq.documentElement.nodeName)return i}var o=e.nG||e.jt,a=t.responseText,r=o.lang.ErrorMsg[a?"XmlError":"XmlEmpty"]+"<br>";return i&&i.mq&&(i.mq.parseError&&i.mq.parseError.reason?r+=i.mq.parseError.reason:i.mq.documentElement&&"parsererror"==i.mq.documentElement.nodeName&&(r+=i.mq.documentElement.textContent)),a?((/text\/plain/.test(t.getResponseHeader("Content-Type"))||/<Connector\s*/.test(a))&&(a='<div style="width:600px; overflow:scroll"><font>'+(a=(a=e.tools.htmlEncode(a)).replace(/\n/g,"<br>"))+"</font></div>"),o.msgDialog(o.lang.SysErrorDlgTitle,r+"<br>"+o.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+a))):o.msgDialog(o.lang.SysErrorDlgTitle,r),{}},v=function(t,n,i,o){var a=!!n;e.log("[AJAX] "+(o?"POST":"GET")+" "+t);var r=function(){if(!p||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null}();return r?(o?r.open("POST",t,a):r.open("GET",t,a),a&&(r.onreadystatechange=function(){4==r.readyState&&(n(i(r)),r=null)}),o?(r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),r.send(o)):r.send(null),a?"":i(r)):null},{load:function(e,t,n){return v(e,t,m,n)},loadXml:function(e,t,n){return v(e,t,g,n)}}),CKFinder.ajax=e.ajax,x=[],e.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=this.clone(e[n]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date)return e;t=new e.constructor;for(var i in e){var o=e[i];t[i]=this.clone(o)}return t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},extend:function(e){var t,n,i=arguments.length;"boolean"==typeof(t=arguments[i-1])?i--:"boolean"==typeof(t=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var o=1;o<i;o++){var a=arguments[o];for(var r in a)!0!==t&&void 0!=e[r]||(!n||r in n)&&(e[r]=a[r])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},isArray:function(e){return!!e&&e instanceof Array},cssStyleToDomStyle:(k=document.createElement("div").style,C=void 0!==k.cssFloat?"cssFloat":void 0!==k.styleFloat?"styleFloat":"float",function(e){return"float"==e?C:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}),htmlEncode:function(e){var t=function(e){var t=new E.element("span");return t.setText(e),t.getHtml()},n="<br>"==t("\n").toLowerCase()?function(e){return t(e).replace(/<br>/gi,"\n")}:t,i=">"==t(">")?function(e){return n(e).replace(/>/g,"&gt;")}:n,o="&nbsp; "==t("  ")?function(e){return i(e).replace(/&nbsp;/g," ")}:i;return this.htmlEncode=o,this.htmlEncode(e)},escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},getNextNumber:(F=0,function(){return++F}),getRandomString:function(e){var t="abcdefghijklmnopqrstuvwxyz0123456789",n=[],i="";if(window.crypto&&window.crypto.getRandomValues)n=new Uint8Array(e),window.crypto.getRandomValues(n);else for(var o=0;o<e;o++)n.push(Math.floor(256*Math.random()));for(var a=0;a<n.length;a++){var r=t.charAt(n[a]%t.length);i+=Math.random()>.5?r.toUpperCase():r}return i},override:function(e,t){return t(e)},setTimeout:function(e,t,n,i,o){return o||(o=window),n||(n=o),o.setTimeout(function(){i?e.apply(n,[].concat(i)):e.apply(n)},t||0)},trim:(_=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,function(e){return e?e.replace(_,""):null}),ltrim:(w=/^[ \t\n\r]+/g,function(e){return e?e.replace(w,""):null}),rtrim:(y=/[ \t\n\r]+$/g,function(e){return e?e.replace(y,""):null}),indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(t){var n=t.$,i=t.base,o=t.vd||t._,a=t.ej,r=t.statics;if(o){var l=n;n=function(){var t=this._||(this._={});for(var n in o){var i=o[n];t[n]="function"==typeof i?e.tools.bind(i,this):i}l.apply(this,arguments)}}return i&&(n.prototype=this.prototypedCopy(i.prototype),n.prototype.constructor=n,n.prototype.base=function(){this.base=i.prototype.base,i.apply(this,arguments),this.base=arguments.callee}),a&&this.extend(n.prototype,a,!0),r&&this.extend(n,r,!0),n},addFunction:function(e,t){return x.push(function(){e.apply(t||this,arguments)})-1},removeFunction:function(e){x[e]=null},callFunction:function(e){return x[e].apply(window,Array.prototype.slice.call(arguments,1))},cssLength:(b=/^\d+(?:\.\d+)?$/,function(e){return e+(b.test(e)?"px":"")}),repeat:function(e,t){return new Array(t+1).join(e)},deepCopy:function(t){var n={};if("object"==typeof t){void 0!==t.length&&(n=[]);for(var i in t)null===t[i]?n[i]=null:"object"==typeof t[i]?n[i]=e.tools.deepCopy(t[i]):n[i]=t[i]}return n},getUrlParam:function(e,t){var n=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i"),i=(t||window).location.search.match(n);return i&&i.length>1?i[1]:null},htmlEncode:function(e){return e?e=(e=(e=(e="string"!=typeof e?e.toString():e).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"):""},setCookie:function(e,t,n){document.cookie=e+"="+t+(n?"":"; expires=Sat, 2 Jan 2038 01:00:00 UTC; path=/")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^|\\s|;)"+e+"=([^;]*)"));return t&&t.length>0?t[2]:""},mH:function(e){p?(e.$.onfocusin=function(){e.addClass("focus_inside")},e.$.onfocusout=function(){e.removeClass("focus_inside")}):(e.$.addEventListener("focus",function(){e.addClass("focus_inside")},!0),e.$.addEventListener("blur",function(){e.removeClass("focus_inside")},!0))},formatSize:function(e,t,n){return 0==e?"0":e<1?t.Kb.replace("%1",1):e<1024?(n||(e=e.toFixed(2)),t.Kb.replace("%1",e)):e<1048576?t.Mb.replace("%1",(e/1024).toFixed(2)):t.Gb.replace("%1",(e/1048576).toFixed(2))},formatSpeed:function(e,t){return t.SizePerSecond.replace("%1",this.formatSize(e,t))}},CKFinder._.callFunction=e.tools.callFunction,CKFinder.tools=e.tools;var S,N,D=e.tools;E.event=function(e){this.$=e},E.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var t=this,n=t.oV();return(t.$.ctrlKey||t.$.metaKey)&&(n+=e.bP),t.$.shiftKey&&(n+=e.dy),t.$.altKey&&(n+=e.eJ),n},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},bK:function(){var e=this.$.target||this.$.srcElement;return e?new E.bi(e):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}},e.bP=1e3,e.dy=2e3,e.eJ=4e3,E.dE=function(e){e&&(this.$=e)},E.dE.prototype={kk:function(){var e;return(e=this.dw("_"))||this.fL("_",e={}),e},on:function(t){var n,i,o=this,a=o.dw("_cke_nativeListeners");if(a||(a={},o.fL("_cke_nativeListeners",a)),!a[t]){var r=a[t]=(n=o,i=t,function(t){void 0!==e&&n.oW(i,new E.event(t))});o.$.addEventListener?o.$.addEventListener(t,r,!!e.event.jP):o.$.attachEvent&&o.$.attachEvent("on"+t,r)}return e.event.prototype.on.apply(o,arguments)},removeListener:function(t){var n=this;if(e.event.prototype.removeListener.apply(n,arguments),!n.rC(t)){var i=n.dw("_cke_nativeListeners"),o=i&&i[t];o&&(n.$.removeEventListener?n.$.removeEventListener(t,o,!1):n.$.detachEvent&&n.$.detachEvent("on"+t,o),delete i[t])}}},S=E.dE.prototype,N={},S.equals=function(e){return e&&e.$===this.$},S.fL=function(e,t){var n=this.iY();return(N[n]||(N[n]={}))[e]=t,this},S.dw=function(e){var t=this.$._ckf_expando,n=t&&N[t];return n&&n[e]},S.jF=function(e){var t=this.$._ckf_expando,n=t&&N[t],i=n&&n[e];return void 0!==i&&delete n[e],i||null},S.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=D.getNextNumber())},e.event.du(S),E.window=function(e){E.dE.call(this,e)},E.window.prototype=new E.dE,D.extend(E.window.prototype,{focus:function(){f.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},eR:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},hV:function(){var e=this.$;if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}}}),E.document=function(e){E.dE.call(this,e)};var T=E.document;T.prototype=new E.dE,D.extend(T.prototype,{appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new E.element("link",this);t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},createElement:function(e,t){var n=new E.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.gS&&n.setStyles(t.gS)),n},jT:function(e){return new E.text(e,this)},focus:function(){this.getWindow().focus()},getById:function(e){var t=this.$.getElementById(e);return t?new E.element(t):null},vu:function(e,t){for(var n=this.$.documentElement,i=0;n&&i<e.length;i++){var o=e[i];if(t)for(var a=-1,r=0;r<n.childNodes.length;r++){var l=n.childNodes[r];if((!0!==t||3!=l.nodeType||!l.previousSibling||3!=l.previousSibling.nodeType)&&++a==o){n=l;break}}else n=n.childNodes[o]}return n?new E.bi(n):null},eG:function(e,t){return!p&&t&&(e=t+":"+e),new E.iT(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=new E.element(e),(this.getHead=function(){return e})()},bH:function(){var e=new E.element(this.$.body);return(this.bH=function(){return e})()},gT:function(){var e=new E.element(this.$.documentElement);return(this.gT=function(){return e})()},getWindow:function(){var e=new E.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return e})()}}),E.bi=function(t){if(t){switch(t.nodeType){case e.cv:return new E.element(t);case e.fl:return new E.text(t)}E.dE.call(this,t)}return this},E.bi.prototype=new E.dE,e.cv=1,e.fl=3,e.va=8,e.om=11,e.oh=0,e.op=1,e.gW=2,e.gX=4,e.mo=8,e.lF=16,D.extend(E.bi.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(t,n){var i=this.$.cloneNode(t);if(!n){var o=function(t){if(t.nodeType==e.cv){t.removeAttribute("id",!1),t.removeAttribute("_ckf_expando",!1);for(var n=t.childNodes,i=0;i<n.length;i++)o(n[i])}};o(i)}return new E.bi(i)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},vP:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},lU:function(e){for(var t=[],n=this.getDocument().$.documentElement,i=this.$;i&&i!=n;){for(var o=i.parentNode,a=-1,r=0;r<o.childNodes.length;r++){var l=o.childNodes[r];if((!e||3!=l.nodeType||!l.previousSibling||3!=l.previousSibling.nodeType)&&(a++,l==i))break}t.unshift(a),i=i.parentNode}return t},getDocument:function(){var e=new T(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return e})()},vA:function(){for(var e=this.$,t=e.parentNode&&e.parentNode.firstChild,n=-1;t;){if(n++,t==e)return n;t=t.nextSibling}return-1},hL:function(t,n,i){if(i&&!i.call){var o=i;i=function(e){return!e.equals(o)}}var a,r=!t&&this.getFirst&&this.getFirst();if(!r){if(this.type==e.cv&&i&&!1===i(this,!0))return null;r=this.dG()}for(;!r&&(a=(a||this).getParent());){if(i&&!1===i(a,!0))return null;r=a.dG()}return r?i&&!1===i(r)?null:n&&n!=r.type?r.hL(!1,n,i):r:null},hZ:function(t,n,i){if(i&&!i.call){var o=i;i=function(e){return!e.equals(o)}}var a,r=!t&&this.dB&&this.dB();if(!r){if(this.type==e.cv&&i&&!1===i(this,!0))return null;r=this.cf()}for(;!r&&(a=(a||this).getParent());){if(i&&!1===i(a,!0))return null;r=a.cf()}return r?i&&!1===i(r)?null:n&&r.type!=n?r.hZ(!1,n,i):r:null},cf:function(e){var t,n=this.$;do{t=(n=n.previousSibling)&&new E.bi(n)}while(t&&e&&!e(t));return t},vs:function(){return this.cf(function(e){return 1==e.$.nodeType})},dG:function(e){var t,n=this.$;do{t=(n=n.nextSibling)&&new E.bi(n)}while(t&&e&&!e(t));return t},vk:function(){return this.dG(function(e){return 1==e.$.nodeType})},getParent:function(){var e=this.$.parentNode;return e&&1==e.nodeType?new E.bi(e):null},vn:function(e){var t=this,n=[];do{n[e?"push":"unshift"](t)}while(t=t.getParent());return n},vv:function(e){var t=this;if(e.equals(t))return t;if(e.contains&&e.contains(t))return e;var n=t.contains?t:t.getParent();do{if(n.contains(e))return n}while(n=n.getParent());return null},gz:function(t){var n=this.$,i=t.$;if(n.compareDocumentPosition)return n.compareDocumentPosition(i);if(n==i)return e.oh;if(this.type==e.cv&&t.type==e.cv){if(n.contains){if(n.contains(i))return e.lF+e.gX;if(i.contains(n))return e.mo+e.gW}if("sourceIndex"in n)return n.sourceIndex<0||i.sourceIndex<0?e.op:n.sourceIndex<i.sourceIndex?e.gX:e.gW}for(var o=this.lU(),a=t.lU(),r=Math.min(o.length,a.length),l=0;l<=r-1;l++)if(o[l]!=a[l]){if(l<r)return o[l]<a[l]?e.gX:e.gW;break}return o.length<a.length?e.lF+e.gX:e.mo+e.gW},vw:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return new E.bi(n);n=n.parentNode}return null},vX:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(var i;i=t.firstChild;)n.insertBefore(t.removeChild(i),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var t;this.getFirst&&(t=this.getFirst());){if(t.type==e.fl){var n=D.ltrim(t.getText()),i=t.hJ();if(!n){t.remove();continue}n.length<i&&(t.split(i-n.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var t,n=this;n.dB&&(t=n.dB());){if(t.type==e.fl){var i=D.rtrim(t.getText()),o=t.hJ();if(!i){t.remove();continue}i.length<o&&(t.split(i.length),n.$.lastChild.parentNode.removeChild(n.$.lastChild))}break}p||f.opera||(t=n.$.lastChild)&&1==t.type&&"br"==t.nodeName.toLowerCase()&&t.parentNode.removeChild(t)}}),E.iT=function(e){this.$=e},E.iT.prototype={count:function(){return this.$.length},getItem:function(e){var t=this.$[e];return t?new E.bi(t):null}},E.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),E.dE.call(this,e)};var R,$,W,L=E.element;L.eB=function(e){return e&&(e.$?e:new L(e))},L.prototype=new E.bi,L.kE=function(e,t){var n=new L("div",t);return n.setHtml(e),n.getFirst().remove()},L.rS=function(e,t,n,i){var o=t.dw("list_marker_id")||t.fL("list_marker_id",D.getNextNumber()).dw("list_marker_id"),a=t.dw("list_marker_names")||t.fL("list_marker_names",{}).dw("list_marker_names");return e[o]=t,a[n]=1,t.fL(n,i)},L.sM=function(e){for(var t in e)L.qZ(e,e[t],!0)},L.qZ=function(e,t,n){var i=t.dw("list_marker_names"),o=t.dw("list_marker_id");for(var a in i)t.jF(a);t.jF("list_marker_names"),n&&(t.jF("list_marker_id"),delete e[o])},D.extend(L.prototype,{type:e.cv,addClass:function(e){var t=this.$.className;t&&(new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","").test(t)||(t+=" "+e));this.$.className=t||e},removeClass:function(e){var t=this.getAttribute("class");if(t){var n=new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i");n.test(t)&&((t=t.replace(n,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class"))}},hasClass:function(e){return new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(t,n){var i=this;return"string"==typeof t&&(t=i.getDocument().createElement(t)),n?i.$.insertBefore(t.$,i.$.firstChild):i.$.appendChild(t.$),e.log("[DOM] DOM flush into "+i.getName()),t},appendHtml:function(e){if(this.$.childNodes.length){var t=new L("div",this.getDocument());t.setHtml(e),t.jg(this)}else this.setHtml(e)},appendText:function(e){void 0!=this.$.text?this.$.text+=e:this.append(new E.text(e))},pd:function(){for(var t=this.dB();t&&t.type==e.fl&&!D.rtrim(t.getText());)t=t.cf();t&&t.is&&t.is("br")||this.append(f.opera?this.getDocument().jT(""):this.getDocument().createElement("br"))},tV:function(e){var t=new E.mk(this.getDocument());t.setStartAfter(this),t.setEndAfter(e);var n=t.extractContents();t.insertNode(this.remove()),n.kA(this)},contains:p||f.webkit?function(t){var n=this.$;return t.type!=e.cv?n.contains(t.getParent().$):n!=t.$&&n.contains(t.$)}:function(e){return!!(16&this.$.compareDocumentPosition(e.$))},focus:function(){try{this.$.focus()}catch(e){}},getHtml:function(){return this.$.innerHTML},fH:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},setHtml:function(t){return e.log("[DOM] DOM flush into "+this.getName()),this.$.innerHTML=t},setText:function(t){return L.prototype.setText=void 0!=this.$.innerText?function(t){return e.log("[DOM] Text flush"),this.$.innerText=t}:function(t){return e.log("[DOM] Text flush"),this.$.textContent=t},this.setText(t)},getAttribute:(W=function(e){return this.$.getAttribute(e,2)},p&&(f.ie7Compat||f.ie6Compat)?function(e){var t=this;switch(e){case"class":e="className";break;case"tabindex":var n=W.call(t,e);return 0!==n&&0===t.$.tabIndex&&(n=null),n;case"checked":return t.$.checked;case"style":return t.$.style.cssText}return W.call(t,e)}:W),getChildren:function(){return new E.iT(this.$.childNodes)},getComputedStyle:p?function(e){return this.$.currentStyle[D.cssStyleToDomStyle(e)]}:function(e){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(e)},pf:function(){var t=e.ga[this.getName()];return this.pf=function(){return t},t},eG:T.prototype.eG,vp:p?function(){var t=this.$.tabIndex;return 0!==t||e.ga.ug[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)||(t=-1),t}:f.webkit?function(){var e=this.$.tabIndex;return void 0==e&&(e=parseInt(this.getAttribute("tabindex"),10),isNaN(e)&&(e=-1)),e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},vm:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(p&&!(document.documentMode>8)){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return(this.getName=function(){return e})()},getValue:function(){return this.$.value},getFirst:function(){var e=this.$.firstChild;return e?new E.bi(e):null},dB:function(e){var t=this.$.lastChild,n=t&&new E.bi(t);return n&&e&&!e(n)&&(n=n.cf(e)),n},rd:function(e){return this.$.style[D.cssStyleToDomStyle(e)]},is:function(){for(var e=this.getName(),t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},vL:function(){var t=this.getName(),n=!e.ga.uj[t]&&(e.ga[t]||e.ga.span);return n&&n["#"]},isIdentical:function(e){if(this.getName()!=e.getName())return!1;var t=this.$.attributes,n=e.$.attributes,i=t.length,o=n.length;if(!p&&i!=o)return!1;for(var a=0;a<i;a++){var r=t[a];if((!p||r.specified&&"_ckf_expando"!=r.nodeName)&&r.nodeValue!=e.getAttribute(r.nodeName))return!1}if(p)for(a=0;a<o;a++)if(r=n[a],(!p||r.specified&&"_ckf_expando"!=r.nodeName)&&r.nodeValue!=t.getAttribute(r.nodeName))return!1;return!0},isVisible:function(){return this.$.offsetWidth&&"hidden"!=this.$.style.visibility},hasAttributes:p&&(f.ie7Compat||f.ie6Compat)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_ckf_expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes;return e.length>1||1==e.length&&"_ckf_expando"!=e[0].nodeName},hasAttribute:function(e){var t=this.$.attributes.getNamedItem(e);return!(!t||!t.specified)},hide:function(){this.setStyle("display","none")},jg:function(e,t){var n,i=this.$;if(i!=(e=e.$))if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:($=function(e,t){return this.$.setAttribute(e,t),this},p&&(f.ie7Compat||f.ie6Compat)?function(e,t){var n=this;return"class"==e?n.$.className=t:"style"==e?n.$.style.cssText=t:"tabindex"==e?n.$.tabIndex=t:"checked"==e?n.$.checked=t:$.apply(n,arguments),n}:$),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:(R=function(e){this.$.removeAttribute(e)},p&&(f.ie7Compat||f.ie6Compat)?function(e){"class"==e?e="className":"tabindex"==e&&(e="tabIndex"),R.call(this,e)}:R),uW:function(e){for(var t=0;t<e.length;t++)this.removeAttribute(e[t])},removeStyle:function(e){var t=this;t.$.style.removeAttribute?t.$.style.removeAttribute(D.cssStyleToDomStyle(e)):t.setStyle(e,""),t.$.style.cssText||t.removeAttribute("style")},setStyle:function(e,t){return this.$.style[D.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){p&&f.version<9?(e=Math.round(100*e),this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:f.gecko?function(){this.$.style.MozUserSelect="none"}:f.webkit?function(){this.$.style.uE="none"}:function(){if(p||f.opera){var e,t=this.$,n=0;for(t.unselectable="on";e=t.all[n++];)switch(e.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:e.unselectable="on"}}},vr:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},ir:function(e){var t=this,n=0,i=0,o=t.getDocument().bH(),a="BackCompat"==t.getDocument().$.compatMode,r=t.getDocument();if(document.documentElement.getBoundingClientRect){var l=t.$.getBoundingClientRect(),s=r.$.documentElement,d=s.clientTop||o.$.clientTop||0,c=s.clientLeft||o.$.clientLeft||0,u=!0;if(p){var h=r.gT().contains(t),m=r.bH().contains(t);u=a&&m||!a&&h}u&&(n=l.left+(!a&&s.scrollLeft||o.$.scrollLeft),n-=c,i=l.top+(!a&&s.scrollTop||o.$.scrollTop),i-=d)}else for(var g,v=t,b=null;v&&"body"!=v.getName()&&"html"!=v.getName();){n+=v.$.offsetLeft-v.$.scrollLeft,i+=v.$.offsetTop-v.$.scrollTop,v.equals(t)||(n+=v.$.clientLeft||0,i+=v.$.clientTop||0);for(var y=b;y&&!y.equals(v);)n-=y.$.scrollLeft,i-=y.$.scrollTop,y=y.getParent();b=v,v=(g=v.$.offsetParent)?new L(g):null}if(e){var w=t.getWindow(),_=e.getWindow();if(!w.equals(_)&&w.$.frameElement){var F=new L(w.$.frameElement).ir(e);n+=F.x,i+=F.y}}return document.documentElement.getBoundingClientRect||f.gecko&&!a&&(n+=t.$.clientLeft?1:0,i+=t.$.clientTop?1:0),{x:n,y:i}},scrollIntoView:function(e){var t=this.getWindow(),n=t.eR().height,i=-1*n;e?i+=n:(i+=this.$.offsetHeight||0,i+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0),i=(i+=this.ir().y)<0?0:i;var o=t.hV().y;(i>o||i<o-n)&&t.$.scrollTo(0,i)},bR:function(t){var n=this;switch(t){case e.eV:n.addClass("cke_on"),n.removeClass("cke_off"),n.removeClass("cke_disabled");break;case e.aY:n.addClass("cke_disabled"),n.removeClass("cke_off"),n.removeClass("cke_on");break;default:n.addClass("cke_off"),n.removeClass("cke_on"),n.removeClass("cke_disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src,p&&f.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}return e&&new T(e.contentWindow.document)},qw:function(e,t){var n=this.$.attributes;t=t||{};for(var i=0;i<n.length;i++){var o=n[i];if(o.specified||p&&o.nodeValue&&"value"==o.nodeName.toLowerCase()){var a=o.nodeName;if(a in t)continue;var r=this.getAttribute(a);null===r&&(r=o.nodeValue),e.setAttribute(a,r)}}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){var t=this;if(t.getName()!=e){var n=t.getDocument(),i=new L(e,n);t.qw(i),t.jg(i),t.$.parentNode.replaceChild(i.$,t.$),i.$._ckf_expando=t.$._ckf_expando,t.$=i.$}},getChild:function(e){var t=this.$;if(e.slice)for(;e.length>0&&t;)t=t.childNodes[e.shift()];else t=t.childNodes[e];return t?new E.bi(t):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(e){e.data.bK().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}}),function(){var e={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};function t(t){for(var n=0,i=0,o=e[t].length;i<o;i++)n+=parseInt(this.getComputedStyle(e[t][i])||0,10)||0;return n}L.prototype.setSize=function(e,n,i){"number"==typeof n&&(!i||p&&f.quirks||(n-=t.call(this,e)),this.setStyle(e,n+"px"))},L.prototype.hR=function(e,n){var i=Math.max(this.$["offset"+D.capitalize(e)],this.$["client"+D.capitalize(e)])||0;return n&&(i-=t.call(this,e)),i}}(),e.command=function(t,n){this.pW=[],this.exec=function(i){return!(this.bu==e.aY||!1===this.readOnly&&t.config.readOnly)&&(n.oD&&t.focus(),!1!==n.exec.call(this,t,i))},D.extend(this,n,{iH:{qt:1},oD:!0,bu:e.aS}),e.event.call(this)},e.command.prototype={enable:function(){var t=this;t.bu==e.aY&&t.bR(t.vf&&void 0!==t.lJ?t.lJ:e.aS)},disable:function(){this.bR(e.aY)},bR:function(e){var t=this;return t.bu!=e&&(t.lJ=t.bu,t.bu=e,t.oW("bu"),!0)},rJ:function(){this.bu==e.aS?this.bR(e.eV):this.bu==e.eV&&this.bR(e.aS)}},e.event.du(e.command.prototype,!0),e.config={customConfig:e.getUrl("config.js"),connectorLanguage:"java",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,search,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,mobile,html5upload,gallery,csrftokenmanager",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:100,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0,popupTitle:"CKFinder 2",popupFeatures:"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes"},CKFinder.config=e.config;var I,O,U=e.config;e.dU=function(e,t){this.rG=e,this.message=t},e.fs=function(e){return e.fs?e.fs:(this.hasFocus=!1,this._={application:e},this)},e.fs.prototype={focus:function(){var t=this;if(t._.fW&&clearTimeout(t._.fW),!t.hasFocus){e.nG&&e.nG.fs.ly();var n=t._.application;n.container.getFirst().addClass("cke_focus"),t.hasFocus=!0,n.oW("focus")}},blur:function(){var e=this;e._.fW&&clearTimeout(e._.fW),e._.fW=setTimeout(function(){delete e._.fW,e.ly()},100)},ly:function(){if(this.hasFocus){var e=this._.application;e.container.getFirst().removeClass("cke_focus"),this.hasFocus=!1,e.oW("blur")}}},e.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(t,n,i){t&&e.lang.ko[t]||(t=this.jV(n,t)),this[t]?i(t,this[t]):e.scriptLoader.load(e.getUrl("lang/"+t+".js"),function(){i(t,CKFinder.lang[t])},this)},jV:function(t,n){var i=this.ko,o=(n=n||navigator.userLanguage||navigator.language).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),a=o[1],r=o[2];return i[a+"-"+r]?a=a+"-"+r:i[a]||(a=null),e.lang.jV=a?function(){return a}:function(e){return e},a||t}},e.log=function(){if(U.log||window.CKFINDER_LOG){for(var t="",n=0;n<arguments.length;n++){var i=arguments[n];if(i)switch(t&&(t+="; "),typeof i){case"function":var o=/function (\w+?)\(/.exec(i.toString());t+=o=o?o[1]:"anonymous func";break;default:t+=i?i.toString():""}}e._.log.push(t),"object"==typeof window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(t))}},e.ba=function(t){return U.logStackTrace&&e.log("[EXCEPTION] "+t.toString()),t},e.mZ=function(t){for(var n="",i=0;i<e._.log.length;i++)n+=i+1+". "+e._.log[i]+"\n";return n},e._.log=[],e.scriptLoader=(I={},O={},{load:function(t,n,i,o,a,r){var l="string"==typeof t;l&&(t=[t]),i||(i=e);var s=t.length,d=[],c=[],u=function(e){n&&(l?n.call(i,e):n.call(i,d,c))};if(0!==s)for(var f=function(e,t){(t?d:c).push(e),--s<=0&&u(t)},h=function(e,t){I[e]=1;var n=O[e];delete O[e];for(var i=0;i<n.length;i++)n[i](e,t)},m=function(t){if(!0!==o&&I[t])f(t,!0);else{var i=O[t]||(O[t]=[]);if(i.push(f),!(i.length>1)){var l=new L("script",r);l.setAttributes({type:"text/javascript",src:t}),n&&(p?l.$.onreadystatechange=function(){"loaded"!=l.$.readyState&&"complete"!=l.$.readyState||(l.$.onreadystatechange=null,e.log("[LOADED] "+t),h(t,!0))}:(l.$.onload=function(){setTimeout(function(){e.log("[LOADED] "+t),h(t,!0)},0)},l.$.onerror=function(){h(t,!1)})),l.appendTo(a||e.document.getHead())}}},g=0,v=s;g<v;g++)m(t[g]);else u(!0)},uq:function(t){var n=new L("script");n.setAttribute("type","text/javascript"),n.appendText(t),n.appendTo(e.document.getHead())}}),CKFinder.scriptLoader=e.scriptLoader,e.fQ=function(e,t){var n=this;n.basePath=e,n.fileName=t,n.bX={},n.loaded={},n.jn={},n._={rZ:{}}},e.fQ.prototype={add:function(e,t){if(this.bX[e])throw'[CKFINDER.fQ.add] The resource name "'+e+'" is already bX.';this.bX[e]=t||{}},eB:function(e){return this.bX[e]||null},getPath:function(t){var n=this.jn[t];return e.getUrl(n&&n.dir||this.basePath+t+"/")},pi:function(t){var n=this.jn[t];return e.getUrl(this.getPath(t)+(n&&n.file||this.fileName+".js"))},tR:function(e,t,n){e=e.split(",");for(var i=0;i<e.length;i++){var o=e[i];this.jn[o]={dir:t,file:n}}},load:function(t,n,i){D.isArray(t)||(t=t?[t]:[]);for(var o=this.loaded,a=this.bX,r=[],l={},s={},d=0;d<t.length;d++){var c=t[d];if(c)if(o[c]||a[c])s[c]=this.eB(c);else{var u=this.pi(c);r.push(u),u in l||(l[u]=[]),l[u].push(c)}}e.scriptLoader.load(r,function(e,t){if(t.length)throw'[CKFINDER.fQ.load] Resource name "'+l[t[0]].join(",")+'" was not found at "'+t[0]+'".';for(var a=0;a<e.length;a++)for(var r=l[e[a]],d=0;d<r.length;d++){var c=r[d];s[c]=this.eB(c),o[c]=1}n.call(i,s)},this)}},e.plugins=new e.fQ("plugins/","plugin");var A,P,B,M,q,j,H=e.plugins;H.load=D.override(H.load,function(e){return function(t,n,i){var o={},a=function(t){e.call(this,t,function(e){D.extend(o,e);var t=[];for(var r in e){var l=e[r],s=l&&l.bM;if(s)for(var d=0;d<s.length;d++)o[s[d]]||t.push(s[d])}if(t.length)a.call(this,t);else{for(r in o)(l=o[r]).onLoad&&!l.onLoad.qK&&(l.onLoad(),l.onLoad.qK=1);n&&n.call(i||window,o)}},this)};a.call(this,t)}}),H.rX=function(e,t,n){this.eB(e).lang[t]=n},A={},P=function(e,t){var n=function(){A[e]=1,t()},i=new L("img");i.on("load",n),i.on("error",n),i.setAttribute("src",e)},e.rw={load:function(e,t){for(var n=e.length,i=function(){0==--n&&t()},o=0;o<e.length;o++){var a=e[o];A[a]?i():P(a,i)}}},e.skins=(M={},q={},j=function(t,n,i,o){var a=B[n];t.skin||(t.skin=a,a.bz&&a.bz(t));var r=function(t){for(var i=0;i<t.length;i++)t[i]=e.getUrl(q[n]+t[i])};if(!M[n]){var l=a.ls;if(l&&l.length>0)return r(l),void e.rw.load(l,function(){M[n]=1,j(t,n,i,o)});M[n]=1}var s=0;if((i=a[i])?i.iB?i.iB[t.name]&&(s=1):i.iB=[]:s=1,s)o&&o();else{void 0===i.eb&&(i.eb=[]),void 0===i.eb[t.name]&&(i.eb[t.name]=[]);var d=i.eb[t.name];if(d.push(o),d.length>1)return;var c=!i.css||!i.css.length,u=!i.js||!i.js.length,f=function(){if(c&&u){i.iB[t.name]=1;for(var e=0;e<d.length;e++)d[e]&&d[e]()}};if(!c){if(i.rr||(r(i.css),i.rr=1),i.qx)for(var p=0;p<i.css.length;p++)e.oC.appendStyleSheet(i.css[p]);else t.on("themeSpace",function(e){if("head"==e.data.space)for(var t=0;t<i.css.length;t++)e.data.html+="<link rel='stylesheet' href='"+i.css[t]+"'>\n";e.removeListener()});c=1}u||(r(i.js),t.scriptLoader.load(i.js,function(){u=1,f()})),f()}},{add:function(t,n){B[t]=n,n.fh=q[t]||(q[t]=e.getUrl("skins/"+t+"/"))},loaded:B={},load:function(t,n,i){var o=t.gd,a=t.fh;B[o]?(j(t,o,n,i),B[o]):(q[o]=a,e.scriptLoader.load(a+"skin.js",function(){j(t,o,n,i)}))}}),e.gc=new e.fQ("gc/","theme"),e.bY=function(e){return e.bY?e.bY:(this._={jZ:{},items:{},application:e},this)};var z,K,V,G,Y,X,Z,Q,J,ee,te,ne,ie,oe,ae,re,le,se,de,ce,ue,fe,pe,he,me,ge,ve,be,ye,we=e.bY;if(we.prototype={add:function(e,t,n){this._.items[e]={type:t,command:n.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(e){var t=this._.items[e],n=t&&this._.jZ[t.type],i=t&&t.command&&this._.application.cS(t.command),o=n&&n.create.apply(this,t.mp);return i&&i.pW.push(o),o},kd:function(e,t){this._.jZ[e]=t}},z=0,K=function(){var t="ckfinder"+ ++z;return e.instances&&e.instances[t]?K():t},V={},G=function(t){var n=t.config.customConfig;if(!n)return!1;var i=V[n]||(V[n]={});return i.fn?setTimeout(function(){i.fn.call(t,t.config),t.config.customConfig!=n&&G(t)||t.cr("customConfigLoaded")},0):e.scriptLoader.load(n,function(){CKFinder.customConfig?i.fn=CKFinder.customConfig:i.fn=function(){},G(t)}),!0},Y=function(t){var n=t.config.skin.split(","),i=n[0],o=e.getUrl(n[1]||"skins/"+i+"/");t.gd=i,t.fh=o,t.iy="cke_skin_"+i+" skin_"+i,t.qn=t.ox(),t.on("uiReady",function(){t.document.getWindow().on("lW",function(){D.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),!0),D.setCookie("CKFinder_UId",encodeURIComponent(t.id?t.id:location.href),!0)})}),t.cr("configLoaded"),Z(t)},X=function(t,n){var i,o=[e.oC];if(n.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==n.$.top.name){if(t.document.focus(),t.focus(),t.cg.inUrlPopup)try{o.push(new T(e.oC.getWindow().$.opener.document))}catch(e){}var a,r;for(a=t,r=n,e.event.jP=!0,a.document.on("keydown",function(t){var n=t.data,i=n.oV(),o=n.db();if(116==i||o==e.bP+82||o==e.bP+e.dy+82){a.execCommand("refresh"),r.$.event&&r.$.event.keyCode&&(r.$.event.keyCode=5055);try{t.data.preventDefault()}catch(t){}}}),e.event.jP=!1,function(e,t,n){var i,o,a=[];for(o=0;o<n.length;o++)i=n[o],a.push({evt:"onbeforeunload",bi:i.bH().$,fO:i.bH().$.onbeforeunload},{evt:"onunload",bi:i.getWindow().$,fO:i.getWindow().$.onunload},{evt:"onbeforeunload",bi:i.getWindow().$,fO:i.getWindow().$.onbeforeunload});t.$.onunload=t.$.onbeforeunload=function(){var e;for(e=0;e<a.length;e+=1)a[e].bi[a[e].evt]=a[e].fO}}(0,n,o),i=0;i<o.length;i+=1)o[i].bH().$.onbeforeunload=o[i].getWindow().$.onunload=o[i].getWindow().$.onbeforeunload=function(){var e=t.element&&t.element.getDocument().getWindow().$;e.closed||e.close()}}},Z=function(t){e.lang.load(t.config.language,t.config.defaultLanguage,function(e,n){var i,o;t.langCode=e,t.lang=D.prototypedCopy(n),t.lB=(i="['"+t.lang.DateAmPm.join("','")+"']",o=(o="'"+(o=t.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(e){var t;switch(e){case"d":t="day.replace(/^0/,'')";break;case"dd":t="day";break;case"m":t="month.replace(/^0/,'')";break;case"mm":t="month";break;case"yy":t="year.substr(2)";break;case"yyyy":t="year";break;case"H":t="hour.replace(/^0/,'')";break;case"HH":t="hour";break;case"h":t="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":t="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":t="minute.replace(/^0/,'')";break;case"MM":t="minute";break;case"a":t=i+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":t=i+"[ hour < 12 ? 0 : 1 ]";break;default:t="'"+e+"'"}return"',"+t+",'"}))+"'").replace(/('',)|,''$/g,""),new Function("day","month","year","hour","minute","return ["+o+"].join('');")),f.gecko&&f.version<10900&&"rtl"==t.lang.dir&&(t.lang.dir="ltr"),Q(t)})},Q=function(t){var n=t.config,i=n.plugins,o=n.extraPlugins,a=n.removePlugins;if(o){var r=new RegExp("(?:^|,)(?:"+o.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");i=i.replace(r,""),i+=","+o}a&&(r=new RegExp("(?:^|,)(?:"+a.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),i=i.replace(r,"")),H.load(i.split(","),function(n){var i=[],o=[],a=[];if(t.config.readOnly)for(var r in n)!1===n[r].readOnly&&delete n[r];t.plugins=n;for(r in n){var l=n[r],s=l.lang,d=H.getPath(r),c=null;n[r].name=r,l.pathName=d,s&&(c=D.indexOf(s,t.langCode)>=0?t.langCode:s[0],l.lang[c]?(D.extend(t.lang,l.lang[c]),c=null):a.push(e.getUrl(d+"lang/"+c+".js"))),o.push(c),i.push(l)}e.scriptLoader.load(a,function(){for(var n=["eK","bz","gr"],a=0;a<n.length;a++)for(var r=0;r<i.length;r++){var l=i[r];0===a&&o[r]&&l.lang&&D.extend(t.lang,l.lang[o[r]]),l[n[a]]&&(e.log("[PLUGIN] "+l.name+"."+n[a]),l[n[a]](t))}t.oW("pluginsLoaded"),J(t)})})},J=function(t){e.skins.load(t,"application",function(){e.skins.load(t,"host",function(){ee(t)})})},ee=function(t){var n=t.config.theme;e.gc.load(n,function(){(t.theme=e.gc.eB(n)).pathName=e.gc.getPath(n),t.oW("themeAvailable")})},e.application.prototype.iI=function(t){var n,i,o=L.eB(this._.element),a=this._.instanceConfig;if(delete this._.element,delete this._.instanceConfig,this._.ky={},this._.gS=[],o.getDocument().getWindow().$.CKFinder=t,this.element=o,this.document=null,this.rQ={},this.name=K(),this.name in e.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=D.prototypedCopy(U),this.bY=new we(this),this.fs=new e.fs(this),this.aL={},this.ld={},this.on("uiReady",function(e){var t=this,n=t.document.getWindow();n.on("lW",t.destroy,t),t.cg.inPopup&&X(t,n)},this),this.cg=new d(this),this.on("configLoaded",function(e){var t,n,i,o=this;t=o.cg,n=o,i=o.config.callback,n.on("appReady",function(e){e.removeListener(),t.document=n.document.$,t.folders=n.folders,t.files=n.ld["filesview.filesview"].data().files,t.basketFiles=n.basketFiles,t.resourceTypes=n.resourceTypes,t.connector=n.connector,t.lang=n.lang,t.langCode=n.langCode,t.config=n.config,n.ld["foldertree.foldertree"].on("afterAddFolder",function(e){e.removeListener(),i&&i(t)},t)},t,null,999),o.id=o.config.id},this),i=a,(n=this).on("customConfigLoaded",function(){if(i){if(i.on)for(var e in i.on)n.on(e,i.on[e]);D.extend(n.config,i,!0),delete n.config.on}Y(n)}),i&&i.id&&(n.config.id=i.id),i&&void 0!=i.customConfig&&(n.config.customConfig=i.customConfig),G(n)||n.cr("customConfigLoaded"),e.oW("instanceCreated",null,this)},D.extend(e.application.prototype,{bD:function(t,n){return this._.ky[t]=new e.command(this,n)},destroy:function(){this.theme.destroy(this),this.oW("destroy"),e.remove(this)},execCommand:function(t,n){e.log("[COMMAND] "+t);var i=this.cS(t),o={name:t,rm:n,command:i};return!(!i||i.bu==e.aY||!0===this.oW("beforeCommandExec",o)||(o.returnValue=i.exec(o.rm),i.async||!0===this.oW("afterCommandExec",o)))&&o.returnValue},cS:function(e){return this._.ky[e]},ox:function(){var e=Math.round((new Date).getTime()/1e3),t=D.getCookie("CKFinder_UTime"),n=decodeURIComponent(D.getCookie("CKFinder_UId"));return n&&t&&n==(this.id?this.id:location.href)&&Math.abs(e-t)<5?1:0},bs:""}),function(){for(var t="",n=49;n<58;n++)t+=String.fromCharCode(n);for(n=65;n<91;n++)73!=n&&79!=n&&(t+=String.fromCharCode(n));e.bs=t,e.nd="lo",e.jG="ho",e.hf=new window.RegExp("^www\\."),e.hg=new window.RegExp(":\\d+$"),e.lS=function(t){return t.toLowerCase().replace(e.hf,"").replace(e.hg,"")}}(),e.on("loaded",function(){var t=e.application.eb;if(t){delete e.application.eb;for(var n=0;n<t.length;n++)t[n].iI()}}),delete e.dO,e.instances={},e.document=new T(document),e.oC=e.document.getWindow().$!=e.document.getWindow().$.top?new T(e.document.getWindow().$.top.document):e.document,e.add=function(t){e.instances[t.name]=t,e.jt=t,t.on("focus",function(){e.nG!=t&&(e.nG=t,e.oW("nG"))}),t.on("blur",function(){e.nG==t&&(e.nG=null,e.oW("nG"))})},e.remove=function(t){delete e.instances[t.name]},e.aL={},e.eV=1,e.aS=2,e.aY=0,e.bF="",function(){function t(e,t){return e+"."+(t.name||t||e)}e.ld={bX:{},hS:function(n,o,a){var r=t(n,o);if(void 0!==this.bX[r])throw"[CKFINDER] Widget "+r+" already bX!";return e.log("[WIDGET] bX "+r),this.bX[r]=new i(r,a),this.bX[r]},bz:function(n,i,o,a,r){var l=t(i,o),s=this.bX[l],d=D.deepCopy(s.hF),c=function(e,t,n){this.app=e,this.eh=t instanceof L?t:new L(t),this.hF=d?D.extend(d,n):n||{},this._={};var i=function(e){this.ib=e};i.prototype=this.tools,this.tools=new i(this);var o=s.dT;if(o.length)for(var a=0;a<o.length;a++)o[a].call(this,e,this)};c.prototype=s;var u=new c(n,a,r);for(var f in u.fw)u.fw[f].readOnly&&n.config.readOnly?u.ke(f):u.gA(f);if(n.ld[l])throw"[CKFINDER Widget "+l+" already initiated.";return n.ld[l]=u,e.log("[WIDGET] instanced "+l),u}};var n={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},i=function(e,t){var n=this;n.id=e,n.readOnly=!0,n.fw={},n.hF=t||{},n.dT=[],n.tools=new n.tools(n)};i.prototype={gA:function(t){var i=this;e.log("[WIDGET] Enabling behavior "+t);var o=i.fw[t];if(o)for(var a=i,r=0;r<o.cC.length;r++){var l=o.cC[r];n[l]?i.eh.on(l,o.fO,a):(i.on(l,o.fO,a),i.app.on(l,o.fO,a))}},ke:function(t){e.log("[WIDGET] Disabling behavior "+t);var i=this.fw[t];if(i)for(var o=0;o<i.cC.length;o++){var a=i.cC[o];n[a]?this.eh.removeListener(a,i.fO):this.removeListener(a,i.fO)}},bh:function(e,t,n,i){D.isArray(t)||(t=[t]),this.fw[e]={cC:t,fO:n,readOnly:!1===i},this.eh&&this.gA(e)},removeBehavior:function(e){delete this.fw[e]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}},i.prototype.tools.prototype={kg:function(e){if(e.target==this.ib.eh)return 1}},e.event.du(i.prototype)}(),e.xml=function(e){var t=null;if("object"==typeof e)t=e;else{var n=(e||"").replace(/&nbsp;/g," ");if(window.DOMParser)t=(new DOMParser).parseFromString(n,"text/xml");else if(window.ActiveXObject){try{t=new ActiveXObject("MSXML2.DOMDocument")}catch(e){try{t=new ActiveXObject("Microsoft.XmlDom")}catch(e){}}t&&(t.async=!1,t.resolveExternals=!1,t.validateOnParse=!1,t.loadXML(n))}}this.mq=t},e.xml.prototype={selectSingleNode:function(e,t){var n=this.mq;if(t||(t=n)){if("selectSingleNode"in t)return t.selectSingleNode(e);if(n.evaluate)return(i=n.evaluate(e,t,null,9,null))&&i.singleNodeValue||null;if(t.querySelectorAll){var i,o=this.selectNodes(e,t);if(1==o.length)return(i=e.match(/\/@(.*$)/))?o[0].getAttributeNode(i[1]):o[0]}else alert("XPath is not supported in your browser")}return null},selectNodes:function(e,t){var n=this.mq,i=[];if(t||(t=n)){if("selectNodes"in t)return t.selectNodes(e);if(n.evaluate){var o=n.evaluate(e,t,null,5,null);if(o)for(var a;a=o.iterateNext();)i.push(a)}else{if(t.querySelectorAll){var r=e.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">");return t.querySelectorAll(r)}alert("XPath is not supported in your browser")}}return i},vB:function(e,t){var n=this.selectSingleNode(e,t),i=[];if(n)for(n=n.firstChild;n;)n.xml?i.push(n.xml):window.XMLSerializer&&i.push((new XMLSerializer).serializeToString(n)),n=n.nextSibling;return i.length?i.join(""):null}},te={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},ne={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},ie=function(t){for(var n=t.getChildren(),i=0,o=n.count();i<o;i++){var a=n.getItem(i);if(a.type==e.cv&&e.ga.um[a.getName()])return!0}return!1},E.qS=function(t){for(var n=this,i=null,o=null,a=[],r=t;r;){if(r.type==e.cv){n.qH||(n.qH=r);var l=r.getName();if(p&&"HTML"!=r.$.scopeName&&(l=r.$.scopeName.toLowerCase()+":"+l),o||(!i&&te[l]&&(i=r),ne[l]&&(i||"div"!=l||ie(r)?o=r:i=r)),a.push(r),"body"==l)break}r=r.getParent()}n.block=i,n.tX=o,n.elements=a},E.qS.prototype={sJ:function(e){var t=this.elements,n=e&&e.elements;if(!n||t.length!=n.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(n[i]))return!1;return!0}},E.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},E.text.prototype=new E.bi,D.extend(E.text.prototype,{type:e.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(e){var t=this;if(p&&e==t.hJ()){var n=t.getDocument().jT("");return n.kB(t),n}var i=t.getDocument(),o=new E.text(t.$.splitText(e),i);if(f.ie8){var a=new E.text("",i);a.kB(o),a.remove()}return o},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),E.pa=function(t){t=t||e.document,this.$=t.$.createDocumentFragment()},D.extend(E.pa.prototype,L.prototype,{type:e.om,kA:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1}),function(){function t(t,n){if(this._.end)return null;var i,o,a=this.mk,r=this.vR,l=this.type,s=t?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,a.trim(),a.collapsed))return this.end(),null;if(!t&&!this._.kp){var d=a.endContainer,c=d.getChild(a.endOffset);this._.kp=function(t,n){return!(n&&d.equals(t)||c&&t.equals(c)||t.type==e.cv&&"body"==t.getName())}}if(t&&!this._.ka){var u=a.startContainer,f=a.startOffset>0&&u.getChild(a.startOffset-1);this._.ka=function(t,n){return!(n&&u.equals(t)||f&&t.equals(f)||t.type==e.cv&&"body"==t.getName())}}var p=t?this._.ka:this._.kp;for(o=r?function(e,t){return!1!==p(e,t)&&r(e)}:p,this.current?i=this.current[s](!1,l,o):t?(i=a.endContainer,a.endOffset>0?!1===o(i=i.getChild(a.endOffset-1))&&(i=null):i=!1===o(i)?null:i.hZ(!0,l,o)):(i=(i=a.startContainer).getChild(a.startOffset))?!1===o(i)&&(i=null):i=!1===o(a.startContainer)?null:a.startContainer.hL(!0,l,o);i&&!this._.end;){if(this.current=i,this.lf&&!1===this.lf(i)){if(n&&this.lf)return!1}else if(!n)return i;i=i[s](!1,l,o)}return this.end(),this.current=null}function n(e){for(var n,i=null;n=t.call(this,e);)i=n;return i}E.gm=D.createClass({$:function(e){this.mk=e,this._={}},ej:{end:function(){this._.end=1},next:function(){return t.call(this)},previous:function(){return t.call(this,!0)},sC:function(){return!1!==t.call(this,!1,!0)},sD:function(){return!1!==t.call(this,!0,!0)},uF:function(){return n.call(this)},uB:function(){return n.call(this,!0)},reset:function(){delete this.current,this._={}}}});var i={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={hr:1};L.prototype.qy=function(e){var t=D.extend({},o,e||{});return i[this.getComputedStyle("display")]||t[this.getName()]},E.gm.pQ=function(t){return function(n,i){return!(n.type==e.cv&&n.qy(t))}},E.gm.us=function(){return this.pQ({br:1})},E.gm.tU=function(e){},E.gm.tW=function(e,t){function n(e){return e&&e.getName&&"span"==e.getName()&&e.hasAttribute("_fck_bookmark")}return function(i){var o,a;return o=i&&!i.getName&&(a=i.getParent())&&n(a),o=e?o:o||n(i),t^o}},E.gm.sf=function(t){return function(n){var i=n&&n.type==e.fl&&!D.trim(n.getText());return t^i}}}(),function(){if(f.webkit)f.hc=!1;else{var t=L.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>',e.document);t.appendTo(e.document.getHead());try{f.hc=t.getComputedStyle("border-top-color")==t.getComputedStyle("border-right-color")}catch(e){f.hc=!1}f.hc&&(f.cssClass+=" cke_hc"),t.remove()}}(),H.load(U.pO.split(","),function(){e.status="loaded",e.oW("loaded");var t=e._.io;if(t){delete e._.io;for(var n=0;n<t.length;n++)e.add(t[n])}}),p)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"Close",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{FileEmpty:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",FileInvChar:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',PopupBlockView:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."},Search:{searchPlaceholder:"Search"}},e.aL.Acl=function(e){var t=this;e||(e=0),t.folderView=1==(1&e),t.folderCreate=2==(2&e),t.folderRename=4==(4&e),t.folderDelete=8==(8&e),t.fileView=16==(16&e),t.fileUpload=32==(32&e),t.fileRename=64==(64&e),t.fileDelete=128==(128&e)},H.add("acl"),function(){H.add("connector",{bM:["csrftokenmanager"],bz:function(t){t.on("appReady",function(){t.connector=new e.aL.Connector(t);var n=t.config.resourceType,i=n?{type:n}:null;t.connector.sendCommand("Init",i,function(n){var i;if(!n.checkError()){var o="Connector/ConnectorInfo/";e.ed=n.selectSingleNode(o+"@s").value,e.bF=n.selectSingleNode(o+"@c").value+"----",t.config.thumbsEnabled="true"==n.selectSingleNode(o+"@thumbsEnabled").value,t.config.thumbsDirectAccess=!1,t.config.thumbsEnabled?((i=n.selectSingleNode(o+"@thumbsUrl"))&&(t.config.thumbsUrl=i.value),(i=n.selectSingleNode(o+"@thumbsDirectAccess"))&&(t.config.thumbsDirectAccess="true"==i.value),i=n.selectSingleNode(o+"@thumbsWidth"),t.config.thumbsWidth=(i?parseInt(i.value,10):100)||100,i=n.selectSingleNode(o+"@thumbsHeight"),t.config.thumbsHeight=(i?parseInt(i.value,10):100)||100):(t.config.thumbsWidth=100,t.config.thumbsHeight=100),t.config.imagesMaxWidth=parseInt(n.selectSingleNode(o+"@imgWidth").value,10),t.config.imagesMaxHeight=parseInt(n.selectSingleNode(o+"@imgHeight").value,10),i=n.selectSingleNode(o+"@uploadMaxSize"),t.config.uploadMaxSize=i?parseInt(i.value,10):0,i=n.selectSingleNode(o+"@uploadCheckImages"),t.config.uploadCheckImages=!!i&&"true"==i.value,i=n.selectSingleNode(o+"@csrfProtection"),t.config.csrfProtection=!!i&&"true"==i.value;var a=n.selectSingleNode(o+"@plugins"),r=a&&a.value;r&&r.length?H.load(r.split(","),function(i){var o=[],a=[],r=[];for(var l in i){var s=i[l],d=s.lang,c=H.getPath(l),u=null;t.plugins[l]||(t.plugins[l]=i[l],i[l].name=l,s.pathName=c,d&&(u=D.indexOf(d,t.langCode)>=0?t.langCode:d[0],s.lang[u]?(D.extend(t.lang,s.lang[u]),u=null):r.push(e.getUrl(c+"lang/"+u+".js"))),a.push(u),o.push(s))}e.scriptLoader.load(r,function(){for(var i=["eK","bz","gr"],r=0;r<i.length;r++)for(var l=0;l<o.length;l++){var s=o[l];0===r&&a[l]&&s.lang&&D.extend(t.lang,s.lang[a[l]]),s[i[r]]&&(e.log("[PLUGIN] "+s.name+"."+i[r]),s[i[r]](t))}t.cr("uiReady"),t.cr("appReady"),t.oW("pluginsLoaded",{step:2,jN:t.connector}),t.cr("connectorInitialized",{xml:n})})}):(t.oW("pluginsLoaded",{step:2,jN:t.connector}),t.cr("connectorInitialized",{xml:n}))}})})}}),e.aL.Connector=function(e){this.app=e;var t=e.config.connectorLanguage||"java";e.config.connectorPath?this.oN=e.config.connectorPath:this.oN="http://venperacademy.com:9090/CKFinderJava-2.6.2.1/ckfinder/core/connector/"+t+"/connector."+t},e.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return e.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return e.getResourceType(this.currentType())},sendCommand:function(n,i,o,a,r){var l=this.composeUrl(n,i,a,r),s=this;return o?e.ajax.loadXml(l,function(e){e.hy=s.app,s.app.oW("connectorResponse",{xml:e}),o(D.extend(e,t))}):e.ajax.loadXml(l,function(e){s.app.oW("connectorResponse",{xml:e})})},sendCommandPost:function(n,i,o,a,r,l){var s=this.composeUrl(n,i,r,l),d=this;return o||(o={}),o.ckCsrfToken=e.getCsrfToken(),o.CKFinderCommand=!0,a?e.ajax.loadXml(s,function(e){e.hy=d.app,d.app.oW("connectorResponse",{xml:e}),a(D.extend(e,t))},this.composeUrlParams(o)):e.ajax.loadXml(s,function(e){d.app.oW("connectorResponse",{xml:e})},this.composeUrlParams(o))},composeUrl:function(e,t,n,i){var o=this,a=o.oN+"?command="+encodeURIComponent(e);if("Init"!=e){var r="";i||(i=o.app.aV),r=n?o.app.getResourceType(n).hash:o.app.getResourceType(i.type).hash,a+="&type="+encodeURIComponent(n||o.app.aV.type)+"&currentFolder="+encodeURIComponent(i.getPath()||"")+"&langCode="+o.app.langCode+"&hash="+r}if(t){var l=o.composeUrlParams(t);l&&(a+="&"+l)}return o.app.id&&(a+="&id="+encodeURIComponent(o.app.id)),o.app.config.connectorInfo&&(a+=("&"!=o.app.config.connectorInfo.charAt(0)?"&":"")+o.app.config.connectorInfo),a},composeUrlParams:function(e){if(!e)return"";var t="";for(var n in e)t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t}};var t={checkError:function(){var t=this,n=t.getErrorNumber(),i=t.hy.connector;if(n==i.ERROR_NONE)return!1;if(-1===n)return!0;var o,a=t.getErrorMessage();if(e.log("[ERROR] "+n),n==i.ERROR_CUSTOMERROR)o=a;else if(o=t.hy.lang.Errors[n])for(var r=0;r<=arguments.length;r++){var l=0===r?a:arguments[r-1];o=o.replace(/%(\d+)/,l)}else o=t.hy.lang.ErrorUnknown.replace(/%1/,n);return t.hy.msgDialog("",o),n!=i.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var e=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return e?parseInt(e.value,10):-1},getErrorMessage:function(){var e=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return e?e.value:""}}}(),H.add("resource",{bM:["connector"],bz:function(t){t.resourceTypes=[],t.on("connectorInitialized",function(n){for(var i=n.data.xml.selectNodes("Connector/ResourceTypes/ResourceType"),o=0;o<i.length;o++){var a=i[o].attributes;t.resourceTypes.push(new e.aL.ResourceType(t,{name:a.getNamedItem("name").value,url:a.getNamedItem("url").value,hasChildren:a.getNamedItem("hasChildren").value,allowedExtensions:a.getNamedItem("allowedExtensions").value,deniedExtensions:a.getNamedItem("deniedExtensions").value,acl:a.getNamedItem("acl").value,hash:a.getNamedItem("hash").value,maxSize:a.getNamedItem("maxSize").value}))}t.cr("resourcesReceived",{hK:t.resourceTypes})}),t.getResourceType=function(e){for(var t=0;t<this.resourceTypes.length;t++){var n=this.resourceTypes[t];if(n.name==e)return n}return null}}}),function(){function t(e){var t={};if(e.length>0)for(var n=e.toLowerCase().split(","),i=0;i<n.length;i++)t[n[i]]=!0;return t}e.aL.ResourceType=function(e,n){var i=this;i.app=e,i.name=n.name,i.url=n.url,i.hasChildren="true"===n.hasChildren,i.defaultView="Thumbnails",i.allowedExtensions=n.allowedExtensions,i.deniedExtensions=n.deniedExtensions,i.oT=t(n.allowedExtensions),i.ms=t(n.deniedExtensions),i.nS=n.acl,i.hash=n.hash,i.maxSize=n.maxSize},e.aL.ResourceType.prototype={isExtensionAllowed:function(e){return e=e.toLowerCase(),!(0!==this.deniedExtensions.length&&this.ms[e]||0!==this.allowedExtensions.length&&!this.oT[e])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var e=0;e<this.app.folders.length;e++){var t=this.app.folders[e];if(t.isRoot&&t.type==this.name)return t}}}}(),(oe=function(e){this.app=e}).prototype.er=function(e,t){var n=this;if(!n.id){n.toolbarId="cke_"+D.getNextNumber(),n.id="cke_"+D.getNextNumber(),n.placeholderId="cke_"+D.getNextNumber();var i={id:n.id,placeholderId:n.placeholderId,lastTimeout:-1,app:e},o=D.addFunction(e.search.doSearch,i),a=D.addFunction(e.search.onFocus,i);t.push('<span class="cke_search_box" id="',n.toolbarId,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>'),t.push('<input id="'+n.id+'" '),t.push(' onkeyup="window.parent.CKFinder._.callFunction(',o,', this);"'),t.push(' oninput="window.parent.CKFinder._.callFunction(',o,', this);"'),t.push(' onfocus="window.parent.CKFinder._.callFunction(',a,', this);"'),t.push(">"),t.push('<span id="'+n.placeholderId+'" class="cke_search_placeholder" onclick="window.parent.CKFinder._.callFunction(',a,', this);">'+e.lang.Search.searchPlaceholder+"</span>"),t.push('<span class="cke_toolbar_end"></span></span>')}},oe.prototype.doSearch=function(){var e=this.app.ld["filesview.filesview"].oE().shownFiles.length,t=this.app.document.getById(this.id).getValue(),n=this.app;this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=null),e<200?n.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:t}):this.lastTimeout=setTimeout(function(){n.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:t})},1e3)},oe.prototype.onFocus=function(){this.app.document.getById(this.placeholderId).setStyle("display","none"),this.app.document.getById(this.id).$.focus()},oe.prototype.reset=function(){this.app.document.getById(this.id).setValue(""),this.app.document.getById(this.placeholderId).setStyle("display","inline")},H.add("search",{bM:["foldertree"],eK:function(e){e.search=new oe(e)},bz:function(e){e.on("appReady",function(){e.ld["foldertree.foldertree"].on("beforeSelectFolder",function(){e.search.reset()}),e.ld["formpanel.formpanel"].on("afterUploadFile",function(){e.search.reset()})})}}),function(){var t={iz:/[\\\/:\*\?"<>\|]/};function n(t,n,i,o,a){null===t.childFolders&&(t.childFolders=[]);var r=new e.aL.Folder(t.app,n,i,o,a);return r.parent=t,r.nh=t.isRoot?0:t.nh+1,t.childFolders.push(r),r}function i(e){return e.folders||(e.folders=[]),e.folders}function o(n,i){if(!n||0===n.length)throw new e.dU("name_empty",i.lang.ErrorMsg.FolderEmpty);if(t.iz.test(n))throw new e.dU("name_invalid_chars",i.lang.ErrorMsg.FolderInvChar);return!0}H.add("folder",{bM:["resource","connector","acl"],bz:function(t){t.folders=i(t),t.aV=null,t.on("resourcesReceived",function(n){for(var i=[],o=n.data.hK,a=0;a<o.length;a++){var r=o[a];i.push(new e.aL.Folder(t,r.name,r.name,r.hasChildren,r.nS)),i[i.length-1].isRoot=!0}t.oW("requestAddFolder",{folders:i},function(){var n=t.config.startupPath||"",i=0,o="",a="";if(t.config.rememberLastFolder){var r=t.id?"CKFinder_Path_"+t.id:"CKFinder_Path";o=decodeURIComponent(D.getCookie(r))||""}if(n&&!t.qn?(a=n,i=1):o?a=o:n?a=n:t.resourceTypes.length&&(a=t.resourceTypes[0].name+"/"),a){e.log("[FOLDER] Opening startup path: "+a);var l=a.split(":");(!t.getResourceType(l[0])||l.length<2)&&(l=[t.resourceTypes[0].name,"/"]);var s=t.ld["foldertree.foldertree"],d=/(.*\/)(.*)$/.exec(l[1]);s.tools.jL(l[0],d[1],function(n){if(n){e.log("[FOLDER] Opening startup folder: ",n);var o=!i&&("1"==l[2]||void 0===l[2]);o&&!1===t.config.startupFolderExpanded&&(o=0),s.oW("requestSelectFolder",{folder:n,expand:o,file:d[2]&&n.type==l[0]&&n.getPath()==d[1]?d[2]:""})}})}})}),t.bD("RemoveFolder",{readOnly:!1,exec:function(e){var t=e.aV;if(t){if(t.isRoot||!t.acl.folderDelete)return;e.fe("",e.lang.FolderDelete.replace("%1",D.escapeHtml(t.name)),function(){e.oW("requestProcessingFolder",{folder:t}),t.remove()})}}}),t.bD("CreateSubFolder",{readOnly:!1,exec:function(t){var n=t.aV;n&&t.hs(t.lang.NewNameDlgTitle,t.lang.FolderRename,"",function(i){if(i=D.trim(i))try{t.oW("requestProcessingFolder",{folder:n}),n.createNewFolder(i)}catch(i){if(!(i instanceof e.dU))throw i;t.oW("requestRepaintFolder",{folder:n}),t.msgDialog("",i.message)}})}}),t.bD("RenameFolder",{readOnly:!1,exec:function(t){var n=t.aV;if(n){if(n.isRoot||!n.acl.folderRename)return;t.hs(t.lang.RenameDlgTitle,t.lang.FolderRename,t.aV.name,function(i){if(i=D.trim(i))try{n.rename(i)}catch(i){if(!(i instanceof e.dU))throw i;t.oW("requestRepaintFolder",{folder:n}),t.msgDialog("",i.message)}})}}}),t.eU&&(t.dZ("folder0",99),t.dZ("folder1",100),t.dZ("folder2",101),t.dZ("folder3",102),t.eU({createSubFolder:{label:t.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},renameFolder:{label:t.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:t.lang.Delete,command:"RemoveFolder",group:"folder2"}}))}}),e.aL.Folder=function(t,n,o,a,r){var l=this;l.app=t,l.type=n||"",l.name=o||"",l.hasChildren=void 0==a||null===a||!!a,l.isRoot=!1,l.isOpened=!1,l.parent=null,l.isDirty=!1,l.acl=new e.aL.Acl(r),l.index=i(t).push(l)-1,l.childFolders=null},e.aL.Folder.prototype={getPath:function(){for(var e=this,t=e.isRoot?"/":e.name;e.parent;)t=(e=e.parent).isRoot?"/"+t:e.name+"/"+t;return e!=this?t+"/":t},getUrl:function(){for(var e=this,t="";e;)t=e.isRoot?this.app.getResourceType(e.type).url+t:encodeURIComponent(e.name)+"/"+t,e=e.parent;return t},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var e=this;if(e.app.folders[e.index]==e)return e;for(var t=0;t<e.parent.childFolders.length;t++)if(e.parent.childFolders[t].name==e.name)return e.parent.childFolders[t]},getChildren:function(t,i){var o=this,a=o.childFolders;if(!o.hl||i){if(a&&!o.isDirty&&!i)return t(a),a;if(o.hl=!0,o.isDirty&&a){e.log("[FOLDER] Clearing folder children cache.");for(var r=0;r<a.length;r++)delete o.app.folders[a[r].index]}return o.app.oW("requestLoadingFolder",{folder:o}),this.app.connector.sendCommand("GetFolders",null,function(e){if(e.checkError())o.app.oW("requestRepaintFolder",{folder:o});else{var i=e.selectSingleNode("Connector/@resourceType").value;o.hm=!0;var a=e.selectNodes("Connector/Folders/Folder"),r=[];o.childFolders=null;for(var l=0;l<a.length;l++){var s=a[l].attributes.getNamedItem("name").value,d="true"==a[l].attributes.getNamedItem("hasChildren").value,c=parseInt(a[l].attributes.getNamedItem("acl").value,10);r.push(n(o,i,s,d,c))}o.hasChildren=!!a.length,o.isDirty=!1,o.hl=null,o.app.oW("requestRepaintFolder",{folder:o}),t(r)}},o.type,o),null}e.log("[FOLDER] getChildrenLock active, defering callback..."),o.app.oW("requestLoadingFolder",{folder:o});var l=100;setTimeout(function(){o.hl?l<=3e3?setTimeout(arguments.callee,l*=2):(e.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"),o.hl=!1,o.getChildren(t)):t(a)})},mapLoadedDescendants:function(e){if(this.childFolders)for(var t=0;t<this.childFolders.length;t++){var n=this.childFolders[t];n.mapLoadedDescendants(e),e(n)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(e){e&&!this.hm||this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){for(var e=1,t=this;t;)e++,t=t.parent;return e},toggle:function(){this.hasChildren&&(this.isOpened?this.close():this.open())},createNewFolder:function(e){o(e,this.app);var t=this;t.isDirty=!0,t.app.connector.sendCommandPost("CreateFolder",{NewFolderName:e},null,function(n){n.checkError()?t.app.oW("requestRepaintFolder",{folder:t}):(t.hasChildren=!0,t.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:t,uv:e}))},this.type,this)},rename:function(e){o(e,this.app);var t=this;this.app.oW("requestProcessingFolder",{folder:t}),t.parent.isDirty=!0,t.name!=e?t.app.connector.sendCommandPost("RenameFolder",{NewFolderName:e},null,function(e){e.checkError()?t.app.oW("requestRepaintFolder",{folder:t}):(t.parent.isDirty=!1,t.name=e.selectSingleNode("Connector/RenamedFolder/@newName").value,t.app.oW("requestRepaintFolder",{folder:t}))},this.type,this):t.app.oW("requestRepaintFolder",{folder:t})},remove:function(){var e=this;e.deselect(),e.parent.isDirty=!0,this.app.oW("requestProcessingFolder",{folder:e}),e.app.connector.sendCommandPost("DeleteFolder",null,null,function(t){t.checkError()?e.app.oW("requestRepaintFolder",{folder:e}):e.app.oW("requestRemoveFolder",{folder:e},function(){var t=D.indexOf(e.parent.childFolders,e),n=e.index,i=e.parent,o=e.app;i.childFolders[t].mapLoadedDescendants(function(e){o.folders[e.index].isDeleted=!0,delete o.folders[e.index]}),i.childFolders.splice(t,1),o.folders[n].isDeleted=!0,delete o.folders[n],0===i.childFolders.length&&(i.childFolders=null,i.hasChildren=!1),e.releaseDomNodes&&e.releaseDomNodes(),o.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:i,uN:n,folder:e})})},this.type,this)},toString:function(){return this.getPath()}}}(),function(){var t='<a href="javascript:void(0)" class="dropdown">▼</a>';function n(e){var n=e.hasChildren?"":" nochildren";return'<li id="'+("f"+e.index)+'" role="presentation" class="openable'+n+'"><span role="presentation" class="expander"'+(e.hasChildren?' onclick="void(0)"':"")+'></span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+e.hU()+'">'+D.htmlEncode(e.name)+"</a>"+(e.isBasket?"":t)+"<ul></ul></li>"}function i(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i]);return n}function o(e,t,n){return function(e,t){for(var n in e)if(void 0!==t(e[n]))return e[n]}(e,function(e){if(e.tagName&&e.tagName.toLowerCase()==t&&!n--)return e})}function a(e){return new L(e)}H.add("foldertree",{bM:["folder"],onLoad:function(){!function(){var t=e.ld.hS("foldertree","foldertree");function r(e){this.ib=e,this.bi=e.tools.kI().cf()}t.dT.push(function(){var e=this.bn();e.hasClass("view")||(e=e.getParent()),D.mH(e)}),t.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(t){var n=this,i=this.tools.cq(t),o=0;if(t.data&&t.data.bK){var a=t.data.bK();o=a.$==n.bn().$}if(i||o){var r=D.extend({},t.data,{folder:i},!0);this.oW("beforeKeyboardNavigation",r,function(a,r){if(!a)try{var l=t.data.db();if(o&&l>=37&&l<=40){var s=n.app.folders[0];s&&this.tools.cT(s)}else{var d;if(38==l)if(t.data.preventDefault(),(d=i.liNode()).gE()){for(var c=this.tools.cq(d.cf());c.isOpened&&c.hasChildren&&c.childFolders.length;)c=c.childFolders[c.childFolders.length-1];this.tools.cT(c)}else i.isRoot||this.tools.cT(i.parent);else 39==l&&i.hasChildren?i.isOpened?i.getChildren(function(e){n.tools.cT(e[0])}):this.oW("requestExpandFolder",{folder:i}):40==l?(t.data.preventDefault(),d=i.liNode(),i.isOpened&&i.hasChildren?i.getChildren(function(e){n.tools.cT(e[0])}):d.ge()?this.tools.cT(this.tools.cq(d.dG())):!i.isRoot&&i.parent&&function(e){var t=e.liNode();t.ge()?n.tools.cT(n.tools.cq(t.dG())):e.parent&&arguments.callee(e.parent)}(i.parent)):37==l?i.isOpened?this.oW("requestExpandFolder",{folder:i,collapse:1}):!i.isRoot&&i.parent&&this.tools.cT(i.parent):46==l?(n.app.oW("requestSelectFolder",{folder:i}),n.app.execCommand("RemoveFolder")):113==l&&(n.app.oW("requestSelectFolder",{folder:i}),n.app.execCommand("RenameFolder"))}this.oW("successKeyboardNavigation",r),this.oW("afterKeyboardNavigation",r)}catch(t){throw t=e.ba(t),this.oW("failedKeyboardNavigation",r),this.oW("afterKeyboardNavigation",r),t}})}}),t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(n){if(n.data){var i=n.data.folder;if("RemoveFolder"==n.data.name){i==t.tools.ew&&(t.tools.cT(),t.bn().focus());var o=e.ld["filesview.filesview"].tools.folder,a=i==o;i.mapLoadedDescendants(function(e){o==i&&(a=!0)}),t.oW("requestSelectFolder",{folder:i.parent,expand:a})}else"RenameFolder"==n.data.name&&i==t.tools.ew&&i.focus()}})}),t.bh("RemoveFolder","requestRemoveFolder",function(t){var n=this.tools.cq(t),i=D.extend({},t.data,{folder:n},!0);this.oW("beforeRemoveFolder",i,function(t,i){var o=this;if(!t)try{n.liNode().remove(),o.oW("successRemoveFolder",i),o.oW("afterRemoveFolder",i)}catch(t){throw o.oW("failedRemoveFolder",i),o.oW("afterRemoveFolder",i),e.ba(t)}})},!1),t.bh("LoadingFolder","requestLoadingFolder",function(t){var n=this,i=this.tools.cq(t);if(i){var o=D.extend({},t.data,{folder:i},!0);this.oW("beforeLoadingFolder",o,function(t,i){if(!t){var o=i.folder;try{this.on("afterExpandFolder",function(e){if(e.data&&e.data.folder==o){e.removeListener();var t=o.childrenRootNode().getChild(0);t&&t.hasClass("loading")&&(t.remove(),this.oW("requestRepaintFolder",{folder:o}),i.step=2,n.oW("successLoadingFolder",i),n.oW("afterLoadingFolder",i))}},null,null,1),o.childrenRootNode()&&o.childrenRootNode().setHtml('<li class="loading">'+n.app.lang.FolderLoading+"</li>"),this.oW("requestProcessingFolder",{folder:o}),i.step=1,this.oW("successLoadingFolder",i)}catch(t){throw this.oW("failedLoadingFolder",i),this.oW("afterLoadingFolder",i),e.ba(t)}}})}}),t.bh("ProcessingFolder",["requestProcessingFolder"],function(t){t.result=this.oW("beforeProcessingFolder",t.data,function(t,n){var i=this;if(!t)try{var o=i.tools.cq(n.folder),a=o.aNode();a.addClass("processing"),i.oW("successProcessingFolder",n),i.oW("afterProcessingFolder",n)}catch(t){throw t=e.ba(t),i.oW("failedProcessingFolder",n),i.oW("afterProcessingFolder",n),t}})}),t.bh("RepaintFolder",["requestRepaintFolder"],function(t){this.oW("beforeRepaintFolder",t.data,function(t,n){var i=this;if(!t)try{var o=i.tools.cq(n.folder),a=o.liNode(),r=o.expanderNode(),l=o.aNode(),s=o.childrenRootNode(),d=o.name;l.getHtml()!=d&&l.setHtml(D.htmlEncode(o.name)),l.removeClass("processing"),o.hasChildren?o.hasChildren&&(s.$.hasChildNodes()?(a.addClass("closable"),a.removeClass("openable"),r.setAttribute("aria-expanded","true")):(a.addClass("openable"),a.removeClass("closable"),r.removeAttribute("aria-expanded"))):(a.removeClass("openable"),a.removeClass("closable"),a.addClass("nochildren"),r.removeAttribute("aria-expanded"),s.$.hasChildNodes()&&s.setHtml("")),i.oW("successRepaintFolder"),i.oW("afterRepaintFolder")}catch(t){throw i.oW("failedRepaintFolder"),i.oW("afterRepaintFolder"),e.ba(t)}})}),t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(e){e.data&&"RemoveFolder"==e.data.name&&t.oW("requestRepaintFolder",{folder:e.data.ip})})}),t.bh("AddFolder","requestAddFolder",function(t){var o=this,a={folders:t.data.folder?[t.data.folder]:t.data.folders,root:t.data.root};this.oW("beforeAddFolder",a,function(t,a){if(!t){var r,l,s=a.folders,d=a.root?this.tools.cq(a.root):null;try{if(d)!1===d.hasChildren?d.liNode().addClass("nochildren"):(d.liNode().removeClass("nochildren"),r=i(s,n),d.childrenRootNode().appendHtml(r));else{for(var c={},u=0;u<s.length;u++)l=s[u].parent?s[u].parent.index:-1,c[l]||(c[l]=[]),c[l].push(s[u]);for(var f in c)r=i(c[f],n),-1==f?this.tools.kI().appendHtml(r):((l=this.tools.cq(f)).liNode().removeClass("nochildren"),l.childrenRootNode().appendHtml(r));(1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(window.top[e.nd+"cation"][e.jG+"st"])!=e.lS(e.ed)||e.bF.substr(3,1)!=e.bs.substr(9*(e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))%(e.bs.length-1),1))&&setTimeout(function(){o.app.layout.ea()},100)}this.oW("successAddFolder"),this.oW("afterAddFolder")}catch(t){throw this.oW("failedAddFolder"),this.oW("afterAddFolder"),e.ba(t)}}})}),t.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(t){var n=this,i="click"==t.name,o=i&&t.data.bK();if(!this.tools.kg(t)){var a=this.tools.cq(t);if(i&&o.hasClass("dropdown"))return t.jN.oW("contextmenu",t.data),void t.cancel();if(i||"requestSelectFolder"==t.name){if(i&&!a)return;if(i&&a.aNode()&&a.aNode().$!=o.$)return;var r=D.extend({jR:1,expand:0},t.data,{folder:a},!0);this.oW("beforeSelectFolder",r,function(t,o){if(!t){var a=o.folder;try{if(this.app.aV&&(!a||a!=this.app.aV)){var r=this.app.aV.liNode();r&&r.removeClass("selected"),n.tools.hk().mc(),this.app.aV=null}return a?(i&&this.tools.cT(a),o.expand&&n.oW("requestExpandFolder",{folder:a}),a.liNode().addClass("selected"),this.app.aV=a,n.tools.hk().select(a.aNode()),o.jR&&(n.oW("requestProcessingFolder",{folder:a}),n.tools.mV(a,1),n.app.oW("requestShowFolderFiles",{folder:a,mw:o.file},function(e,t){t.ib&&t.ib.on("afterShowFolderFiles",function(e){e.data.folder==a&&(e.removeListener(),n.oW("requestRepaintFolder",{folder:a}))})})),this.oW("successSelectFolder"),this.oW("afterSelectFolder"),a):(this.oW("successSelectFolder"),void this.oW("afterSelectFolder"))}catch(t){throw this.oW("failedSelectFolder"),this.oW("afterSelectFolder"),e.ba(t)}}})}else"requestSelectFolderRefresh"==t.name&&this.oW("beforeSelectFolderRefresh",function(t){var n=this;if(!t)try{if(n.app.aV){var i=n.app.aV.aNode();i?n.tools.hk().select(i):(n.tools.hk().mc(),n.oW("failedSelectFolderRefresh"))}else n.oW("successSelectFolderRefresh");return n.oW("afterSelectFolderRefresh"),a}catch(t){throw n.oW("failedSelectFolderRefresh"),n.oW("afterSelectFolderRefresh"),e.ba(t)}})}}),t.dT.push(function(e,t){t.on("afterExpandFolder",function(){t.oW("requestSelectFolderRefresh")},null,null,999),t.on("successRemoveFolder",function(){t.oW("requestSelectFolderRefresh")}),t.on("successLoadingFolder",function(e){1==e.data.step&&t.oW("requestSelectFolderRefresh")})}),t.bh("ExpandFolder",["click","requestExpandFolder"],function(t){var n=this,i="click"==t.name,o=i&&t.data.bK();if(!this.tools.kg(t)&&(!i||o.hasClass("expander"))){var a=this.tools.cq(t),r=D.extend({collapse:0},t.data,{folder:a,hE:i},!0);this.oW("beforeExpandFolder",r,function(t,i){if(!t)try{var o=i.folder,a=o.liNode(),r=o.expanderNode();if(!o.acl.folderView)throw n.app.msgDialog("",n.app.lang.Errors[104]),"[CKFINDER] No permissions to view folder.";if(o.hasChildren){var l=i.hE&&a.hasClass("openable"),s=!i.hE&&!i.collapse&&!a.hasClass("closable"),d=!i.hE&&!i.collapse&&a.hasClass("closable"),c=!i.collapse&&i.force;l||s||c?(a.removeClass("openable"),a.addClass("closable"),r.setAttribute("aria-expanded","true"),o.getChildren(function(e){e?(n.oW("requestAddFolder",{folders:e,root:o}),o.isOpened=!0):(n.oW("requestRepaintFolder",{folder:o}),o.isOpened=!1),i.step=2,n.oW("successExpandFolder",i),n.oW("afterExpandFolder",i)}),i.step=1,n.oW("successExpandFolder",i)):i.hE||!i.hE&&i.collapse?(a.removeClass("closable"),a.addClass("openable"),r.setAttribute("aria-expanded","false"),o.childrenRootNode().setHtml(""),o.isOpened=!1,o.hm?o.getChildren(function(e){o.mapLoadedDescendants(function(e){e.releaseDomNodes()}),n.oW("successExpandFolder",i),n.oW("afterExpandFolder",i)}):(this.oW("requestRepaintFolder",{folder:o}),this.oW("failedExpandFolder"),this.oW("afterExpandFolder"))):d&&(n.oW("successExpandFolder",i),n.oW("afterExpandFolder",i))}else this.oW("failedExpandFolder"),this.oW("afterExpandFolder");return o}catch(t){throw this.oW("failedExpandFolder"),this.oW("afterExpandFolder"),e.ba(t)}})}}),t.dT.push(function(e,t){e.on("afterCommandExecDefered",function(e){e.data&&"CreateFolder"==e.data.name&&t.oW("requestExpandFolder",{folder:e.data.ip,force:1})})}),t.tools.jL=function(e,t,n){var i=this.ib,o=this.ib.app.getResourceType(e).getRootFolder(),a=o,r="/"==t?[]:t.split("/").slice(1);""===r[r.length-1]&&(r=r.slice(0,-1)),0!==r.length?(i.on("successExpandFolder",function(e){if(2==e.data.step){var t=e.data.folder;if(t==a)for(var o=r.shift(),l=0;l<t.childFolders.length;l++){var s=t.childFolders[l];if(s.name==o){if(0===r.length)return e.removeListener(),void n(s);a=s,i.oW("requestExpandFolder",{folder:s})}}}}),i.oW("requestExpandFolder",{folder:o})):n(o)},t.tools.cq=function(t){var n,i=0;if(t.data&&t.data.folder instanceof L?(t=t.data.folder,i=1):t.data&&t.data.bK?(t=t.data.bK(),i=1):t instanceof E.bi&&(i=1),i){for(var o=t;o&&!o.is("li")&&o!=this.ib.eh;)o=o.getParent();if(o&&o.is("li")){var a=o.dS();a&&(n=this.ib.app.folders[a.slice(1)])}}else"number"==typeof t?n=this.ib.app.folders[t]:"string"==typeof t?n=this.ib.app.folders[o.dS().slice(1)]:t.data&&t.data.folder instanceof e.aL.Folder?n=t.data.folder:t.data&&t.data.folders&&t.data.folders.length&&t.data.folders[0]instanceof e.aL.Folder?n=t.data.folders[0]:t instanceof e.aL.Folder&&(n=t);return n},t.tools.mV=function(e,t){var n=e.type,i=e.getPath(),o=this.ib.app.id;t=void 0===t?e.isOpened:!!t+1-1,D.setCookie(o?"CKFinder_Path_"+o:"CKFinder_Path",encodeURIComponent(n+":"+i+":"+t))},r.prototype={select:function(e){this.bi.setStyles({height:e.$.offsetHeight+"px",top:e.$.offsetTop+"px",display:"block"})},mc:function(e){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){return this.kv||(this.kv=this.ib.app.document.getById("folders_view").getChild(1)),this.kv}},t.tools.hk=function(){var e=this.ib.oE();return e.la||(e.la=new r(this.ib)),e.la},t.tools.kI=function(){return this.kW||(this.kW=a(o(this.ib.bn().getChild(1).$.childNodes,"ul"))),this.kW},t.tools.cT=function(e){var t=this;e?(t.ew?t.ew.blur():t.ib.bn().setAttribute("tabindex",-1),t.ew=e,e.focus()):(delete t.ew,t.ib.bn().setAttribute("tabindex",0))}}(),D.extend(e.aL.Folder.prototype,{liNode:function(){var e=this;if(void 0===e.iC){var t=e.app.document.getById("f"+e.index);t&&(e.iC=t)}return e.iC},aNode:function(){if(void 0===this.dM){var e=this.liNode();e&&(this.dM=a(o(e.$.childNodes,"a")))}return this.dM},expanderNode:function(){if(void 0===this.iR){var e=this.liNode();e&&(this.iR=a(o(e.$.childNodes,"span")))}return this.iR},childrenRootNode:function(){if(void 0===this.iM){var e=this.liNode();e&&(this.iM=a(o(e.$.childNodes,"ul")))}return this.iM},releaseDomNodes:function(){delete this.iC,delete this.dM,delete this.iR,delete this.iM},focus:function(){var e=this.aNode();e&&(e.setAttribute("tabindex",0),e.focus())},blur:function(){var e=this.aNode();e&&this.aNode().setAttribute("tabindex",-1)}})},bz:function(n){var i=this;n.on("themeSpace",function(e){"sidebar"==e.data.space&&(e.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+n.lang.FoldersTitle+"</h2><div class='folder_tree_wrapper wrapper'><div class='selection'></div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'></ul></div></div>")}),n.on("uiReady",function(o){n.config.showContextMenuArrow||(t="");var a=n.document.getById("folders_view");a.hX(),f.opera&&a.on("dblclick",function(e){e.data.preventDefault()});var r=e.ld.bz(n,"foldertree",i,a);n.bj&&(n.bj.lX(a),n.bj.kh(function(t,i){if("folders_view"!=t.dS()){var o=!0;if(n.aV){var a=n.aV.liNode().dS();t.dS()!==a&&t.getParent().dS()!==a||(o=!1)}o&&(n.oW("requestSelectFolder",{folder:null}),n.oW("requestSelectFolder",{folder:t}));var l=n.aV;if(l&&!n.config.readOnly){var s=l.acl,d=l.isRoot,c={createSubFolder:s.folderCreate?e.aS:e.aY,renameFolder:!d&&s.folderRename?e.aS:e.aY,removeFolder:!d&&s.folderDelete?e.aS:e.aY};return r.oW("beforeContextMenu",{bj:c,folder:l}),c}}},a))}),n.bD("foldertreeFocus",{exec:function(e){var t=e.layout.pS(),n=e.ld["foldertree.foldertree"].tools.ew;t.focus(),n&&n.focus()}})}})}(),function(){var t,n,i={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},o='<span class="dropdown">▼</span>',a='<a href="javascript:void(0)" class="dropdown">▼</a>';var r=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],l=["Node","message"];function s(t){var n,i=[e.bF.substr(6,1),e.bF.substr(8,1)];e.ed&&i[0]!=(n=e.ed.length+e.bs.indexOf(i[1]),e.bs.substr(9*n%32,1))&&function(e){l.reverse().join("");var t=e.tools.of();t.setHtml.call(t,e.qX()),e.bn().addClass("files_"+l[0])}(t)}function d(){return 1==e.bs.indexOf(e.bF.substr(1,1))%5&&window.top[e.nd+"cation"][e.jG+"st"].toLowerCase().replace(e.hf,"").replace(e.hg,"")!=e.lS(e.ed)||e.bF.substr(3,1)!=e.bs.substr(9*(e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))%(e.bs.length-1),1)}function c(e,t,n,i,o,a){for(var r={},l=0,s=t.files,d=[t.destination],f=0,p=t.files.length;f<p;f++)t.destination!=s[f].folder&&(r["files["+l+"][name]"]=s[f].name,r["files["+l+"][type]"]=s[f].folder.type,r["files["+l+"][folder]"]=s[f].folder.getPath(),r["files["+l+"][options]"]=o&&o[f]||"",l++,n&&!i&&d.push(s[f].folder));if(i||(a||(a=function(){}),a=D.override(a,function(t){return function(){for(var n=e.ld["filesview.filesview"].tools.currentFolder(),i=0,o=d.length;i<o;i++)if(d[i]==n){e.oW("requestSelectFolder",{folder:n});break}return t}})),l){var m=e.connector,g=0,v=n?"MoveFiles":"CopyFiles";m.sendCommandPost(v,null,r,function(o){var r,l,d,f=o.getErrorNumber(),p=[],v=[];for(r=0,l=s.length;r<l;r++)v.push(s[r]);if(f==m.ERROR_COPY_FAILED||f==m.ERROR_MOVE_FAILED){g=1;var b,y,w,_,F=o.selectNodes("Connector/Errors/Error"),k=parseInt(o.selectSingleNode("Connector/"+(n?"MoveFiles/@moved":"CopyFiles/@copied")).value,10),C=0,x=[];for(r=0,l=F.length;r<l;r++)for((b=F[r].getAttribute("code"))==m.ERROR_ALREADYEXIST?C=1:x.push([F[r].getAttribute("name"),e.lang.Errors[b]]),y=0,w=v.length;y<w;y++)if((_=v[y])&&_.name==F[r].getAttribute("name")&&_.folder.getPath()==F[r].getAttribute("folder")&&_.folder.type==F[r].getAttribute("type")){F[r].getAttribute("code")==m.ERROR_ALREADYEXIST&&p.push(_),delete v[y];break}for(r=0,l=x.length;r<l;r++)x[r]=e.lang.FileError.replace("%s",x[r][0]).replace("%e",x[r][1]);k||C?x.length==v.length-k&&(d=e.lang.OperationCompletedErrors+" "+e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",k)+"<br /><br />",d+=e.lang[n?"MoveFailedList":"CopyFailedList"].replace("%s",h(x)),e.msgDialog("",d,a||null)):e.msgDialog("",e.lang.Errors[n?300:301]+"<br /><br />"+h(x),a||null);var E=u(e,v,t.fileCallback);if(C&&e.cg.openDialog("moveFileExists",function(i){var o=arguments.callee;d="",x.length&&(d+=e.lang.OperationCompletedErrors+" "),d+=k?e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",k):"",x.length&&(d+=(d?"<br /><br />":"")+e.lang[n?"MoveFailedList":"CopyFailedList"].replace("%s",h(x))),d&&(d+="<br /><br />");var r=e.lang.ErrorMsg.FileExists;r=r.replace("%s",p[0]),d+="<strong>"+r+"</strong>",i.show(),i.getContentElement("tab1","msg").getElement().setHtml(d),i.on("ok",function(r){r.removeListener();var l,s=i.getContentElement("tab1","option").getValue(),d=i.getContentElement("tab1","remember").getValue();switch(s){case"autorename":case"overwrite":l=[s];break;case"skip":return void(d?a&&a():(p.shift(),p.length&&setTimeout(function(){e.cg.openDialog("moveFileExists",o)},0)))}if(d)for(var u=1,f=p.length;u<f;u++)l.push(l[0]);c(e,D.extend({files:p},t),n,1,l,a)})}),i)return}else o.checkError()&&(g=1);g?t.errorCallback&&t.errorCallback():(E=u(e,v,t.fileCallback))?(d=e.lang.OperationCompletedSuccess+"<br />"+e.lang[n?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",E),e.msgDialog("",d,a||null)):a&&a()},t.destination.type,t.destination)}else a&&a()}function u(e,t,n){for(var i,o=0,a=0,r=t.length;a<r;a++)(i=t[a])&&(o++,n&&n(e,i));return o}function h(e){return'<ul class="cke_files_list'+(e.length>3?" cke_files_list_many":"")+'"><li>'+e.join("</li><li>")+"</li></ul>"}function m(e,t){for(var n={},i=t[0].folder,o=i.getPath(),a=0,r=t.length;a<r;a++)n["files["+a+"][name]"]=t[a].name,n["files["+a+"][type]"]=i.type,n["files["+a+"][folder]"]=o,e.oW("requestProcessingFile",{file:t[a]});e.connector.sendCommandPost("DeleteFiles",null,n,function(n){var o,a,r={};if(302==n.getErrorNumber()){if(!(t.length-parseInt(n.selectSingleNode("Connector/DeleteFiles/@deleted").value,10)))return void n.checkError();var l=n.selectNodes("Connector/Errors/Error");for(o=0,a=l.length;o<a;o++)r[l[o].attributes.getNamedItem("name").value]=1;e.skippedFilesDialog(null,l)}else if(n.checkError())return;for(o=0,a=t.length;o<a;o++)r[t[o]]||(t[o].isDeleted=!0,t[o].releaseDomNodes());e.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:i})},i.type,i)}function g(t){for(var n={},i=t.attributes,o=0;o<i.length;o++)e.aL.File.prototype.tZ[i[o].name]||(n[i[o].name]=i[o].value);return n}function v(e,t){if(e){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i]));return n.join("")}}function b(e,t,n){return function(e,t){for(var n in e)if(void 0!==t(e[n]))return e[n]}(e,function(e){if(e.tagName&&e.tagName.toLowerCase()==t&&!n--)return e})}function y(e){return e?new L(e):null}H.add("filesview",{bM:["foldertree"],onLoad:function(){D.extend(e.aL.Folder.prototype,{getFiles:function(t){var n=this,i=this.app;i.connector.sendCommand("GetFiles",{},function(o){for(var a=[],r=o.selectNodes("Connector/Files/File"),l=0;l<r.length;l++){var s=r[l].attributes.getNamedItem("date").value;a.push(new e.aL.File(r[l].attributes.getNamedItem("name").value,parseInt(r[l].attributes.getNamedItem("size").value,10),!!r[l].attributes.getNamedItem("thumb")&&r[l].attributes.getNamedItem("thumb").value,s,i.lB(s.substr(6,2),s.substr(4,2),s.substr(0,4),s.substr(8,2),s.substr(10,2)),n,g(r[l])))}t&&t.call(n,a)},n.type,n)},showFiles:function(e){this.app.oW("requestShowFolderFiles",{folder:this,mw:e})}}),function(){var i=e.ld.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0,shownFiles:[]}),l="Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.",c="This is the DEMO version of CKFinder. "+l;function u(){var e=this,t=D.getCookie("CKFinder_Settings");if(!t||5!=t.length)return e.app.config.defaultViewType&&(e.data().dA=e.app.config.defaultViewType),e.app.config.defaultSortBy&&(e.data().cN=e.app.config.defaultSortBy),void 0!==e.app.config.defaultDisplayFilename&&(e.data().display.filename=e.app.config.defaultDisplayFilename),void 0!==e.app.config.defaultDisplayDate&&(e.data().display.date=e.app.config.defaultDisplayDate),void(void 0!==e.app.config.defaultDisplayFilesize&&(e.data().display.filesize=e.app.config.defaultDisplayFilesize));e.data().dA="L"==t.substr(0,1)?"list":"thumbnails",e._.nV=!0;var n=t.substr(1,1);switch(n){case"D":e.data().cN="date";break;case"S":e.data().cN="size";break;case"E":e.data().cN="extension";break;default:e.data().cN="filename"}e.data().display.filename="N"==t.substr(2,1),e.data().display.date="D"==t.substr(3,1),e.data().display.filesize="S"==t.substr(4,1)}i.qX=function(){return c},i.dT.push(u),i.dT.push(function(){D.mH(this.bn())}),i.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(t){var n=this,i=this.tools.bZ(t),o=t.data.$&&(t.data.$.ctrlKey||t.data.$.metaKey);if(i){if("dblclick"==t.name&&o){var a=this.data().nY;a&&a[a.length-1]===i||(a.push(i),i.rowNode().hasClass("selected")||this.tools.cR(i,!0)),a.length>=2&&a[a.length-1]===a[a.length-2]&&a.splice(a.length-1,1)}if(!p||f.version>=9){var r=n.data();if("click"==t.name)return r.nQ||(r.nQ=[null,null]),r.nQ[1]=r.nQ[0],void(r.nQ[0]=i.name);if("dblclick"==t.name&&r.nQ&&r.nQ[1]!=i.name)return}else if("click"==t.name)return;var l=D.extend({},t.data,{file:i,jw:"requestSelectThumbnailAction"==t.name},!0);n.oW("beforeSelectAction",l,function(t,o){if(!t)try{var a,r=!0,l=i.getUrl(),s=i.getThumbnailUrl(),d=[];if(o.jw?!(a=n.app.config.selectThumbnailActionFunction)&&n.app.config.thumbsDirectAccess&&(a=n.app.config.selectActionFunction):a=n.app.config.selectActionFunction,a){var c=o.jw?s:l,u={fileUrl:l,fileSize:i.size,fileDate:i.date,custom:i.custom};o.jw?(u.thumbnailUrl=s,n.app.config.selectThumbnailActionFunction?u.selectThumbnailActionData=n.app.config.selectThumbnailActionData:u.selectActionData=n.app.config.selectActionData):u.selectActionData=n.app.config.selectActionData;for(var h,m,g=n.tools.oO(),v=0,b=g.length;v<b;v++)h=g[v].getUrl(),d[v]={url:o.jw&&g[v].isImage()?g[v].getThumbnailUrl():g[v].getUrl(),data:D.extend({fileUrl:h,fileSize:g[v].size,fileDate:g[v].date,custom:g[v].custom},u.selectThumbnailActionData?{selectThumbnailActionData:u.selectThumbnailActionData}:{selectActionData:u.selectActionData})};switch(n.app.config.selectActionType){case"fckeditor":m=a(c);break;case"ckeditor":m=a(c,u);break;case"js":m=a.call(n.app.cg,c,u,d)}r=!1!==m}else n.app.execCommand("ViewFile");var y=n.app.document.getWindow();if(r&&n.app.cg.inPopup&&(!p&&!f.opera||y.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==y.$.top.name)){var w=y.$.top.opener;y.$.top.close(),w&&w.focus()}n.oW("successSelectAction",o),n.oW("afterSelectAction",o)}catch(t){throw t=e.ba(t),n.oW("failedSelectAction",o),n.oW("afterSelectAction",o),t}})}}),i.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(t){var n=this,i=0;if(t.data&&t.data.bK){var o=t.data.bK();i=o.$==n.bn().$}var a=this.tools.bZ(t);if(a||i){var r=D.extend({},t.data,{file:a},!0);this.oW("beforeKeyboardNavigation",r,function(o,r){var l=this;if(!o)try{var s,d,c,u=t.data.db();if(u>e.dy&&l.app.config.selectMultiple)u-=e.dy,c=1;else if(u==e.bP+65&&l.app.config.selectMultiple){n.tools.dH()&&n.tools.dH().deselect();for(var f=n.data().shownFiles,p=0;p<f.length;p++)if(!f[p].isDeleted){s=f[p].rowNode();break}do{n.tools.bZ(s).select(!0)}while((s=s.dG())&&s.ge());n.tools.cR(n.tools.bZ(s),!0),t.data.preventDefault()}if(i&&u>=37&&u<=40){for(f=n.data().shownFiles,p=0;p<f.length;p++)if(!f[p].isDeleted){l.tools.cR(f[p],c);break}}else{if("list"==n.data().dA)38==u?(t.data.preventDefault(),(s=a.rowNode()).gE()&&l.tools.cR(l.tools.bZ(s.cf()),c)):40==u&&(t.data.preventDefault(),(s=a.rowNode()).ge()&&l.tools.cR(l.tools.bZ(s.dG()),c));else if(38==u){if(t.data.preventDefault(),(s=a.rowNode()).gE()){for(d=s.cf();d&&d.$.offsetLeft!=s.$.offsetLeft;)d=d.cf();d&&l.tools.cR(l.tools.bZ(d),c)}}else if(u==("rtl"==n.app.lang.dir?37:39))t.data.preventDefault(),(s=a.rowNode()).ge()&&l.tools.cR(l.tools.bZ(s.dG()),c);else if(40==u){if(t.data.preventDefault(),(s=a.rowNode()).ge()){for(d=s.dG();d&&d.$.offsetLeft!=s.$.offsetLeft;)d=d.dG();d&&l.tools.cR(l.tools.bZ(d),c)}}else u==("rtl"==n.app.lang.dir?39:37)&&(t.data.preventDefault(),(s=a.rowNode()).gE()&&l.tools.cR(l.tools.bZ(s.cf()),c));!i&&a&&(13==u&&n.oW("requestSelectAction",{file:a}),46==u&&n.app.execCommand("DeleteFile"),113==u&&n.app.execCommand("RenameFile"))}l.oW("successKeyboardNavigation",r),l.oW("afterKeyboardNavigation",r)}catch(t){throw t=e.ba(t),l.oW("failedKeyboardNavigation",r),l.oW("afterKeyboardNavigation",r),t}})}}),i.bh("ProcessingFile",["requestProcessingFile"],function(t){var n=this.tools.bZ(t),i=D.extend({},t.data,{file:n},!0);this.oW("beforeProcessingFile",i,function(t,n){if(!t)try{var i=n.file;if(i){var o=i.rowNode();o&&o.addClass("processing"),this.on("afterProcessingFile",function(e){e.data.file==i&&(n.step=2,this.oW("successProcessingFile",n),this.oW("afterProcessingFile",n),e.removeListener())}),n.step=1,this.oW("successProcessingFile",n)}else this.oW("failedProcessingFile",n)}catch(t){throw this.oW("failedProcessingFile",n),this.oW("afterProcessingFile",n),e.ba(t)}})}),i.bh("RepaintFile",["requestRepaintFile"],function(t){var n=this.tools.bZ(t),i=D.extend({},t.data,{file:n},!0);this.oW("beforeRepaintFile",i,function(t,n){var i=this;if(!t)try{var o=n.file;if(o){var a=o.filenameNode();a&&a.getHtml()!=D.htmlEncode(o.name)&&a.setHtml(D.htmlEncode(o.name));var r=o.rowNode();r&&r.removeClass("processing"),i.oW("successRepaintFile",n)}else i.oW("failedRepaintFile",n);i.oW("afterRepaintFile",n)}catch(t){throw i.oW("failedRepaintFile",n),i.oW("afterRepaintFile",n),e.ba(t)}})}),p&&f.ie6Compat&&!f.ie7Compat&&!f.ie8&&i.bh("HoverFile",["mouseover","mouseout"],function(t){if("list"==this.data().dA){var n=this.tools.bZ(t);if(n){var i=D.extend({},t.data,{bi:n.rowNode()},!0);this.oW("beforeHoverFile",i,function(n,i){var o=this;if(!n)try{"mouseover"==t.name?(o.data().ho&&o.data().ho.removeClass("hover"),i.bi.addClass("hover"),o.data().ho=i.bi):(o.data().ho.removeClass("hover"),delete o.data().ho),o.oW("successHoverFile",i),o.oW("afterHoverFile",i)}catch(t){throw o.oW("failedHoverFile",i),o.oW("afterHoverFile",i),e.ba(t)}})}}});var h=0,m=0,w=0;function _(e,t,n,i,o,a,r,l){var s=e.aNode();if(s){var d=s.getChild([t,0]);if(d&&!d.$.style.backgroundImage){r!=m&&(w=0),m=r;var c,u,f=n(d.$);if(f<i+o+a&&f>=o){var p=e.getThumbnailUrl(!0);p&&(c=d,u=p,w+=l,setTimeout(function(){if(!(r<h-1))try{c.$.style.backgroundImage='url("'+u+'")'}catch(e){}},w))}}}}i.bh("RenderThumbnails",["requestRenderThumbnails"],function(e){var t=this;t.tq||(t.tq=!0,setTimeout(function(){var e=t.hF.shownFiles;if(e[0]){for(var n=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},i=t.eh.$.offsetHeight,o=t.eh.$.scrollTop,a=n(t.eh.$),r=t.app.config.showContextMenuArrow?1:0,l=0,s=e.length;l<s;l++)_(e[l],r,n,i,o,a,h,t.app.config.thumbnailDelay);h++,t.tq=!1}else t.tq=!1},50))}),i.bh("RenderFiles",["requestRenderFiles"],function(i){var o,a,r=this.data(),l=i.data&&(i.data.lookup||i.data.lastView&&i.data.lastView.lookup),s=i.data&&(!!i.data.ma||!!i.data.lK||!!l),d=i.data&&i.data.ma;if(c){if(i.data&&i.data.files){for(this.tools.kR(),a=0;a<i.data.files.length;a++)r.files[a]=i.data.files[a];o=r.files,s=1,this.data().folder=i.data.folder}var f=this.data().folder;if(!d||d==f){(s||!r.cP||r.pq)&&(r.cP={}),u.call(this);var p=f.type;if(this._.nV||(this.app.config["defaultViewType_"+p]&&(r.dA=this.app.config["defaultViewType_"+p]),this.app.config["defaultSortBy_"+p]&&(r.cN=this.app.config["defaultSortBy_"+p]),void 0!==this.app.config["defaultDisplayFilename_"+p]&&(r.display.filename=this.app.config["defaultDisplayFilename_"+p]),void 0!==this.app.config["defaultDisplayDate_"+p]&&(r.display.date=this.app.config["defaultDisplayDate_"+p]),void 0!==this.app.config["defaultDisplayFilesize_"+p]&&(r.display.filesize=this.app.config["defaultDisplayFilesize_"+p])),r.files.length||l||r._fullSet)if("date"!=r.cN||!r.cP.date||l||r._fullSet)if("size"!=r.cN||!r.cP.size||l||r._fullSet)if("extension"!=r.cN||!r.cP.extension||l||r._fullSet)if("filename"!=r.cN||!r.cP.filename||l||r._fullSet){e.log("[FILES VIEW] Sorting files");var h=r.files,m=l?new RegExp(l.replace(/[-/ \\^$* + ?.()|[\]{}]/g,"\\$&"),"i"):null;r.lookup=l,o=[];for(a=0;a<h.length;a++)if(!h[a].isDeleted){var g=o.length;h[a].index=g,o[g]=h[a]}for(r._fullSet=l?[]:void 0,r.files.length=0,a=0;a<o.length;a++)r.files[a]=o[a];for(o=[],a=0;a<r.files.length;a++)o[a]=r.files[a],o[a].releaseDomNodes();var v=function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n<i?-1:n>i?1:0};"date"==r.cN?(o.sort(function(e,t){return e.date>t.date?-1:e.date<t.date?1:0}),r.cP.date=o):"size"==r.cN?(o.sort(function(e,t){return e.size>t.size?-1:e.size<t.size?1:0}),r.cP.size=o):"extension"==r.cN?(o.sort(function(e,t){return e.ext>t.ext?1:e.ext<t.ext?-1:v(e,t)}),r.cP.extension=o):(o.sort(v),r.cP.filename=o)}else o=r.cP.filename;else o=r.cP.extension;else o=r.cP.size;else o=r.cP.date;else o=r.files;if(l)for(h=o,o=[],a=0;a<h.length;a++)!h[a].isDeleted&&m.test(h[a].name)&&o.push(h[a]);var b=D.extend({eu:1,dA:this.data().dA,display:this.data().display},i.data,{files:o},!0);if(this.oW("beforeRenderFiles",b,function(i,o){if(!i&&"t"==c.charAt(8)){n=e.bF.substr(2,1),t=e.bF.substr(7,1);try{for(var a=0;a<o.files.length;a++)o.files[a].releaseDomNodes();this.data().shownFiles=o.files,this.tools.cR(),this.oW("requestAddFiles",o,function(e){e||(r.hA=o.dA)}),this.oW("successRenderFiles",o),this.oW("afterRenderFiles",o)}catch(t){throw this.oW("failedRenderFiles",o),this.oW("afterRenderFiles",o),e.ba(t)}}}),this._.initialized)"thumbnails"==this.hF.dA&&this.oW("requestRenderThumbnails");else{var y=this.eh,w=this;y.on("scroll",function(){"thumbnails"==w.hF.dA&&this.oW("requestRenderThumbnails")},this),this.app.on("afterRepaintLayout",function(){"thumbnails"==w.hF.dA&&setTimeout(function(){w.oW("requestRenderThumbnails")},0)}),this._.initialized=!0}}}}),i.dT.push(function(e,t){t=this,e.on("afterCommandExecDefered",function(e){if(e.data){var n,i=e.data.name;if("RenameFile"==i){var o=e.data.file,a=t.tools.oO().length>1;if(n=o&&o.folder,t.tools.currentFolder()!=n)return;t.oW("requestRenderFiles",{folder:n,lK:1},function(n){n||(o.deselect(!0),t.oW("requestSelectFile",{file:e.data.file,multiple:a},function(){n||o.focus(a)}))})}else if("RemoveFiles"==i){if(n=e.data.folder,t.tools.currentFolder()!=n)return;t.tools.cR(),t.bn().focus(),t.oW("requestRenderFiles",{folder:n,lK:1})}}})}),i.bh("SelectFile",["click","requestSelectFile"],function(t){var n=this.tools.bZ(t),i="click"==t.name,o=t.data&&t.data.multiple&&this.app.config.selectMultiple;if(c.length>>4){if(i&&t.data.db()>=e.bP&&(t.data.preventDefault(),o=(t.data.$.ctrlKey||t.data.$.metaKey)&&this.app.config.selectMultiple),i&&t.data.bK().hasClass("dropdown"))return t.jN.oW("contextmenu",t.data),void t.cancel();var a=D.extend({},t.data,{file:n},!0);this.oW("beforeSelectFile",a,function(t,n){var a=this;if(!t){var r=n.file;try{if(a.tools.dH()&&!o){for(var l=a.tools.oO(),s=0;s<l.length;s++)l[s].rowNode()&&l[s].rowNode().removeClass("selected");a.data().nY=[]}if(r&&o&&r.rowNode().hasClass("selected")&&a.tools.dH()){for(var l=a.tools.oO(),d=[],s=0;s<l.length;s++)l[s].isSameFile(r)?l[s].rowNode().removeClass("selected"):(l[s].rowNode().hasClass("selected")||l[s].rowNode().addClass("selected"),d.push(l[s]));a.data().nY=d,a.data().cG.isSameFile(r)&&(a.data().cG=a.data().nY[d.length-1]),i&&a.tools.cR(a.tools.dH(),!0,d.length>=1)}else r?(r.rowNode().addClass("selected"),a.data().nY||(a.data().nY=[]),a.data().cG=r,a.data().nY.push(r),i&&a.tools.cR(r,o,o)):a.tools.dH()&&!o&&(a.data().cG=null,a.data().nY=[],a.tools.cR());a.oW("successSelectFile",n),a.oW("afterSelectFile",n)}catch(t){throw a.oW("failedSelectFile",n),a.oW("afterSelectFile",n),e.ba(t)}}})}}),i.bh("AddFiles",["requestAddFiles"],function(i){var a=D.extend({eu:0,view:"thumbnails",mj:null},i.data,{files:i.data.file?[i.data.file]:i.data.files},!0);this.oW("beforeAddFiles",a,function(i,a){if(!i)try{var l,s,u=this,f=u.bn(),h=u.data().hA,m=0;f.removeClass("files_message"),d()&&(a.files.length&&(a.mj=c),m=1);var g=e.bs.indexOf(n),b=e.bs.indexOf(e.bF.substr(0,1)),y=g-b;if("list"==a.dA){this.data().kQ||(this.data().kQ=D.bind(this.tools.qc,this.tools)),f.removeClass("files_thumbnails"),f.addClass("files_details"),l=v(a.files,this.data().kQ),s=this.tools.fF();var w=this.tools.kj();if(h&&"list"!=h&&this.tools.lP().setHtml(""),p){if(w&&h&&"list"==h&&!a.eu&&(l=w.getHtml()+l),s&&s.remove(),l){var _=r[0]+this.tools.lz()+r[1]+l+r[2]+r[3];f.appendHtml(_)}this.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])}else l?a.eu?this.tools.fF().setHtml(this.tools.lz()+r[1]+l+r[2]):w.appendHtml(l):s.setHtml("")}else{f.removeClass("files_details"),f.addClass("files_thumbnails");var F=this.data().display;if(l=v(a.files,function(e){var t="r"+e.index,n=[];return n.push('<a id="',t),n.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',D.htmlEncode(e.name).replace('"',"&quot;"),'" aria-labelledby="',t),n.push('_label" aria-describedby="',t,'_details" style="width: '+(u.app.config.thumbsWidth+10)+'px">'),n.push(o,'<div class="image"><div role="img" style="width: '+u.app.config.thumbsWidth+"px; height: "+u.app.config.thumbsHeight+'px"></div></div>'),F.filename&&n.push('<h5 id="',t,'_label">',D.htmlEncode(e.name),"</h5>"),n.push('<span id="'+t+'_details" class="details" role="list presentation">'),F.date&&n.push('<span role="listitem" class="extra">',e.dateF,"</span>"),F.filesize&&n.push('<span role="listitem" aria-label="Size">',D.formatSize(e.size,u.app.lang,!0),"</span>"),n.push("</span></a>"),n.join("")}),s=this.tools.lP(),h&&"list"==h){var k=this.tools.fF();k&&p?k.remove():k&&k.setHtml("")}a.eu?s.setHtml(l):s.appendHtml(l)}0>y&&(y=g-b+33),m||t&&!(e.bs.indexOf(t)%(y?8:33)<7)||(a.mj="Product license has expired. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.",m=1),(a.eu&&!l||m)&&a.mj&&(f.addClass("files_message"),this.tools.of().setHtml(a.mj)),t||m||s.setHtml(""),this.oW("successAddFiles"),this.oW("afterAddFiles")}catch(t){throw this.oW("failedAddFiles"),this.oW("afterAddFiles"),e.ba(t)}})}),i.bh("ShowFolderFiles",["requestShowFolderFiles"],function(t){var n=this,i=e.ld.bX["foldertree.foldertree"].tools.cq(t),o=D.extend({},t.data,{folder:i},!0);this.oW("beforeShowFolderFiles",o,function(i,o){if(!i){this.tools.dH()&&this.oW("requestSelectFile"),this.app.cS("refresh").bR(e.aY);try{var a=o.folder;if(!a.acl.folderView)throw n.app.msgDialog("",n.app.lang.Errors[103]),"[CKFINDER] No permissions to view folder.";t.data.ib=this,this.data().folder=a,n.tools.kR();var r=t.data.lookup?t.data.lookup:null;this.oW("requestRenderFiles",{eu:1,mj:n.app.lang.FilesLoading}),this.app.connector.sendCommand("GetFiles",void 0,function(t){if(n.app.cS("refresh").bR(e.aS),n.app.aV!=a)return n.oW("failedShowFolderFiles",o),void n.oW("afterShowFolderFiles",o);if(!(t.checkError()||d.toString().length<200)){n.tools.kR();for(var i,l=t.selectNodes("Connector/Files/File"),c=0;c<l.length;c++){var u=l[c].attributes.getNamedItem("date").value,p=l[c].attributes.getNamedItem("name").value,h=n.tools.rg(new e.aL.File(p,parseInt(l[c].attributes.getNamedItem("size").value,10),!!l[c].attributes.getNamedItem("thumb")&&l[c].attributes.getNamedItem("thumb").value,u,n.app.lB(u.substr(6,2),u.substr(4,2),u.substr(0,4),u.substr(8,2),u.substr(10,2)),a,g(l[c])));o.mw&&p==o.mw&&(i=h)}n.oW("requestRenderFiles",{mj:n.app.lang.FilesEmpty,lookup:r}),i&&(n.app.oW("requestSelectFile",{file:i,scrollTo:1}),setTimeout(function(){i.aNode().$.scrollIntoView(1),n.app.layout.mB().getFirst().$.scrollIntoView(0)},f.opera?500:100)),n.oW("successShowFolderFiles",o),n.oW("afterShowFolderFiles",o),s(n)}},a.type,a)}catch(t){throw this.oW("failedShowFolderFiles",o),this.oW("afterShowFolderFiles",o),e.ba(t)}}})}),i.tools.bZ=function(t){var n,i=0;if(t.data&&t.data.file instanceof L?(t=t.data.file,i=1):t.data&&t.data.bK?(t=t.data.bK(),i=1):t instanceof E.bi&&(i=1),i){for(var o=t;o&&(!o.is("a")||!o.hasAttribute("id"))&&!o.is("tr")&&o!=this.ib.eh;)o=o.getParent();if(o){var a=o.dS();a&&(o.is("a")||o.is("tr"))&&(n=this.ib.data().files[o.dS().slice(1)])}}else"number"==typeof t?n=this.ib.data().files[t]:"String"==typeof t?n=this.ib.data().files[o.dS().slice(1)]:t.data&&t.data.file&&t.data.file instanceof e.aL.File?n=t.data.file:t.data&&t.data.files&&t.data.files.length&&t.data.files[0]&&t.data.files[0]instanceof e.aL.File?n=t.data.files[0]:t instanceof e.aL.File&&(n=t);return n},i.tools.kR=function(){var e=this.ib.data();e.files.length=0,e.cP={}},i.tools.oR=function(e,t){e.thumb;var n=e.name,i=this.ib.app,o=i.config.jh||"gif",a=n.match(i.rQ.jf);return a&&(a=a[0])&&i.rQ.jh.test(a)?i.fh+"images/icons/"+(t?"32":"16")+"/"+a.toLowerCase()+"."+o:i.fh+"images/icons/"+(t?"32":"16")+"/default.icon."+o},i.tools.rg=function(e){var t=this.ib.data().files,n=t.push(e);return e.index=--n,e.app=this.ib.app,e},i.tools.lP=function(e){return this.jl||(this.jl=this.ib.bn().getChild(1)),this.jl},i.tools.kj=function(e){if(void 0===this.iJ){var t=this.fF();this.iJ=t?y(b(t.$.childNodes,"tbody")):null}return this.iJ},i.tools.sn=function(e){if(void 0===this.kT){var t=this.fF();this.kT=t?y(b(t.$.childNodes,"thead")):null}return this.kT},i.tools.fF=function(e){return void 0===this.iO&&(this.iO=y(b(this.ib.bn().$.childNodes,"table"))),this.iO},i.tools.of=function(e){return this.iF||(this.iF=this.ib.bn().getChild(0)),this.iF},i.tools.releaseDomNodes=function(e){this.jl=void 0,this.iO=void 0,this.iJ=void 0,this.iF=void 0},i.tools.lz=function(){var e=this.ib.data().display,t=[];t.push('<td class="name">'+this.ib.app.lang.SetDisplayName+"</td>"),e.filesize&&t.push("<td>"+this.ib.app.lang.SetDisplaySize+"</td>"),e.date&&t.push("<td>"+this.ib.app.lang.SetDisplayDate+"</td>");var n=t.length-1;return t[n]=n?'<td class="last">'+t[n].substr(4):'<td class="last '+t[n].substr(11),"<thead><tr><td>&nbsp;</td>"+t.join("")+"</tr></thead>"},i.tools.qc=function(e){var t=this.oR(e),n="r"+e.index,i=this.ib.data().display,o=[];o.push('<td class="name">'+a+'<a tabindex="-1">'+(i.filename?D.htmlEncode(e.name):"")+"</a></td>"),i.filesize&&o.push("<td>"+D.formatSize(e.size,this.ib.app.lang,!0)+"</td>"),i.date&&o.push("<td>"+e.dateF+"</td>");var r=o.length-1;return o[r]=r?'<td class="last">'+o[r].substr(4):'<td class="last '+o[r].substr(11),'<tr id="'+n+'"><td class="image"><img src="'+t+'" alt="img alt" /></td>'+o.join("")+"</tr>"},i.tools.dH=function(){var e=this.ib.data();if(e.cG)return e.cG.isDeleted?e.cG=null:e.cG},i.tools.oO=function(e){var t=this.ib.data(),n=[];if(t.nY){for(var i=0;i<t.nY.length;i++)t.nY[i]&&!t.nY[i].isDeleted&&n.push(t.nY[i]);if(e){var o=n,a={},n=[];for(i=0;i<o.length;i++)o[i].name in a||(n.push(o[i]),a[o[i].name]=1)}}return t.nY=n},i.tools.currentFolder=function(){return this.ib.data().folder},i.tools.cR=function(e,t,n){var i=this;e?(i.iS?i.iS.blur():i.ib.bn().setAttribute("tabindex",-1),i.iS=e,e.focus(t,n)):(delete i.iS,i.ib.bn().setAttribute("tabindex",0))},i.tools.downloadFile=function(e,t){var n=e.getById("downloadIframe");n||((n=e.createElement("iframe")).setAttribute("id","downloadIframe"),n.setStyle("display","none"),e.bH().append(n)),n.setAttribute("src",t)}}(),e.dialog.add("moveFileExists",function(e){return{title:e.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:f.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:e.lang.common.makeDecision,default:"autorename",items:[[e.lang.FileAutorename,"autorename"],[e.lang.FileOverwrite,"overwrite"],[e.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:e.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(t){var n=this;t.rQ.jh=new RegExp("^("+t.config.fileIcons+")$","i"),t.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i,t.rQ.jf=i.fX,t.on("themeSpace",function(e){if("mainMiddle"==e.data.space){var t="";p||(t=r[0]+r[3]),e.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+t+"</div>"}}),t.on("uiReady",function(i){t.config.showContextMenuArrow||(o="",a="");var r=t.document.getById("files_view");r.hX();var l=e.ld.bz(t,"filesview",n,r);t.config.selectMultiple&&r.on("click",function(e){if(e.data.$.shiftKey){var t=l.tools.dH(),n=l.tools.bZ(e),i=!t;if(n){t&&(t.rowNode().$.offsetTop<n.rowNode().$.offsetTop?i=1:"list"!=l.data().dA&&t.rowNode().$.offsetTop==n.rowNode().$.offsetTop&&(i=t.rowNode().$.offsetLeft<n.rowNode().$.offsetLeft));for(var o,a=n.rowNode();(a=i?a.cf():a.dG())&&(o=l.tools.bZ(a),!t||!o.isSameFile(t));)o.select(!0);l.tools.cR(n,!0),e.cancel(),e.data.preventDefault()}}},null,null,1),t.bD("ViewFile",{exec:function(e){var t=l.data().cG;if(t){if(!0===e.oW("launchGallery",{selected:t,files:l.data().files}).bx)return;var n=.8*window.screen.width,i=.7*window.screen.height,o="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";o+=",width="+n,o+=",height="+i,o+=",left="+(window.screen.width-n)/2,o+=",top="+(window.screen.height-i)/2,(e.cg.inPopup?e.document.getWindow().$.parent:window).open(t.getUrl(),"_blank",o)||e.msgDialog("",e.lang.ErrorMsg.PopupBlockView)}}}),t.bD("DownloadFile",{exec:function(e){var t,n=l.data().cG;n&&(t=e.config.directDownload?n.getUrl()+"?download":e.connector.composeUrl("DownloadFile",{FileName:n.name},n.folder.type,n.folder),l.tools.downloadFile(e.document,t))}}),t.bD("RenameFile",{readOnly:!1,exec:function(t){var n=function(n,o){try{i.rename(o)}catch(n){if(!(n instanceof e.dU))throw n;t.msgDialog("",n.message)}},i=l.data().cG;i&&i.folder.acl.fileRename&&t.hs(t.lang.RenameDlgTitle,t.lang.FileRename,i.name,function(e){(e=D.trim(e))&&(e.match(t.rQ.jf)[0].toLowerCase()!=i.ext.toLowerCase()?t.fe("",t.lang.FileRenameExt,function(){n(0,e)}):n(0,e))})}}),t.bD("DeleteFile",{readOnly:!1,exec:function(e){var t=l.tools.oO(!0);t&&0!=t.length&&t[0].folder.acl.fileDelete&&e.fe("",1==t.length?e.lang.FileDelete.replace("%1",D.escapeHtml(t[0].name)):e.lang.FilesDelete.replace("%1",t.length),function(){m(e,t)})}}),t.bD("copyFilesToFolder",{readOnly:!1,exec:function(e,t){t.files||(t.files=l.tools.oO()),t.files.length&&t.destination&&t.destination.acl.fileUpload&&c(e,t,0,0,[],t.callback)}}),t.bD("moveFilesToFolder",{readOnly:!1,exec:function(e,t){t.files||(t.files=l.tools.oO()),t.files.length&&t.destination&&t.destination.acl.fileUpload&&t.files[0].folder.acl.fileDelete&&c(e,t,1,0,[],t.callback)}}),t.eU&&(t.dZ("file0",90),t.dZ("file1",100),t.dZ("file2",110),t.dZ("file3",120),t.eU({selectFile:{label:t.lang.Select,onClick:function(){var e=t.ld["filesview.filesview"],n=e.tools.dH();n&&e.oW("requestSelectAction",{file:n})},group:"file0"},selectFileThumbnail:{label:t.lang.SelectThumbnail,onClick:function(){var e=t.ld["filesview.filesview"],n=e.tools.dH();n&&e.oW("requestSelectThumbnailAction",{file:n})},group:"file0"},viewFile:{label:t.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:t.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:t.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:t.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:t.lang.DeleteFiles,command:"DeleteFile",group:"file3"}})),t.bj&&(t.bj.lX(r),t.bj.kh(function(n,i){var o=l.tools.bZ(n);if(o){o.rowNode().hasClass("selected")?l.data().cG=o:t.oW("requestSelectFile",{file:o});var a=o.folder.acl,r={viewFile:a.fileView?e.aS:e.aY,downloadFile:a.fileView?e.aS:e.aY};return t.config.readOnly||(r.renameFile=a.fileRename?e.aS:e.aY,r[l.tools.oO().length>1?"deleteFiles":"deleteFile"]=a.fileDelete?e.aS:e.aY),t.config.selectActionFunction&&(r.selectFile=a.fileView?e.aS:e.aY),o.isImage()&&!t.config.disableThumbnailSelection&&(t.config.selectThumbnailActionFunction||t.config.thumbsDirectAccess&&t.config.selectActionFunction)&&(r.selectFileThumbnail=a.fileView?e.aS:e.aY),l.oW("beforeContextMenu",{bj:r,file:o,folder:l.data().folder}),r}},r))}),t.bD("filesviewFocus",{exec:function(e){var t=e.layout.pn(),n=e.ld["filesview.filesview"].tools.dH();t.focus(),n&&n.focus()}})}}),e.aL.File=function(e,t,n,o,a,r,l){var s=this;s.index=null,s.app=null,s.name=e,s.ext=e.match(i.fX)[0],s.nameL=e.toLowerCase(),s.size=t,s.thumb=n,s.date=o,s.dateF=a,s.folder=r,s.isDeleted=!1,s.custom=l},e.aL.File.prototype={tZ:{date:1,name:1,size:1,thumb:1},rename:function(t){!function(t,n){if(!t||0===t.length)throw new e.dU("name_empty",n.lang.ErrorMsg.FileEmpty);if(i.iz.test(t))throw new e.dU("name_invalid_chars",n.lang.ErrorMsg.FileInvChar)}(t,this.app);var n=this;n.name!=t?(n.app.oW("requestProcessingFile",{file:n}),n.app.connector.sendCommandPost("RenameFile",{fileName:n.name,newFileName:t},null,function(e){e.checkError()?n.app.oW("requestRepaintFile",{file:n}):(n.name=e.selectSingleNode("Connector/RenamedFile/@newName").value,n.nameL=n.name.toLowerCase(),n.ext=n.name.match(i.fX)[0],n.thumb=0,n.app.oW("afterCommandExecDefered",{name:"RenameFile",file:n}))},n.folder.type,n.folder)):n.app.oW("afterCommandExecDefered",{name:"RenameFile",file:n})},remove:function(){m(this.app,[this])},select:function(e){this.app.oW("requestSelectFile",{file:this,multiple:e})},deselect:function(e){e?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(e){return(this.name==e.name||this.index==e.index)&&this.folder.getPath()==e.folder.getPath()&&this.folder.type==e.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var e=this;return e.je||(e.je=e.app.document.getById("r"+e.index)),e.je},getThumbnailUrl:function(e){var t=this,n=t.thumb,i=t.name,o=t.app,a=i.match(o.rQ.jf),r=o.config.jh||"gif";if(a&&(a=a[0])){if(o.config.thumbsEnabled&&o.rQ.rO.test(a)){var l=encodeURIComponent(t.date+"-"+t.size);if(n&&o.config.thumbsDirectAccess)return o.config.thumbsUrl+t.folder.type+t.folder.getPath()+encodeURIComponent(i)+(e?"?hash="+o.getResourceType(t.folder.type).hash+"&fileHash="+l:"");var s={FileName:i};return e&&(s.fileHash=l),o.connector.composeUrl("Thumbnail",s,t.folder.type,t.folder)}if(o.config.useNativeIcons&&f.gecko)return"moz-icon://."+a.toLowerCase()+"?size=32";if(o.rQ.jh.test(a))return o.fh+"images/icons/32/"+a.toLowerCase()+"."+r}return o.fh+"images/icons/32/default.icon."+r},filenameNode:function(){var e=this;if(void 0===e.ht){var t=e.rowNode();t&&(t.is("a")?e.ht=y(b(t.$.childNodes,"h5")):e.ht=y(b(e.aNode().$.childNodes,"h5")))}return e.ht},aNode:function(){var e=this;if(void 0===e.dM){var t=e.rowNode();if(t)if(t.is("a"))e.dM=t;else{var n=b(t.$.childNodes,"td",1);e.dM=y(b(n.childNodes,"a"))}}return e.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=void 0,this.dM=void 0,this.ht=void 0},focus:function(e,t){!t&&this.select(e);var n=this.focusNode();n.setAttribute("tabindex",0),n.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}}(),function(){function t(e,t){var n=[];if(!t)return e;for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function n(e){var t=this,n=t.getDialog();return n.getParentApi()._.rb=t,!!n.getContentElement(t.for[0],t.for[1]).getInputElement().$.value&&!!n.getContentElement(t.for[0],t.for[1]).vy()}function i(e,o,a,r){var l,s,d,c,u;for(var f in r)if("hbox"!=(l=r[f]).type&&"vbox"!=l.type||i(e,o,a,l.children),l.filebrowser&&"fileButton"==l.type&&l.for){if("string"==typeof l.filebrowser){var p={target:l.filebrowser};l.filebrowser=p}l.filebrowser.action="QuickUpload";var h=l.filebrowser.url;if(h)l.filebrowser.url=h,l.hidden=!1,s=e,d=a.vz(l.for[0]).eB(l.for[1]),c=l.filebrowser,u=void 0,u=c.params||{},c.url&&(u.CKFinderFuncNum=s._.ra,u.langCode||(u.langCode=s.langCode),d.action=t(c.url,u),d.filebrowser=c);else{var m=l.onShow;l.onShow=function(n){var i=n.jN;if(m&&!1===m.call(i,n))return!1;var o=e.getSelectedFolder();if(o&&(h=o.getUploadUrl()),!h)return!1;var a=l.filebrowser.params||{};a.CKFinderFuncNum=e._.ra,a.langCode||(a.langCode=e.langCode),h=t(h,a);var r=this.getDialog().getContentElement(l.for[0],l.for[1]);return!!r&&(r._.dg.action=h,r.reset(),!0)}}var g=l.onClick;l.onClick=function(e){var t=e.jN;return(!g||!1!==g.call(t,e))&&n.call(t,e)}}}function o(e,t,n){if(-1!==n.indexOf(";")){for(var i=n.split(";"),a=0;a<i.length;a++)if(o(e,t,i[a]))return!0;return!1}var r=e.vz(t).eB(n).filebrowser;return r&&r.url}function a(e,t){var n=this,i=n._.rb.getDialog(),o=n._.rb.for,a=n._.rb.filebrowser.onSelect;o&&i.getContentElement(o[0],o[1]).reset(),"function"==typeof t&&!1===t.call(n._.rb)||a&&!1===a.call(n._.rb,e,t)||("string"==typeof t&&t&&alert(t),e&&function(e,t){var n=t.getDialog(),i=t.filebrowser.target||"";if(i){var o=i.split(":"),a=n.getContentElement(o[0],o[1]);a&&(a.setValue(e),n.selectPage(o[0]))}}(e,n._.rb))}H.add("filebrowser",{bz:function(e){e.cg._.ra=D.addFunction(a,e.cg)}}),e.on("dialogDefinition",function(e){var t,n=e.data.dg;for(var a in n.contents)t=n.contents[a],i(e.application.cg,e.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!o(n,t.id,t.filebrowser))})}(),H.add("button",{eK:function(t){t.bY.kd(e.UI_BUTTON,we.button.dq)}}),CKFinder._.UI_BUTTON=e.UI_BUTTON=1,we.button=function(e){D.extend(this,e,{title:e.label,className:e.className||e.command&&"cke_button_"+e.command||"",click:e.click||function(t){e.command?t.execCommand(e.command):e.onClick&&e.onClick(t)}}),this._={}},we.button.dq={create:function(e){return new we.button(e)}},we.button.prototype={canGroup:!0,er:function(t,n){var i=f,o=this._.id="cke_"+D.getNextNumber();this._.app=t;var a={id:o,button:this,app:t,focus:function(){var e=t.document.getById(o);e&&e.focus()},lc:function(){this.button.click(t)}},r=D.addFunction(a.lc,a),l=we.button._.instances.push(a)-1,s="",d=this.command;if(this.iH?t.on("mode",function(){this.bR(this.iH[t.mode]?e.aS:e.aY)},this):d&&(d=t.cS(d))&&(d.on("bu",function(){this.bR(d.bu)},this),s+="cke_"+(d.bu==e.eV?"on":d.bu==e.aY?"disabled":"off")),d||(s+="cke_off"),this.className&&(s+=" "+this.className),n.push('<span class="cke_button">','<a id="',o,'" class="',s,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+o+'_label"'+(this.vZ?' aria-haspopup="true"':"")),(i.opera||i.gecko&&i.mac)&&n.push(' onkeypress="return false;"'),i.gecko&&n.push(' onblur="this.style.cssText = this.style.cssText;"'),n.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',l,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',l,', event);" onclick="window.parent.CKFinder._.callFunction(',r,', this); return false;">'),!1!==this.icon&&n.push('<span class="cke_icon"'),this.icon){var c=-16*(this.rD||0);n.push(' style="background-image:url(',e.getUrl(this.icon),");background-position:0 "+c+'px;"')}return!1!==this.icon&&n.push("></span>"),n.push('<span id="',o,'_label" class="cke_label">',this.label,"</span>"),this.vZ&&n.push('<span class="cke_buttonarrow"></span>'),n.push("</a>","</span>"),this.onRender&&this.onRender(),a},bR:function(t){var n=this;if(n._.bu==t)return!1;n._.bu=t;var i=n._.app.document.getById(n._.id);if(i){i.bR(t),t==e.aY?i.setAttribute("aria-disabled",!0):i.removeAttribute("aria-disabled"),t==e.eV?i.setAttribute("aria-pressed",!0):i.removeAttribute("aria-pressed");var o=n.title,a=n._.app.lang.common.unavailable,r=i.getChild(1);return t==e.aY&&(o=a.replace("%1",n.title)),r.setHtml(o),!0}return!1}},we.button._={instances:[],keydown:function(e,t){var n=we.button._.instances[e];if(n.onkey)return t=new E.event(t),!1!==n.onkey(n,t.db())},focus:function(e,t){var n,i=we.button._.instances[e];return i.onfocus&&(n=!1!==i.onfocus(i,new E.event(t))),f.gecko&&f.version<10900&&t.preventBubble(),n}},CKFinder._.uiButtonKeydown=we.button._.keydown,CKFinder._.uiButtonFocus=we.button._.focus,we.prototype.qW=function(t,n){this.add(t,e.UI_BUTTON,n)},H.add("container",{bM:[],bz:function(e){var t=this;e.on("themeAvailable",function(){t.pV(e)})},pV:function(t){var n=t.config.height,i=t.config.tabIndex||t.element.getAttribute("tabindex")||0;isNaN(n)||(n=Math.max(n,200),n+="px");var o="",a=t.config.width;a&&(isNaN(a)||(a+="px"),o+="width: "+a+";");var r=t.config.className?'class="'+t.config.className+'"':"",l=f.isCustomDomain(),s="document.open();"+(l?'document.domain="'+window.document.domain+'";':"")+"document.close();",d=L.kE('<iframe style="'+o+"height:"+n+'"'+r+' frameBorder="0" src="'+(p?"javascript:void(function(){"+encodeURIComponent(s)+"}())":"")+'" tabIndex="'+i+'" allowTransparency="true"></iframe>',t.element.getDocument());function c(n){n&&n.removeListener();var i=d.getFrameDocument().$;if(i.open(),l&&(i.domain=document.domain),t.document=new T(i),t.theme.dQ(t),i.close(),(i.defaultView||i.parentWindow).CKFinder=CKFinder,e.skins.load(t,"application",function(){var e=t.dJ;e&&e.oA(t.document)}),!d.isVisible()&&p&&f.version>=8)var o=setInterval(function(){d.isVisible()&&(t.layout.ea(!0),o=clearInterval(o))},500)}p&&f.version>=9&&t.cg.inPopup&&(t.element.getDocument().getWindow().$.ckfinder=function(){t.element.getDocument().getWindow().$.ckfinder=void 0,c()}),d.on("load",c);var u=t.lang.appTitle.replace("%1",t.name);f.gecko?(d.on("load",function(e){e.removeListener()}),t.element.setAttributes({role:"region",title:u}),d.setAttributes({role:"region",title:" "})):f.webkit?(d.setAttribute("title",u),d.setAttribute("name",u)):p&&d.appendTo(t.element),p||t.element.append(d),t.container=d}}),e.application.prototype.focus=function(){var e=this;if(e._.oO&&e._.oO.length>1){e.oW("requestSelectFile");for(var t=0,n=e._.oO.length;t<n;t++)e.oW("requestSelectFile",{file:e._.oO[t],multiple:!0})}(e._.activeElement?L.eB(e._.activeElement):e.document.getWindow()).focus()},H.add("contextmenu",{bM:["menu"],eK:function(e){e.bj=new H.bj(e),e.bD("bj",{exec:function(){var t,n,i,o=e.layout.pn();if(o.hasClass("focus_inside")){var a=(i=e.ld["filesview.filesview"]).tools.dH();if(a)return n=(t=a.dM).ir(),e.bj.show(e.document.bH().getParent(),null,n.x+5,n.y+5,t,o),e._.activeElement=t,void(e._.oO=i.tools.oO())}if((o=e.layout.pS()).hasClass("focus_inside")){var r=(i=e.ld["foldertree.foldertree"]).tools.ew;if(r)return n=(t=r.dM).ir(),e.bj.show(e.document.bH().getParent(),null,n.x+5,n.y+5,t,o),e._.activeElement=t,void(e._.oO=[])}}})}}),H.bj=D.createClass({$:function(e){this.id="cke_"+D.getNextNumber(),this.app=e,this._.dF=[],this._.vx=D.addFunction(function(t){this._.panel.hide(),e.focus&&e.focus()},this)},_:{onMenu:function(t,n,i,o,a,r){var l=this._.menu,s=this.app;l?(l.hide(),l.ih()):(l=this._.menu=new e.menu(s)).onClick=D.bind(function(e){l.hide(),p&&s.focus&&s.focus(),e.onClick?e.onClick():e.command&&s.execCommand(e.command)},this),l.onEscape=function(){s.focus&&s.focus(),a.focus&&a.focus(),s._.activeElement=null};var d=this._.dF;l.onHide=D.bind(function(){l.onHide=null,this.onHide&&this.onHide()},this);for(var c=0;c<d.length;c++){var u=d[c];if(!u[1]||u[1].$==r.$){var f=d[c][0](a);if(f)for(var h in f){var m=this.app.mh(h);m&&(m.bu=f[h],l.add(m))}}}l.items.length&&l.show(t,n||("rtl"==s.lang.dir?2:1),i,o)}},ej:{lX:function(t,n){var i;!f.opera||"oncontextmenu"in document.body||(t.on("mousedown",function(o){if(2==(o=o.data).$.button){if(!n||!o.$.ctrlKey&&!o.$.metaKey){var a=o.bK();if(!i){var r=a.getDocument();(i=r.createElement("input")).$.type="button",r.bH().append(i)}i.setAttribute("style","position:absolute;top:"+(o.$.clientY-2)+"px;left:"+(o.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}}else o.db()==e.bP+1&&t.oW("contextmenu",o)}),t.on("mouseup",function(e){i&&(i.remove(),i=void 0,t.oW("contextmenu",e.data))}));if(t.on("contextmenu",function(e){var i=e.data;if(!n||!(f.webkit?o:i.$.ctrlKey||i.$.metaKey)){i.preventDefault();var a=i.bK(),r=i.bK().getDocument().gT(),l=i.$.clientX,s=i.$.clientY;D.setTimeout(function(){this._.onMenu(r,null,l,s,a,t)},0,this)}},this),f.opera&&t.on("keypress",function(e){var t=e.data;0===t.$.keyCode&&t.preventDefault()}),f.webkit){var o,a=function(){o=0};t.on("keydown",function(e){o=e.data.$.ctrlKey||e.data.$.metaKey}),t.on("keyup",a),t.on("contextmenu",a)}},kh:function(e,t){this._.dF.push([e,t])},show:function(t,n,i,o,a,r){this.app.focus(),this._.onMenu(t||e.document.gT(),n,i||0,o||0,a,r)}}}),function(){function t(e){this.jr=null,this.kP=null,this.nK=null,this.app=e}H.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(n){var i,o;n.cK=new t(n),n.on("themeSpace",function(e){"mainBottom"==e.data.space&&(e.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>')}),n.on("uiReady",function(e){n.document.on("dragstart",function(e){e.data.preventDefault(!0)}),n.document.on("drag",function(e){e.data.preventDefault(!0)}),n.ld["filesview.filesview"].gA("Draggable"),n.ld["foldertree.foldertree"].ke("Droppable")}),e.ld.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(e){var t=this,o=t.tools.bZ(e),a=t.tools.oO(!0);if(o&&e.data.ov()){e.data.preventDefault(),o.rowNode().hasClass("selected")||((e.data.$.ctrlKey||e.data.$.metaKey)&&n.config.selectMultiple?a.push(o):a=[o]);var r=D.extend({},{file:o,files:a,step:1},!0);t.oW("beforeDraggable",r,function(e,r){if(!e){var l=o.rowNode(),s=0,d=0;(i=i||n.document.getById("dragged_container")).hide(),n.document.on("mousemove",u),n.document.on("mouseup",f,999);var c=n.document.bH().$;n.document.on("mouseout",function(e){n.cK.qp()&&e.data.bK().$==c&&f()})}function u(e){if(i.setStyles({left:e.data.$.clientX-("rtl"==n.lang.dir?i.hR("width"):-1)+"px",top:e.data.$.clientY+"px"}),0===s&&(s=e.data.$.clientY+e.data.$.clientX),!(d||Math.abs(e.data.$.clientY+e.data.$.clientX-s)<20)){t.app.cK.kG(l),t.app.cK.kz(a);for(var o=0,c=a.length;o<c;o++)a[o].rowNode().addClass("dragged_source");var u;if(1==a.length?(i.setStyle("width",l.rd("width")),i.addClass("file_entry")):i.addClass("drag_multiple"),i.show(),1==a.length)u=(u=(u=l.getHtml()).replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"')).replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"");else{var f=n.config.jh||"gif";u=function(e,t,n){for(var i=!0,o=t[0].ext.toLowerCase(),a=1,r=t.length;a<r;a++)if(t[a].ext.toLowerCase()!=o){i=!1;break}return'<div style="background-image: url('+(i?e.tools.oR(t[0],!0):e.app.fh+"images/icons/32/default.icon."+n)+')"><span>'+t.length+"</span></div>"}(t,a,f)}i.setHtml(u),d=1,t.app.document.bH().addClass("dragging"),t.app.ld["foldertree.foldertree"].gA("Droppable"),r.step=1,t.oW("successDraggable",r)}}function f(e){i.hide(),i.removeClass("drag_multiple"),i.removeClass("file_entry"),i.setStyle("width","auto"),i.setHtml("");for(var o=0,l=a.length;o<l;o++)a[o].rowNode().removeClass("dragged_source");t.app.cK.kG(null),t.app.cK.kz(null),n.document.removeListener("mousemove",u),e?e.removeListener():n.document.removeListener("mouseup",f),t.app.ld["foldertree.foldertree"].ke("Droppable"),t.app.document.bH().removeClass("dragging"),r.step=2,t.oW("successDraggable",r),t.oW("afterDraggable",r)}})}}),e.ld.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(t){var i=t.data.bK(),a=this,r=t.name;if(!!a.app.cK.qp()&&!i.is("ul")){var l=a.tools.cq(i);if(l)if("mouseup"==r){a.app.cK.iW(0),a.app.cK.nz(l);var s=a.app.cK.pe(),d=D.extend({},{target:l,source:s},!0);a.oW("beforeDroppable",d,function(t,i){if(!t)try{var r=i.target,l=i.source,s=new e.iD(a.app,"copyFilesToFolderDrop",{label:a.app.lang.CopyDragDrop,bu:r!=l[0].folder&&r.acl.fileUpload?e.aS:e.aY,onClick:function(){a.oW("successDroppable",{hH:l,hC:r,step:2}),a.app.execCommand("copyFilesToFolder",{files:l,destination:r,callback:function(){a.oW("successDroppable",{hH:l,hC:r,step:3}),a.oW("afterDroppable",i)},errorCallback:function(){a.oW("failedDroppable",i),a.oW("afterDroppable",i)}})}}),d=window.top[e.nd+"cation"][e.jG+"st"],c={copyFilesToFolder:s,moveFilesToFolder:new e.iD(a.app,"moveFilesToFolderDrop",{label:a.app.lang.MoveDragDrop,bu:r!=l[0].folder&&r.acl.fileUpload&&l[0].folder.acl.fileDelete?e.aS:e.aY,onClick:function(){a.oW("successDroppable",{hH:l,hC:r,step:2}),e.bF&&1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(d)!=e.lS(e.ed)||e.bF&&e.bF.substr(3,1)!=e.bs.substr(9*(e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))%(e.bs.length-1),1)?a.app.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license."):a.app.execCommand("moveFilesToFolder",{files:l,destination:r,callback:function(){a.oW("successDroppable",{hH:l,hC:r,step:3}),a.oW("afterDroppable",i)},errorCallback:function(){a.oW("failedDroppable",i),a.oW("afterDroppable",i)}})}})};a.oW("beforeDropMenu",{iG:c,folder:r}),o||((o=new e.menu(a.app)).onClick=D.bind(function(e){o.hide(),e.onClick?e.onClick():e.command&&n.execCommand(e.command)},this)),o.ih();for(var u in c)c.hasOwnProperty(u)&&o.add(c[u]);o.items.length&&o.show(r.aNode(),"rtl"==n.lang.dir?2:1,0,r.aNode().$.offsetHeight),a.oW("successDroppable",{hH:l,hC:r,step:1})}catch(t){throw t=e.ba(t),a.oW("failedDroppable",i),a.oW("afterDroppable",i),t}})}else"mouseover"==r?a.app.cK.fZ||a.app.cK.iW(l.liNode()):"mouseout"==r&&a.app.cK.fZ&&a.app.cK.iW(0)}})}}),t.prototype={iW:function(e){var t=this,n=!!e;n&&!t.fZ?(t.app.document.bH().addClass("drop_accepted"),e.addClass("drop_target")):!n&&t.fZ&&(t.app.document.bH().removeClass("drop_accepted"),t.fZ.removeClass("drop_target")),t.fZ=n?e:null},kG:function(e){this.jr=e,this.jr instanceof L&&this.jr.focus()},vE:function(){return this.jr},kz:function(e){this.kP=e},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(e){this.nK=e},oa:function(){return this.nK}}}(),H.add("floatpanel",{bM:["panel"]}),function(){var t={},n=!1;we.pY=D.createClass({$:function(e,n,i,o){i.lE=!0;var a,r,l,s,d,c,u,f=n.getDocument(),p=(a=e,r=f,l=n,s=i,d=o||0,c=r.iY()+"-"+l.iY()+"-"+a.gd+"-"+a.lang.dir+(a.uiColor&&"-"+a.uiColor||"")+(s.css&&"-"+s.css||"")+(d&&"-"+d||""),(u=t[c])||((u=t[c]=new we.panel(r,s,a.gd)).element=l.append(L.kE(u.nt(a),l.getDocument())),u.element.setStyles({display:"none",position:"absolute"})),u),h=p.element,m=h.getFirst().getFirst();this.element=h,e.ia?e.ia.push(h):e.ia=[h],this._={panel:p,parentElement:n,dg:i,document:f,iframe:m,children:[],dir:e.lang.dir}},ej:{qq:function(e,t){return this._.panel.qq(e,t)},re:function(e,t){return this._.panel.re(e,t)},iv:function(e){return this._.panel.iv(e)},gf:function(t,i,o,a,r){var l=this._.panel,s=l.gf(t);this.fj(!1),n=!0;var d=this.element,c=this._.iframe,u=this._.dg,h=i.ir(d.getDocument()),m="rtl"==this._.dir,g=h.x+(a||0),v=h.y+(r||0);if(!m||1!=o&&4!=o?m||2!=o&&3!=o||(g+=i.$.offsetWidth-1):g+=i.$.offsetWidth,3!=o&&4!=o||(v+=i.$.offsetHeight-1),this._.panel._.nr=i.dS(),d.setStyles({top:v+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""}),d.getFirst().removeStyle("width"),!this._.qa){var b=p?c:new E.window(c.$.contentWindow);e.event.jP=!0,b.on("blur",function(e){if(!p||this.fj()){var t=e.data.bK(),i=t.getWindow&&t.getWindow();i&&i.equals(b)||!this.visible||this._.gF||n||(f.webkit&&f.isMobile?D.setTimeout(function(){this.hide()},500,this):this.hide())}},this),b.on("focus",function(){this._.lG=!0,this.gU(),this.fj(!0)},this),e.event.jP=!1,this._.qa=1}l.onEscape=D.bind(function(){this.onEscape&&this.onEscape()},this),D.setTimeout(function(){m&&(g-=d.$.offsetWidth),d.setStyles({left:g+"px",visibility:"",opacity:"1"});var e=d.getFirst();if(s.oz){function t(){var e=d.getFirst(),t=0,n=s.element.$;(f.gecko||f.opera)&&(n=n.parentNode);var i=n.scrollWidth;if(p&&f.version<10)for(var o=(n=n.document.body).getElementsByTagName("a"),a=0;a<o.length;a++){var r=o[a].children[1],c=r.scrollWidth+r.offsetLeft-i;c>0&&c>t&&(t=c)}i+=t,p&&f.quirks&&i>0&&(i+=(e.$.offsetWidth||0)-(e.$.clientWidth||0)),i+=4,e.setStyle("width",i+"px"),s.element.addClass("cke_frameLoaded");var u=s.element.$.scrollHeight;p&&f.quirks&&u>0&&(u+=(e.$.offsetHeight||0)-(e.$.clientHeight||0)),e.setStyle("height",u+"px"),l._.iL.element.setStyle("display","none").removeStyle("display")}l.hm?t():l.onLoad=t}else e.removeStyle("height");var n=l.element,i=n.getWindow(),o=i.hV(),a=i.eR(),r=n.$.offsetHeight,h=n.$.offsetWidth;(m?g<0:g+h>a.width+o.x)&&(g+=h*(m?1:-1)),v+r>a.height+o.y&&(v-=r),d.setStyles({top:v+"px",left:g+"px",opacity:"1"}),D.setTimeout(function(){if(u.ny&&f.gecko){var e=c.getParent();e.setAttribute("role","region"),e.setAttribute("title",u.ny),c.setAttribute("role","region"),c.setAttribute("title"," ")}p&&f.quirks?c.focus():c.$.contentWindow.focus(),p&&!f.quirks&&this.fj(!0)},0,this)},0,this),this.visible=1,this.onShow&&this.onShow.call(this),(f.ie7Compat||f.ie8&&f.ie6Compat)&&D.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this),n=!1},hide:function(){var e=this;!e.visible||e.onHide&&!0===e.onHide.call(e)||(e.gU(),e.element.setStyle("display","none"),e.visible=0)},fj:function(e){var t=this._.panel;return void 0!=e&&(t.fj=e),t.fj},rA:function(e,t,n,i,o,a){this._.gF==e&&e._.panel._.nr==n.dS()||(this.gU(),e.onHide=D.bind(function(){D.setTimeout(function(){this._.lG||this.hide()},0,this)},this),this._.gF=e,this._.lG=!1,e.gf(t,n,i,o,a),(f.ie7Compat||f.ie8&&f.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},gU:function(){var e=this._.gF;e&&(delete e.onHide,delete this._.gF,e.hide())}}})}(),function(){function t(e){if("submit"==e.name){var t=this.app.ld["formpanel.formpanel"].data();return this.oW("requestUnloadForm"),void this.oW("afterFilesViewSettingsForm",t)}var n=e.data.bK(),i=n.getAttribute("name"),o=n.getAttribute("value"),a=n.$.checked;"input"==n.getName()&&D.setTimeout(function(){var e=this.app.ld["filesview.filesview"],t=e.data(),n={dA:t.dA,cN:t.cN,display:CKFinder.tools.clone(t.display),lookup:t.lookup};if("sortby"==i)t.cN=o;else if("view_type"==i){t.dA=o;var r=this.app.document.getById("fs_display_filename");"list"==o?(t.display.filename=!0,r.$.checked=!0,r.$.disabled=!0):r.$.disabled=!1}else"display_filename"==i?"list"!=t.dA&&(t.display.filename=!!a):"display_date"==i?t.display.date=!!a:"display_filesize"==i&&(t.display.filesize=!!a);var l=("list"==t.dA?"L":"T")+("size"==t.cN?"S":"date"==t.cN?"D":"extension"==t.cN?"E":"N")+(t.display.filename?"N":"_")+(t.display.date?"D":"_")+(t.display.filesize?"S":"_");D.setCookie("CKFinder_Settings",l,!1),n.display.filename==t.display.filename&&n.display.date==t.display.date&&n.display.filesize==t.display.filesize&&n.cN==t.cN&&n.dA==t.dA||e.oW("requestRenderFiles",{mj:e.app.lang.FilesEmpty,lastView:n})},0,this)}function n(e){e.data.preventDefault()}H.add("formpanel",{bM:["button"],onLoad:function(){var i;(i=e.ld.hS("formpanel","formpanel",{dc:null})).dT.push(function(){D.mH(this.bn())}),i.bh("UnloadForm",["submit","requestUnloadForm"],function(t){("submit"!=t.name||this.data().gM)&&(t.result=this.oW("beforeUnloadForm",function(t,n){var i=this;if(!t)try{if(i.bn().getParent().setStyle("display","none"),i.app.layout.ea(!0),i.data().dc){var o=i.app.cS(i.data().dc);o&&o.bR(e.aS),i.data().dc=null}var a=i.tools.formNode();a&&(a.mF(),a.remove()),i.tools.releaseDomNodes(),i.oW("successUnloadForm",n)}catch(t){throw i.oW("failedUnloadForm",n),i.oW("afterUnloadForm",n),e.ba(t)}}))}),i.bh("LoadForm",["requestLoadForm"],function(t){var i=this,o=D.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},t.data,!0);t.result=this.oW("beforeLoadForm",o,function(t,o){if(!t){try{var a=this.bn();a.setHtml(o.html),a.getParent().removeStyle("display"),this.app.layout.ea(!0);var r=this.tools.formNode();if(r){if(o.dq)if(o.cC)for(var l in o.cC)r.on(o.cC[l],o.dq);else r.on("submit",o.dq);o.cancelSubmit&&r.on("submit",n);for(var s=r.eG("input"),l=0;l<s.count();l++)if("cancel"==s.getItem(l).getAttribute("name")){s.getItem(l).on("click",function(e){i.oW("requestUnloadForm"),e.removeListener()});break}o.cancelSubmit&&r.on("submit",n)}if(this.data().gM=o.gM,o.command){var d=this.app.cS(o.command);d&&d.bR(e.eV),this.data().dc=o.command}this.oW("successLoadForm",o)}catch(t){throw this.oW("failedLoadForm",o),e.ba(t)}this.oW("afterLoadForm",o)}})}),i.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(n){n.result=this.oW("beforeFilesViewSettingsForm",{},function(n,i){if(!n)try{if("settings"==this.data().dc)this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",i),this.oW("afterFilesViewSettingsForm",i)});else{this.data().dc&&this.oW("requestUnloadForm");var o=this.app.ld["filesview.filesview"].data(),a=function(e,t,n,i){var o='checked="checked"',a="",r="",l="",s="",d="",c="",u="",f="",p="";"list"==t?a=o:r=o,n.filename&&(l=o),n.date&&(s=o),n.filesize&&(d=o),"date"==i?u=o:"size"==i?f=o:"extension"==i?p=o:c=o;var h=a?' disabled="true"':"";return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+e.SetTitle+'</h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">'+e.SetView+'</dt><dd><input type="radio" name="view_type" value="thumbnails" '+r+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+e.SetViewThumb+'</label></dd><dd><input type="radio" name="view_type" value="list" '+a+' id="fs_type_details" /> <label for="fs_type_details">'+e.SetViewList+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">'+e.SetDisplay+'</dt><dd><input type="checkbox" name="display_filename" value="1" '+l+h+' id="fs_display_filename" /> <label for="fs_display_filename">'+e.SetDisplayName+'</label></dd><dd><input type="checkbox" name="display_date" value="1" '+s+' id="fs_display_date" /> <label for="fs_display_date">'+e.SetDisplayDate+'</label></dd><dd><input type="checkbox" name="display_filesize" value="1" '+d+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+e.SetDisplaySize+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">'+e.SetSort+'</dt><dd><input type="radio" name="sortby" value="filename" '+c+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+e.SetSortName+'</label></dd><dd><input type="radio" name="sortby" value="date" '+u+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+e.SetSortDate+'</label></dd><dd><input type="radio" name="sortby" value="size" '+f+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+e.SetSortSize+'</label></dd><dd><input type="radio" name="sortby" value="extension" '+p+' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+e.SetSortExtension+'</label></dd></dl></td></tr></table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+e.CloseBtn+'" /></div></div></form>'}(this.app.lang,o.dA,o.display,o.cN);this.oW("requestLoadForm",{html:a,dq:D.bind(t,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border"),this.app.cg.resizeFormPanel(),this.oW("successFilesViewSettingsForm",i)})}}catch(t){throw this.oW("failedFilesViewSettingsForm",i),this.oW("afterFilesViewSettingsForm",i),e.ba(t)}})}),i.tools={formNode:function(){var e,t,n,i,o=this;return!o.iP&&o.ib.bn().$.childNodes.length&&(o.iP=(t=o.ib.bn().$.childNodes,n="form",(e=function(e,t){for(var n in e)if(void 0!==t(e[n]))return e[n]}(t,function(e){if(e.tagName&&e.tagName.toLowerCase()==n&&!i--)return e}))?new L(e):null)),o.iP},releaseDomNodes:function(){delete this.iP}}},gr:function(t){var n=this;t.on("themeSpace",function(e){"mainTop"==e.data.space&&(e.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget widget" tabindex="-1"></div></div>')}),t.on("uiReady",function(i){var o=t.document.getById("panel_view").getChild(0);e.ld.bz(t,"formpanel",n,o)}),t.bD("settings",{exec:function(t){t.oW("requestFilesViewSettingsForm",null,function(){t.cS("settings").bu==e.eV&&setTimeout(function(){t.ld["formpanel.formpanel"].tools.formNode().eG("input").getItem(0).focus()},0)})}}),t.bD("refresh",{exec:function(e){var t=e.aV;t&&e.oW("requestShowFolderFiles",{folder:t,lookup:e.ld["filesview.filesview"].data().lookup},function(){setTimeout(function(){e.ld["filesview.filesview"].bn().focus()},0)})}}),t.bY.add("Settings",e.UI_BUTTON,{label:t.lang.Settings,command:"settings"}),t.bY.add("Refresh",e.UI_BUTTON,{label:t.lang.Refresh,command:"refresh"}),t.cS("refresh").bR(e.aY)}})}(),H.add("keystrokes",{eK:function(t){t.dJ=new e.dJ(t),t.oX={}},bz:function(e){for(var t=e.config.keystrokes,n=e.config.gN,i=e.dJ.keystrokes,o=e.dJ.gN,a=0;a<t.length;a++)i[t[a][0]]=t[a][1];for(a=0;a<n.length;a++)o[n[a]]=1}}),e.dJ=function(e){return e.dJ?e.dJ:(this.keystrokes={},this.gN={},this._={app:e},this)},re=function(e){var t=(e=e.data).db(),n=this.keystrokes[t],i=this._.app;if(!(ae=!0===i.oW("iK",{keyCode:t}))){if(n){ae=!1!==i.execCommand(n,{gJ:"dJ"})}if(!ae){var o=i.oX[t];(ae=o&&!0===o(i))||(ae=!!this.gN[t])}}return ae&&e.preventDefault(!0),!ae},le=function(e){ae&&(ae=!1,e.data.preventDefault(!0))},e.dJ.prototype={oA:function(e){e.on("keydown",re,this),(f.opera||f.gecko&&f.mac)&&e.on("keypress",le,this)}},U.gN=[],U.keystrokes=[[e.eJ+119,"foldertreeFocus"],[e.eJ+120,"filesviewFocus"],[e.eJ+121,"hW"],[e.eJ+85,"upload"],[e.dy+121,"bj"],[e.bP+e.dy+121,"bj"]],H.add("menu",{eK:function(e){for(var t=e.config.nj.split(","),n={},i=0;i<t.length;i++)n[t[i]]=i+1;e._.iA=n,e._.iG={}},bM:["floatpanel"]}),D.extend(e.application.prototype,{dZ:function(e,t){this._.iA[e]=t||100},gp:function(t,n){this._.iA[n.group]&&(this._.iG[t]=new e.iD(this,t,n))},eU:function(e){for(var t in e)this.gp(t,e[t])},mh:function(e){return this._.iG[e]}}),function(){e.menu=D.createClass({$:function(e,t){this.id="cke_"+D.getNextNumber(),this.app=e,this.items=[],this._.hx=t||1},_:{jK:function(t){var n=this,i=n._.oM,o=n.items[t],a=o.hQ&&o.hQ();if(a){i?i.ih():((i=n._.oM=new e.menu(n.app,n._.hx+1)).parent=n,i.onClick=D.bind(n.onClick,n));for(var r in a)i.add(n.app.mh(r));var l=n._.panel.iv(n.id).element.getDocument().getById(n.id+String(t));i.show(l,2)}else n._.panel.gU()}},ej:{add:function(e){e.fE||(e.fE=this.items.length),this.items.push(e)},ih:function(){this.items=[]},show:function(t,n,i,o){var a=this.items,r=this.app,l=this._.panel,s=this._.element;if(!l){(l=this._.panel=new we.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:r.iy+" cke_contextmenu"},this._.hx)).onEscape=D.bind(function(){this.onEscape&&this.onEscape(),this.hide()},this),l.onHide=D.bind(function(){this.onHide&&this.onHide()},this);var d=l.qq(this.id);d.oz=!0;var c=d.jQ;c[40]="next",c[9]="next",c[38]="prev",c[e.dy+9]="prev",c[32]="click",c[39]="click",(s=this._.element=d.element).addClass(r.iy);var u=s.getDocument();u.bH().setStyle("overflow","hidden"),u.eG("html").getItem(0).setStyle("overflow","hidden"),this._.qz=D.addFunction(function(e){clearTimeout(this._.jI),this._.jI=D.setTimeout(this._.jK,r.config.ob,this,[e])},this),this._.qm=D.addFunction(function(e){clearTimeout(this._.jI)},this),this._.ql=D.addFunction(function(t){var n=this,i=n.items[t];i.bu!=e.aY?i.hQ?n._.jK(t):n.onClick&&n.onClick(i):n.hide()},this)}a.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.fE<t.fE?-1:e.fE>t.fE?1:0});for(var f=['<div class="cke_menu">'],p=a.length,h=p&&a[0].group,m=0;m<p;m++){var g=a[m];h!=g.group&&(f.push('<div class="cke_menuseparator"></div>'),h=g.group),g.er(this,m,f)}f.push("</div>"),s.setHtml(f.join("")),this.parent?this.parent._.panel.rA(l,this.id,t,n,i,o):l.gf(this.id,t,n,i,o),r.oW("menuShow",[l])},hide:function(){this._.panel&&this._.panel.hide()}}})}(),e.iD=D.createClass({$:function(e,t,n){var i=this;D.extend(i,n,{fE:0,className:"cke_button_"+t}),i.group=e._.iA[i.group],i.app=e,i.name=t},ej:{er:function(t,n,i){var o=this,a=t.id+String(n),r=void 0===o.bu?e.aS:o.bu,l=" cke_"+(r==e.eV?"on":r==e.aY?"disabled":"off"),s=o.label;r==e.aY&&(s=o.app.lang.common.unavailable.replace("%1",s)),o.className&&(l+=" "+o.className);var d=o.hQ;i.push('<span class="cke_menuitem"><a id="',a,'" class="',l,'" href="javascript:void(\'',(o.label||"").replace("'",""),'\')" title="',o.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(d?'aria-haspopup="true"':"")+(r==e.aY?'aria-disabled="true"':"")+(r==e.eV?'aria-pressed="true"':"")),(f.opera||f.gecko&&f.mac)&&i.push(' onkeypress="return false;"'),f.gecko&&i.push(' onblur="this.style.cssText = this.style.cssText;"');var c=-16*(o.rD||0);i.push(' onmouseover="CKFinder.tools.callFunction(',t._.qz,",",n,');" onmouseout="CKFinder.tools.callFunction(',t._.qm,",",n,');" onclick="CKFinder.tools.callFunction(',t._.ql,",",n,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(o.icon?' style="background-image:url('+e.getUrl(o.icon)+");background-position:0 "+c+'px;"':"")+'></span></span><span class="cke_label">'),o.hQ&&i.push('<span class="cke_menuarrow"></span>'),i.push(s,"</span></a></span>")}}}),U.ob=400,U.nj="",function(){function e(e){f.opera&&e.setStyle("overflow","hidden"),e.on("touchstart",function(t){var n=t.data.$.touches[0];e.interval&&(window.clearInterval(e.interval),delete e.interval),e.lL=e.$.scrollTop,e.nx=e.$.scrollLeft,e.mP=n.pageY,e.na=n.pageX,e.mO=new Date}),e.on("touchmove",function(n){var i=n.data,o=i.$.touches[0];t(e,o.pageX,o.pageY)&&i.preventDefault()}),e.on("touchend",function(n){var i=n.data,o=i.$.changedTouches[0];if(t(e,o.pageX,o.pageY)){i.preventDefault();var a=(new Date-e.mO)/100,r=o.pageX-e.na,l=o.pageY-e.mP;e.mK=r/a,e.nu=l/a,e.jy=o.pageX,e.mv=o.pageY,e.nf=0,e.interval=window.setInterval(function(){!function(e){var n=Math.cos(e.nf/7*Math.PI/2);if(e.jy+=e.mK*n,e.mv+=e.nu*n,e.nf++>7||!t(e,e.jy,e.mv))window.clearInterval(e.interval),delete e.interval}(e)},100)}})}function t(e,t,n){var i=Math.round(t-e.na),o=Math.round(n-e.mP),a=e.nx-i,r=e.lL-o;return(e.$.scrollLeft!=a||e.$.scrollTop!=r)&&(e.$.scrollLeft=a,e.$.scrollTop=r,Math.abs(i)>Math.abs(o)?e.$.scrollLeft==a:e.$.scrollTop==r)}H.add("mobile",{bM:["foldertree","filesview"],bz:function(t){var n="ontouchstart"in window;(f.isMobile||n)&&(t.config.showContextMenuArrow=!0,f.isMobile&&t.on("uiReady",function(n){(f.webkit&&f.version<534||f.opera)&&(e(t.layout.pS()),e(t.layout.pn())),t.hs=function(e,t,n,i){var o=window.prompt(t,n);null!==o&&i(o)},t.msgDialog=function(e,t,n){window.alert(t),n&&n()},t.fe=function(e,t,n){window.confirm(t)&&n()}},null,null,20))}})}(),H.add("panel",{eK:function(t){t.bY.kd(e.UI_PANEL,we.panel.dq)}}),e.UI_PANEL=2,we.panel=function(t,n,i){var o=this;n&&D.extend(o,n),D.extend(o,{className:""});var a=e.basePath;D.extend(o.css,[a+"skins/"+i+"/uipanel.css"]),o.id=D.getNextNumber(),o.document=t,o._={iq:{}}},we.panel.dq={create:function(e){return new we.panel(e)}},we.panel.prototype={nt:function(e){var t=[];return this.er(e,t),t.join("")},er:function(e,t){var n=this,i="cke_"+n.id;if(t.push('<div class="',e.iy,' cke_compatibility" lang="',e.langCode,'" role="presentation" style="display:none;z-index:'+(e.config.baseFloatZIndex+1)+'"><div id="',i,'"',' dir="',e.lang.dir,'"',' role="presentation" class="cke_panel cke_',e.lang.dir),n.className&&t.push(" ",n.className),t.push('">'),n.lE||n.css.length){t.push('<iframe id="',i,'_frame" frameborder="0" src="');var o="document.open();"+(f.isCustomDomain()?'document.domain="'+window.document.domain+'";':"")+"document.close();";t.push(p?"javascript:void(function(){"+encodeURIComponent(o)+"}())":""),t.push('"></iframe>')}return t.push("</div></div>"),i},oU:function(){var e=this._.rE;if(!e){if(this.lE||this.css.length){var t=this.document.getById("cke_"+this.id+"_frame"),n=t.getParent(),i=n.getAttribute("dir"),o=n.getParent().getAttribute("class").split(" ")[0],a=n.getParent().getAttribute("lang"),r=t.getFrameDocument();r.$.open(),f.isCustomDomain()&&(r.$.domain=document.domain);var l=D.addFunction(D.bind(function(e){this.hm=!0,this.onLoad&&this.onLoad()},this)),s=r.getWindow();s.$.CKFinder=CKFinder;var d=f.cssClass.replace(/browser_quirks|browser_iequirks/g,"");r.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+i+'" class="'+o+'_container" lang="'+a+'"><head><style>.'+o+'_container{visibility:hidden}</style></head><body class="cke_'+i+" cke_panel_frame "+d+' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+l+');"></body><link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'"></html>'),r.$.close(),s.$.CKFinder=CKFinder,r.on("keydown",function(e){var t=e.data.db();this._.onKeyDown&&!1===this._.onKeyDown(t)?e.data.preventDefault():27==t&&this.onEscape&&this.onEscape()},this),e=r.bH()}else e=this.document.getById("cke_"+this.id);this._.rE=e}return e},qq:function(e,t){return t=this._.iq[e]=t||new we.panel.block(this.oU()),this._.iL||this.gf(e),t},iv:function(e){return this._.iq[e]},gf:function(e){var t=this._.iq[e],n=this._.iL;return n&&n.hide(),this._.iL=t,t._.cQ=-1,this._.onKeyDown=t.onKeyDown&&D.bind(t.onKeyDown,t),t.show(),t}},we.panel.block=D.createClass({$:function(e){this.element=e.append(e.getDocument().createElement("div",{attributes:{class:"cke_panel_block",role:"presentation"},gS:{display:"none"}})),this.jQ={},this._.cQ=-1,this.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e){var t=this;switch(t.jQ[e]){case"next":for(var n,i=t._.cQ,o=t.element.eG("a");n=o.getItem(++i);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){t._.cQ=i,n.focus();break}return!1;case"prev":for(i=t._.cQ,o=t.element.eG("a");i>0&&(n=o.getItem(--i));)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){t._.cQ=i,n.focus();break}return!1;case"click":return(n=(i=t._.cQ)>=0&&t.element.eG("a").getItem(i))&&(n.$.click?n.$.click():n.$.onclick()),!1}return!0}}}),H.add("resize",{bz:function(t){var n=t.config;n.nB&&t.on("uiReady",function(){var i,o,a=null;function r(e){t.document.bH().addClass("during_sidebar_resize");var a=e.data.$.screenX-i.x,r=o.width+a*("rtl"==t.lang.dir?-1:1);t.nJ(Math.max(n.nN,Math.min(r,n.nC)))}function l(n){t.document.bH().removeClass("during_sidebar_resize"),e.document.removeListener("mousemove",r),e.document.removeListener("mouseup",l),t.document&&(t.document.removeListener("mousemove",r),t.document.removeListener("mouseup",l))}t.layout.dV().on("mousedown",function(n){a||(a=t.layout.dV()),n.data.bK().$==a.$&&(o={width:a.$.offsetWidth||0},i={x:n.data.$.screenX},e.document.on("mousemove",r),e.document.on("mouseup",l),t.document&&(t.document.on("mousemove",r),t.document.on("mouseup",l)))})})}}),U.nN=120,U.nC=500,U.nB=!0,function(){H.add("status",{bM:["filesview"],onLoad:function(){var t;(t=e.ld.hS("status","status")).bh("ShowFileInfo",["requestShowFileInfo"],function(t){t.result=this.oW("beforeShowFileInfo",t.data,function(t,n){var i=this;if(!t){var o,a,r=n.file;try{var l=r?(o=r,a=i.app.lang,"<p>"+D.escapeHtml(o.name)+" ("+D.formatSize(o.size,a,!0)+", "+o.dateF+")</p>"):"";i.bn().setHtml(l),i.oW("successShowFileInfo",n)}catch(t){throw i.oW("failedShowFileInfo",n),e.ba(t)}i.oW("afterShowFileInfo",n)}})}),t.bh("ShowFolderInfo",["requestShowFolderInfo"],function(t){t.result=this.oW("beforeShowFolderInfo",t.data,function(n,i){var o,a,r,l=this;if(!n){i.folder;try{var s=(o=t.data.ib.data().shownFiles.length,a=l.app.lang,r=0===o?a.FilesCountEmpty:1==o?a.FilesCountOne:a.FilesCountMany.replace("%1",o),"<p>"+D.htmlEncode(r)+"</p>");l.bn().setHtml(s),l.oW("successShowFolderInfo",i)}catch(t){throw l.oW("failedShowFolderInfo",i),e.ba(t)}l.oW("afterShowFolderInfo",i)}})})},gr:function(t){var n=this;t.on("themeSpace",function(e){"mainBottom"==e.data.space&&(e.data.html+='<div id="status_view" class="view" role="status"></div>')}),t.on("uiReady",function(i){var o=t.document.getById("status_view"),a=t.ld["filesview.filesview"],r=e.ld.bz(t,"status",n,o,{parent:a});a.app==t&&(a.on("successSelectFile",function(e){r.oW("requestShowFileInfo",e.data)}),a.on("successRenderFiles",function(e){var t={folder:e.data.folder,ib:a};r.oW("requestShowFolderInfo",t)})),t.on("afterCommandExecDefered",function(e){if("RemoveFile"==e.data.name){var t={folder:e.data.folder,ib:a};r.oW("requestShowFolderInfo",t)}}),r.on("afterShowFileInfo",function(e){this.bn().getText()||r.oW("requestShowFolderInfo",{ib:a,folder:a.data().folder})})})}})}(),function(){var e=function(){this.fk=[],this.pZ=!1};e.prototype.focus=function(){for(var e,t=0;e=this.fk[t++];)for(var n,i=0;n=e.items[i++];)if(n.focus)return void n.focus()};var t={hW:{iH:{qt:1,source:1},exec:function(e){e.dh&&(e.dh.pZ=!0,p?setTimeout(function(){e.dh.focus()},100):e.dh.focus())}}};H.add("toolbar",{bM:["formpanel"],bz:function(n){var i=function(e,t){switch(t){case"rtl"==n.lang.dir?37:39:for(;(e=e.next||e.toolbar.next&&e.toolbar.next.items[0])&&!e.focus;);return e?e.focus():n.dh.focus(),!1;case"rtl"==n.lang.dir?39:37:for(;(e=e.previous||e.toolbar.previous&&e.toolbar.previous.items[e.toolbar.previous.items.length-1])&&!e.focus;);if(e)e.focus();else{var i=n.dh.fk[n.dh.fk.length-1].items;i[i.length-1].focus()}return!1;case 27:return n.focus(),!1;case 13:case 32:return e.lc(),!1}return!0};n.on("themeSpace",function(t){if("mainTop"==t.data.space){n.dh=new e;var o,a="cke_"+D.getNextNumber(),r=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',a,'"'];r.push(">"),r.push('<span id="',a,'" class="cke_voice_label">',n.lang.toolbar,"</span>");for(var l=n.dh.fk,s=n.config.toolbar instanceof Array?n.config.toolbar:n.config["toolbar_"+n.config.toolbar],d=0;d<s.length;d++){var c=s[d];if(c){var u="cke_"+D.getNextNumber(),f={id:u,items:[]};if(o&&(r.push("</div>"),o=0),"/"!==c){r.push('<span id="',u,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var p=l.push(f)-1;p>0&&(f.previous=l[p-1],f.previous.next=f);for(var h=0;h<c.length;h++){var m,g=c[h];if(m="-"==g?we.separator:n.bY.create(g)){m.canGroup?o||(r.push('<span class="cke_toolgroup">'),o=1):o&&(r.push("</span>"),o=0);var v=m.er(n,r);(p=f.items.push(v)-1)>0&&(v.previous=f.items[p-1],v.previous.next=v),v.toolbar=f,v.onkey=i}}o&&(r.push("</span>"),o=0),r.push('<span class="cke_toolbar_end"></span></span>')}else r.push('<div class="cke_break"></div>')}}n.search&&n.search.er(n,r),r.push("</div></div>"),t.data.html+=r.join("")}}),n.bD("hW",t.hW)}})}(),we.separator={er:function(e,t){return t.push('<span class="cke_separator"></span>'),{}}},U.toolbar_Basic=[["Upload","Refresh"]],U.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]],U.toolbar="Full",H.add("tools",{eK:function(e){this.app=e},addTool:function(e,t){var n="tool_"+D.getNextNumber();return e=t?'<div id="'+n+'" class="view tool_panel" tabindex="0" style="display: none;">'+e+"</div>":'<div id="'+n+'" class="tool" style="display: none;">'+e+"</div>",this.app.layout.dV().getChild(0).appendHtml(e),n},addToolPanel:function(e){e=e||"";var t=this.addTool(e,1),n=this.app.layout.dV().getChild(0).dB();return D.mH(n),t},hideTool:function(e){this.app.document.getById(e).setStyle("display","none"),this.app.layout.ea(!0)},showTool:function(e){this.app.document.getById(e).removeStyle("display"),this.app.layout.ea(!0)},removeTool:function(e){this.hideTool(e),this.app.document.getById(e).remove()}}),function(){H.add("uploadform",{bM:["formpanel","button","csrftokenmanager"],readOnly:!1,md:function(){if(!f.webkit)return!0;var e=document.createElement("input");return e.setAttribute("type","file"),!1===e.disabled},onLoad:function(){this.md()&&function(){var t=e.ld.bX["formpanel.formpanel"];if(!t)return;t.bh("UploadFileForm",["requestUploadFileForm"],function(t){var n=this.app.aV,i=this;this.oW("beforeUploadFileForm",{folder:n,step:1},function(t,n){if(!(t||e.bF.length>0&&-1!="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ".indexOf(e.bF.substr(0,9)))){var o=this.data(),a=n.folder,r=0;if(a||(this.app.msgDialog("",this.app.lang.UploadNoFolder),r=1),r||a.acl.fileUpload||(this.app.msgDialog("",this.app.lang.UploadNoPerms),r=1),r)return this.oW("failedUploadFileForm"),void this.oW("afterUploadFileForm");this.oW("beforeUploadFileForm",{folder:a,step:2},function(t,n){try{if("upload"==o.dc)this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(e.aS),this.oW("successUploadFileForm",n),this.oW("afterUploadFileForm",n)});else{o.dc&&this.oW("requestUnloadForm");var r=this.tools.qL(),l=this.app.connector.composeUrl("FileUpload",{},a.type,a),s=(f=this.app,p=r.$.id,'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+l+'" method="POST" target="'+p+'"><h2 role="heading">'+f.lang.UploadTitle+'</h2><p><input type="file" name="upload" /></p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+f.lang.UploadBtn+'" /><input type="hidden" name="ckCsrfToken" value="'+e.getCsrfToken()+'" /><input type="button" name="cancel" value="'+f.lang.UploadBtnCancel+'" /></div></div></form>'),d=this;function c(e){if(e.data.folder&&e.data.folder.acl.fileUpload){var t=i.tools.qO();i.oW("requestUnloadForm"),i.oW("requestUploadFileForm",function(){var e=i.tools.qO();t.kB(e),e.remove(),delete i.tools.jj})}}this.oW("requestLoadForm",{html:s,dq:D.bind(function(t){return function(t,n){var i=this,o=(i.data(),1),a=this.tools.qO(),r=a&&a.$.value;if(!r.length)return t.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var l=r.match(/\.([^\.]+)\s*$/)[1];l&&n.getResourceType().isExtensionAllowed(l)?o=0:(t.data.preventDefault(),i.app.msgDialog("",i.app.lang.UploadExtIncorrect));if(o)return t.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var s=i.app.document.getWindow().$;return s.OnUploadCompleted=function(e,t){var o={step:3,filename:e,folder:n};if(t&&!e){i.app.msgDialog("",t);var a=i.tools.qB();a.setStyle("display","none"),a.getChild(1).setText(""),a.getChild(2).setText(""),i.oW("failedUploadFileForm",o)}else t&&i.app.msgDialog("",t),i.app.aV==n&&i.app.oW("requestShowFolderFiles",{folder:n,mw:e}),i.oW("requestUnloadForm"),i.oW("successUploadFileForm",o);i.oW("afterUploadFileForm",o);try{delete s.OnUploadCompleted}catch(e){s.OnUploadCompleted=void 0}},e.log("[UPLOADFORM] Starting IFRAME file upload."),this.oW("successUploadFileForm",{step:2}),!0}.call(d,t,a)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){this.eh.addClass("show_border"),n.step=1,this.oW("successUploadFileForm",n)});var u=this.app.ld["filesview.filesview"];u.on("successShowFolderFiles",c),this.on("requestUnloadForm",function(e){e.removeListener(),u.removeListener("successShowFolderFiles",c)})}}catch(t){throw this.oW("failedUploadFileForm",n),this.oW("afterUploadFileForm",n),e.ba(t)}var f,p})}})}),t.tools.releaseDomNodes=D.override(t.tools.releaseDomNodes,function(e){return function(){var t=this;e.apply(t,arguments),delete t.jj,delete t.jc,void 0!==t.gq&&(t.gq.remove(),delete t.gq)}}),t.tools.qB=function(){return void 0===this.jc&&(this.jc=this.ib.bn().getChild([0,2])),this.jc},t.tools.qO=function(){return void 0===this.jj&&(this.jj=this.ib.bn().getChild([0,1,0])),this.jj},t.tools.qL=function(){if(void 0===this.gq){var e=f.isCustomDomain(),t="ckf_"+D.getNextNumber(),n='<iframe id="'+t+'" name="'+t+'" style="display:none" frameBorder="0"'+(e?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"></iframe>',i=this.ib.app.document.bH();i.appendHtml(n),this.gq=i.dB()}return this.gq}}()},gr:function(t){this.md()&&(t.bD("upload",{exec:function(t){t.oW("requestUploadFileForm",null,function(){var n=t.ld["formpanel.formpanel"].tools.formNode(),i=t.cg.inPopup&&p&&f.version>8;i&&n&&n.submit(),t.cS("upload").bu==e.eV&&setTimeout(function(){if(n){var e=n.eG("input").getItem(0);i||e.on("change",function(){if(e.getValue())for(var t=0;t<n.$.elements.length;t++){var i=n.$.elements[t];"INPUT"==i.nodeName&&"submit"==i.type&&i.click()}}),e.$.click?e.$.click():e.focus()}},0)})}}),t.bY.add("Upload",e.UI_BUTTON,{label:t.lang.Upload,command:"upload"}),t.on("appReady",function(n){t.ld["filesview.filesview"].on("successShowFolderFiles",function(n){var i=this.tools.currentFolder(),o=this.app.cS("upload");if(i&&i.acl.fileUpload)o.bu==e.aY&&o.bR(e.aS);else{var a=t.ld["formpanel.formpanel"];"upload"==a.data().dc&&a.oW("requestUnloadForm"),o.bR(e.aY)}})}))}})}(),function(){"use strict";var t,n,i,o,a,r,l,s,d,c,u,f,p,h,m,g,v,b,y,w,_,F,k,C,x,E,S,N,T,R,$,W=/\.([^\.]+)\s*$/,I=/^(jpg|jpeg|gif|png|bmp)$/i,O=/\|/,U=/(\{\{([a-z_]+)\}\})/g,A=function(){return(new Date).getTime()},P=!1,B="ckf_plugin_html5upload_"+A(),M=B+"_fallbackAsyncArrayTraverse",q=B+"_fallbackShouldFallback",j=B+"_fallbackOnFileBlobReady",H=B+"_fallbackOnXMLHttpRequestReady",z=B+"_fallbackGetCsrfToken",K="CKFinder._['"+B+"']['{{application_name}}']",V="var _files = ((('undefined' === typeof files) ? (this.files || (event.dataTransfer && event.dataTransfer.files)) : files) || []);setTimeout(function () {"+K+"['"+M+"'](_files, function (file, index, files) {var formData = new FormData(),uploadBlob,xhr = new XMLHttpRequest();if (file && "+K+"['"+q+"']()) {formData.append('upload', file);formData.append('ckCsrfToken', "+K+"['"+z+"']());uploadBlob = "+K+"['"+j+"'](file, formData);"+K+"['"+H+"'](file, uploadBlob, xhr, xhr.send.bind(xhr, formData), xhr.abort.bind(xhr));} else {return false;}});}, 500);",G='<div id="ckf_upload_form" ondrop="'+V+'"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file" {{input_multiple}} id="ckf_fileInput" onchange="'+V+'"><a class="cke_dialog_ui_button" href="javascript:void(0);"><span class="cke_dialog_ui_button" id="ckf_addFiles">{{lang_upload_add_files}}</span></a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" href="javascript:void(0);" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">{{lang_close_button}}</span></a></div></div></div>';function Y(e,n){if(k()&&!n.config.readOnly){var o=new t(n),a=new g(n),l=new v(n,a),s=new r(e,n,a,l),d=new i(e,n,a,l,s),c=new f(e,n,a,l,s),u=new h(n,a,l);s.tS(window,B,M,q,j,H,z),l.tJ(n.config.maxSimultaneousUploads),l.uI=function(e){s.ux=e},u.ns(c),a.ns(u),l.ns(o),l.ns(u),l.ns(a),x(e,n,"filesview.filesview",function(t,n,i){E(e,t,d,s,a,l,u,i)}),x(e,n,"formpanel.formpanel",function(t,n,i){S(e,t,d,s,a,l,u,i)}),setInterval(function(){l.sX()&&l.tx()},1e3)}}_=Object.hasOwnProperty("create")?Object.create:function(e){return P=!0,e},w=function(e,t,n){var i,o=0;n||(n=null),t=t.bind(n),(i=function(){for(var n,a=0,r=A();;){if(!(n=e.item?e.item(o):e[o])||!1===t(n,o,e))return;if(o+=1,(a+=1)>=10&&A()-r>10)return setTimeout(i,10)}})()},F=function(e){return function(t){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},(o=function(){this.uU=[]}).prototype.mD=function(e){var t=this;if(!(e instanceof o))throw new Error("Invalid argument: expected EventDispatcher.");e.sy().forEach(function(e){t.ns(e)})},o.mixin=F(o.prototype),o.prototype.ns=function(e){if(!(e instanceof a))throw new Error("Invalid argument: expected EventSubscriber.");if(this.sL(e))throw new Error("Logic error: same EventSubscriber is added twice to the EventDispatcher");this.uU.push(e)},o.prototype.dispatch=function(e,t){this.uU.forEach(function(n){var i=n.tc();i.hasOwnProperty(e)&&n[i[e]].apply(n,t)})},o.prototype.sy=function(e){return e?this.uU.filter(function(t){return t.sV(e)}):this.uU.slice(0)},o.prototype.sL=function(e){return-1!==this.uU.indexOf(e)},o.prototype.removeSubscriber=function(e){var t=this.uU.indexOf(e);if(!(e instanceof a))throw new Error("Invalid argument: expected EventSubscriber.");if(-1===t)throw new Error("Logic error: this EventSubscriber is not registered");this.uU.splice(t,1)},(a=function(){}).prototype.sV=function(e){return this.tc().hasOwnProperty(e)},a.prototype.tc=function(){throw new Error("This method needs to be overriden in child class.")},(t=function(){a.call(this)}).prototype=_(a.prototype),t.prototype.tc=function(){var e={};return e[v.qM]="tF",e},t.prototype.tF=function(e,t){var n=t.targetFolder,i=e.connector.composeUrl("FileUpload",{response_type:"txt"},n.type,n);t.bT.open("POST",i)},(s=function(e,t,n,i){var o=this;a.call(o),o.ckFinder=e,o.application=t,o.ty=n,o.ub=i}).prototype=_(a.prototype),(u=function(e){this.tw(e)}).mixin=F(u.prototype),u.prototype.tj=function(){if(!this.so)throw new Error("Form panel widget is not set.");return this.so},u.prototype.sX=function(){return!!this.so},u.prototype.uV=function(e){},u.prototype.tC=function(){},u.prototype.tw=function(e){var t=this;!t.so&&e?t.uV(e):t.so&&e?(t.tC(),t.uV(e)):t.so&&!e&&t.tC(),t.so=e},(i=function(e,t,n,i){s.call(this,e,t,n,i),u.call(this)}).prototype=_(s.prototype),i.prototype=u.mixin(i.prototype),i.prototype.mE=function(e){var t=this,n=e.layout.pn(),i=n.getDocument(),o=t.sS.bind(t),a=t.ss.bind(t),r=t.rs.bind(t);i.on("drop",r),i.on("dragover",a),n.on("dragover",o),t.domElementListeners||(t.domElementListeners=[]),t.domElementListeners.push({evt:"drop",fO:r,bi:i},{evt:"dragover",fO:a,bi:i},{evt:"dragover",fO:o,bi:n})},i.prototype.ss=function(e){var t=e.data,n=t.$.dataTransfer;if(n){n.dropEffect="none";try{n.effectAllowed="none"}catch(e){}this.ckFinder.env.webkit&&t.preventDefault()}},i.prototype.rs=function(e){var t=e.data.$.dataTransfer;t&&t.files&&t.files.length>0&&(this.ub.uG(t.files),e.data.preventDefault())},i.prototype.uV=function(e){var t=this,n=e.bn().getDocument(),i=t.sS.bind(t),o=n.getById("ckf_upload_form");t.domElementListeners||(t.domElementListeners=[]),t.domElementListeners.length>0&&t.tC(),t.mE(t.application),o.on("dragover",i),t.domElementListeners.push({evt:"dragover",fO:i,bi:o})},i.prototype.sS=function(e){var t=e.data,n=t.$.dataTransfer;n&&(n.files&&n.files.length||n.types&&(n.types.contains&&n.types.contains("Files")||n.types.indexOf&&-1!==n.types.indexOf("Files"))?(n.dropEffect="copy",t.stopPropagation()):n.dropEffect="none",t.preventDefault())},i.prototype.tC=function(){var e,t;for(e=0;e<this.domElementListeners.length;e+=1)(t=this.domElementListeners[e]).bi.removeListener(t.evt,t.fO);delete this.domElementListeners},(r=function(e,t,n,i){s.call(this,e,t,n,i),this.pJ={},this.ux=!0}).prototype=_(s.prototype),r.prototype.lT=function(e){var t,n;for(t in this.pJ)if(this.pJ.hasOwnProperty(t))for(n=0;n<e.length;n+=1)e[n]===this.pJ[t]&&delete this.pJ[t]},r.prototype.ti=function(e,t){if(this.ux)return new p(e,new c(t))},r.prototype.uK=function(e,t,i,o,a){var r,l=this;l.ux&&(l.ub.sX()?((r=new n(l.application,l.application.aV,t,o,a)).ns(l.ty),r.nv(i),t.ns(r),l.ub.expectedFiles-=1,l.ub.tL(l.application,r)):a())},r.prototype.tS=function(t,n,i,o,a,r,l){var s=this,d={};d[i]=w,d[o]=s.shouldFallback.bind(s),d[a]=s.ti.bind(s),d[r]=s.uK.bind(s),d[l]=e.getCsrfToken,t.CKFinder.hasOwnProperty("_")||(t.CKFinder._={}),t.CKFinder._.hasOwnProperty(n)||(t.CKFinder._[n]={}),t.CKFinder._[n][s.application.name]=d},r.prototype.shouldFallback=function(){return!this.ub.shouldStopProcessing&&this.ux},(l=function(){o.call(this)}).prototype=_(o.prototype),l.qQ="xhr.header",l.prototype.tn=function(e,t){throw new Error("This method needs to be overriden in child class.")},((d=function(e){l.call(this),this.file=e}).prototype=_(l.prototype)).tn=function(t,n){var i=new FormData;i.append("upload",this.file),i.append("ckCsrfToken",e.getCsrfToken()),n(i)},(c=function(e){l.call(this),this.formData=e}).prototype=_(l.prototype),c.prototype.tn=function(e,t){t(this.formData)},(f=function(e,t,n,i,o){s.call(this,e,t,n,i),this.qJ=o}).prototype=_(s.prototype),f.prototype.tc=function(){var e={};return e[h.qN]="onFileInputChange",e},f.prototype.onFileInputChange=function(e,t){this.ub.uG(t)&&this.qJ.lT(t)},(p=function(e,t){this.sz=t,this.file=e}).prototype=_(o.prototype),p.prototype.mD=function(e){return this.sz.mD(e)},p.prototype.ns=function(e){return this.sz.ns(e)},p.prototype.dispatch=function(e,t){return this.sz.dispatch(e,t)},p.prototype.bZ=function(){return this.file},p.prototype.wv=function(){var e="",t=this.getFileName();return W.test(t)?(e=t.match(W))[1].toLowerCase():e},p.prototype.getFileName=function(){return this.file.name},p.prototype.getFileSize=function(){return this.file.size},p.prototype.sy=function(e){return this.sz.sy(e)},p.prototype.tn=function(e){this.sz.tn(this.file,e)},(m=function(){}).prototype=_(a.prototype),m.pH="abort",m.rj="error",m.qk="load",m.rc="progress",m.prototype.tc=function(){var e={};return e[m.pH]="onAbort",e[m.rj]="onError",e[m.qk]="onLoad",e[m.rc]="onProgress",e},m.prototype.onAbort=function(e){},m.prototype.onError=function(e,t){},m.prototype.onLoad=function(e){},m.prototype.onProgress=function(e,t,n,i){},(g=function(e){o.call(this),m.call(this),this.application=e,this.tM=[]}).prototype=_(m.prototype),g.prototype=o.mixin(g.prototype),g.prototype.mC=function(){var e=this.tM.concat();this.tM=[],w(e,function(e){e&&e.sY()&&e.lN()})},g.prototype.mU=function(e){this.tM.push(e)},g.prototype.nU=function(e){var t=this.tM.indexOf(e);if(-1===t)throw new Error("Given upload supervisor is not attached.");this.tM.splice(t,1)},g.prototype.tc=function(){var e=m.prototype.tc.call(this);return e[b.pN]="uc",e[v.qM]="tF",e},g.prototype.sj=function(e){var t;for(t=0;t<this.tM.length;t+=1)if(e===this.tM[t].uploadBlob.bZ())return!0;return!1},g.prototype.sB=function(e){return this.tM.indexOf(e)>=0},g.prototype.tF=function(e,t){this.mU(t)},g.prototype.uc=function(e){this.sB(e)&&this.nU(e)},(h=function(e,t,n){var i=this;o.call(i),u.call(i),m.call(i),i.application=e,i.attachedUploadViewsNumber=0,i.wU=[],i.sa=0,i.sO=0,i.tI=0,i.totalFiles=0,i.ty=t,i.ub=n,i.tM=[]}).prototype=_(m.prototype),h.prototype=o.mixin(h.prototype),h.prototype=u.mixin(h.prototype),h.prototype.mU=g.prototype.mU,h.prototype.nU=g.prototype.nU,h.prototype.sB=g.prototype.sB,h.prototype.tC=i.prototype.tC,h.qN="event.file.input.change",h.ue=300,h.prototype.mC=function(){var e,t=this;for(e=0;e<t.tM.length;e+=1)t.tM[e].removeSubscriber(t);t.ty.mC(),t.ub.or(),t.attachedUploadViewsNumber=0,t.tM=[],t.ud(t.application),t.ma(),t.remove()},h.prototype.tc=function(){var e={};return e[v.qM]="tF",e[b.pN]="uc",e[y.EVENT_DOM_ATTACHED]="onUploadViewDomAttached",e[y.EVENT_DOM_REMOVED]="onUploadViewDomRemoved",e[y.pM]="onFolderRefreshRequest",e},h.prototype.onFileInputChange=function(e){var t=e.jN.$,n=t.files;n.length<1||this.dispatch(h.qN,[t,n])},h.prototype.onFolderRefreshRequest=function(e,t){this.wU.push({folder:e,mw:t})},h.prototype.uV=function(e){var t,n=this,i=e.bn().getDocument(),o=i.getById("ckf_addFiles"),a=i.getById("ckf_cancelUpload"),r=i.getById("ckf_fileInput"),l=i.getById("ckf_globalUploads"),s=n.mC.bind(n),d=n.onFileInputChange.bind(n);l=l.getChild([0,0]),n.domElement={addFilesButton:o,cancelButton:a,countSpan:l.getChild(0),fileInput:r,ni:l.getChild([2,0]),np:l.getChild(4),mz:l.getChild(3),totalSizeSpan:l.getChild(1)},t=n.onDomElementAddFilesClickListener.bind(n),o.on("click",t),a.on("click",s),r.on("change",d),n.domElementListeners||(n.domElementListeners=[]),n.domElementListeners.push({evt:"click",fO:t,bi:o},{evt:"click",fO:s,bi:a},{evt:"change",fO:d,bi:r}),n.shouldBeClickedAutomatically&&(n.shouldBeClickedAutomatically=!1,t())},h.prototype.onDomElementAddFilesClickListener=function(e){this.domElement.fileInput.$.click()},h.prototype.onUploadPanelUploadStartClick=function(e,t,n){this.shouldBeClickedAutomatically=!0,n(e)},h.prototype.uH=function(e){this.domElement.cancelButton.getFirst().setHtml(e.lang.UploadBtnCancel)},h.prototype.ud=function(e){var t=this;t.domElement.cancelButton.getFirst().setHtml(e.lang.CloseBtn),t.sa=0,t.sO=0,t.tI=0,t.totalFiles=0},h.prototype.onUploadViewDomAttached=function(e){this.attachedUploadViewsNumber+=1},h.prototype.onUploadViewDomRemoved=function(e){var t=this;t.attachedUploadViewsNumber-=1,t.ub.expectedFiles<1&&t.attachedUploadViewsNumber<1&&(t.attachedUploadViewsNumber=0,t.ub.expectedFiles=0,t.remove())},h.prototype.tF=function(e,t){var n=this,i=t.uploadBlob.bZ(),o=n.tj(),a=new y(e,t,i);t.ns(n),t.ns(a),a.ns(n),a.tw(o),n.mU(t),n.tI+=i.size,n.to(n.tI),n.totalFiles+=1,n.tm(n.totalFiles),1===n.totalFiles&&n.uH(e)},h.prototype.uc=function(e){var t=this,n=t.ub.expectedFiles,i=e.uploadBlob.bZ();t.sB(e)&&t.nU(e),n<1&&t.tM.length<1?(t.ma(),t.ud(t.application)):(t.sa+=i.size,t.sO+=1),t.updateUploadProgress(t.sa,t.tI,t.sO,t.totalFiles,n),t.to(t.tI),t.tm(t.totalFiles)},h.prototype.ma=function(){var e,t,n=this,i=n.application.aV;for(e=0;e<n.wU.length;e+=1)if(n.wU[e].folder===i){t=n.wU[e];break}n.wU=[],t&&n.application.oW("requestShowFolderFiles",t)},h.prototype.remove=function(){this.tj().oW("requestUnloadForm")},h.prototype.setUploadCommand=function(e,t){var n,i,o,a;if(t.pW&&!(t.pW.length<1))for(this.domElementListeners||(this.domElementListeners=[]),o=function(e,n){this.onUploadPanelUploadStartClick(n,t,e)},a=t.pW,i=0;i<a.length;i+=1)a[i].click&&(n=a[i].click,a[i].click=o.bind(this,n))},h.prototype.tD=function(e,t){this.updateLoadedPercentage(e,t)},h.prototype.updateLoadedPercentage=function(e,t,n){var i;(i=t>0?Math.round(e/t*100):0)<0&&(i=0),(i>100||isNaN(i))&&(i=100),this.domElement.ni.setStyle("width",i+"%"),n=n?" - "+n.trim():"",this.updateStatusText(this.application.lang.UploadUploaded.replace("!n",i)+n)},h.prototype.nR=function(e,t){var n;t<1||(n=e/1024/t,this.domElement.np.setText(D.formatSpeed(n,this.application.lang)))},h.prototype.updateStatusText=function(e){this.domElement.mz.setText(e)},h.prototype.to=function(e){this.domElement.totalSizeSpan.setText(this.application.lang.UploadTotalSize+" "+D.formatSize(e/1024,this.application.lang))},h.prototype.tm=function(e){this.domElement.countSpan.setText(this.application.lang.UploadTotalFiles+" "+e+" ")},h.prototype.updateUploadProgress=function(e,t,n,i,o){var a,r=e/t,l=n/(i+o);a=CKFinder.tools.formatSize(e/1024,this.application.lang),this.updateLoadedPercentage(1*r+3*l,4,a)},(v=function(e,t){var n=this;o.call(n),u.call(n),m.call(n),n.application=e,n.lQ=10,n.expectedFiles=0,n.shouldStopProcessing=!1,n.tM=[],n.ty=t}).prototype=_(m.prototype),v.prototype=o.mixin(v.prototype),v.prototype=u.mixin(v.prototype),v.qM="upload.supervisor.ready",v.prototype.or=function(){this.expectedFiles=0,this.shouldStopProcessing=!0,this.tM=[]},v.prototype.nZ=function(){return this.tM.shift()},v.prototype.qg=function(e){this.sj(e.file)||this.tM.push(e)},v.prototype.tc=function(){var e={};return e[b.pU]="tH",e[b.pN]="uc",e},v.prototype.getUploadCommand=function(){if(!this.uploadCommand)throw new Error("Upload command is not set.");return this.uploadCommand},v.prototype.sj=function(e){var t;for(t=0;t<this.tM.length;t+=1)if(e===this.tM[t].uploadBlob.bZ())return!0;return!1},v.prototype.tH=function(){this.tx()},v.prototype.uc=function(){this.lQ+=1,this.tx()},v.prototype.uG=function(t){var n,i,o=this.sX(),a=this,r=this.getUploadCommand();if(!this.application.aV)return!1;if(this.expectedFiles+=t.length,this.shouldStopProcessing=!1,r.bu!==e.aY){if(t.length<1)return!1;try{t[0],this.uI&&this.uI(!1)}catch(e){return!1}finally{r.bu!==e.eV&&(o=!1,r.exec(this.application))}return i=w.bind(null,t,function(e){if(a.shouldStopProcessing)return a.expectedFiles=0,a.shouldStopProcessing=!1,!1;a.expectedFiles-=1,a.tA(new p(e,new d(e)))}),o?(i(),!0):(n=setInterval(function(){a.sX()&&(clearInterval(n),i())},100),!0)}},v.prototype.tA=function(e){var t,n,i=this;e.getFileName().length<1?i.tj().oW("failedUploadFile"):((n=new b(i.application,i.application.aV,e)).ns(i.ty),e.ns(n),t=new XMLHttpRequest,n.nv(t),i.tL(i.application,n))},v.prototype.tL=function(e,t){var n=this;n.dispatch(v.qM,[n.application,t]),t.ns(n),n.lQ<1?n.qg(t):n.tv(e,t)},v.prototype.tx=function(){for(var e=this;e.tM.length>0&&e.lQ>0;)e.tv(e.application,e.nZ())},v.prototype.tJ=function(e){this.lQ=e},v.prototype.setUploadCommand=function(e,t){this.uploadCommand=t},v.prototype.tv=function(e,t){this.lQ-=1,t.mW()},(b=function(e,t,n){var i=this;o.call(i),m.call(i),i.application=e,i.isAborted=!1,i.sa=0,i.oS=0,i.targetFolder=t,i.uploadBlob=n}).prototype=_(m.prototype),b.prototype=o.mixin(b.prototype),b.pU="start",b.pN="stop",b.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0,this.bT.abort()},b.prototype.ns=function(e){if(!(e instanceof m))throw new Error("Invalid argument: expected UploadProgressListener.");o.prototype.ns.call(this,e)},b.prototype.ta=function(e){var t=this.wv(),n=e.aV.getResourceType();return!(t&&!n.isExtensionAllowed(t))||(this.onError(e.lang.UploadExtIncorrect),!1)},b.prototype.wN=function(e){var t,n=this.wv(),i=this.getFileSize(),o=parseInt(e.config.uploadMaxSize,10),a=e.aV.getResourceType();return t=parseInt(a.maxSize,10),0===i?(this.onError(e.lang.Errors[202]),!1):!(o&&i>o||t&&i>t&&(e.config.uploadCheckImages||!I.test(n)))||(this.onError(e.lang.Errors[203]),!1)},b.prototype.tl=function(e){return!!this.ta(e)&&this.wN(e)},b.prototype.nv=function(e){var t,n=this;if(n.sY())throw new Error("Upload is already started.");e.addEventListener(m.pH,n.onAbort.bind(n)),e.addEventListener(m.rj,n.onError.bind(n)),e.addEventListener(m.qk,n.onLoad.bind(n)),(t=e.upload)&&t.addEventListener(m.rc,n.onProgress.bind(n)),n.bT=e,n.isAborted=!1},b.prototype.tK=function(){return this.oS},b.prototype.bZ=function(){return this.uploadBlob.bZ()},b.prototype.wv=function(){return this.uploadBlob.wv()},b.prototype.getFileName=function(){return this.uploadBlob.getFileName()},b.prototype.getFileSize=function(){return this.uploadBlob.getFileSize()},b.prototype.tc=function(){var e=m.prototype.tc.call(this);return e["xhr.header"]="tO",e},b.prototype.sY=function(){return!this.isAborted&&!!this.bT},b.prototype.onAbort=function(e){this.dispatch(m.pH,[this.uploadBlob]),this.onStop()},b.prototype.onError=function(e){e||(e=this.application.lang.UploadUnknError),this.dispatch(m.rj,[this.uploadBlob,e]),this.onStop()},b.prototype.tO=function(e,t){if(!this.bT)throw new Error("Request is not initialized");this.bT.setRequestHeader(e,t)},b.prototype.onLoad=function(e){var t,n,i,o=this;if(200!==o.bT.status)return o.onError();t=(i=e.target.responseText.split(O,2))[0],n=i[1],!t.length&&n?o.dispatch(m.rj,[o.uploadBlob,n]):o.dispatch(m.qk,[o.uploadBlob,t,n]),o.onStop()},b.prototype.onProgress=function(e){var t=this;e.lengthComputable&&(t.sa=e.target.kC=e.loaded,t.dispatch(m.rc,[t,t.uploadBlob,t.sa,t.tK()]))},b.prototype.onStop=function(){var e=this;delete e.bT,e.isAborted=!0,e.oS=0,e.dispatch(b.pN,[e,e.uploadBlob])},b.prototype.mW=function(){var e=this,t=this.bT;if(!this.tl(this.application))return!1;this.uploadBlob.tn(function(n){if(e.dispatch(b.pU,[e.uploadBlob]),t){e.oS=A();try{e.bT.send(n)}catch(t){e.onStop()}}else e.onStop()})},(n=function(e,t,n,i,o){b.call(this,e,t,n),this.isAborted=!1,this.tG=i,this.uz=o}).prototype=_(b.prototype),n.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0,this.uz()},n.prototype.mW=function(){var e=this;if(!e.tl(e.application))return!1;e.isAborted=!1,e.oS=A(),e.dispatch(b.pU,[e.uploadBlob]);try{e.tG()}catch(t){try{e.uz()}catch(e){throw e}finally{e.onStop()}}},(y=function(e,t,n){var i=this;o.call(i),u.call(i),m.call(i),i.application=e,i.file=n,i.isDomAttached=!1,i.isDomRemoved=!1,i.shouldBeRemovedOnStop=!0,i.targetFolder=t.targetFolder,i.ts=t}).prototype=_(m.prototype),y.prototype=o.mixin(y.prototype),y.prototype=u.mixin(y.prototype),y.prototype.tD=h.prototype.updateLoadedPercentage,y.prototype.nR=h.prototype.nR,y.prototype.updateStatusText=h.prototype.updateStatusText,y.EVENT_DOM_ATTACHED="event.dom.attached",y.EVENT_DOM_REMOVED="event.dom.removed",y.pM="event.folder.refresh.request",y.prototype.tc=function(){var e=m.prototype.tc.call(this);return e[b.pN]="onStop",e},y.prototype.onAbort=function(e){var t=this;t.ts&&(t.ts.sY()&&(t.ts.lN(),t.ts.onStop()),t.onStop())},y.prototype.onError=function(e,t){this.tE(t)},y.prototype.uV=function(e){var t=this;if(!t.isDomAttached){var n,i=e.bn(),o=new L("div",i.getDocument());o.setAttribute("class","ckf_upload_info"),o.setHtml($(t.application,e,t.file,'<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>{{file_name}}</span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">{{lang_cancel_button}}</span></a></div>')),i.dB().append(o),t.application.cg.resizeFormPanel(),n=o.getChild([0,0]),t.domElement={button:o.getChild([1,0]),container:o,mI:n.getChild(5),ni:n.getChild([2,0]),mx:n.getChild(1),np:n.getChild(4),mz:n.getChild(3)},t.domElement.button.on("click",t.uk.bind(t,t.ts)),t.isDomAttached=!0,t.dispatch(y.EVENT_DOM_ATTACHED,[t])}},y.prototype.onLoad=function(e,t,n){this.tN(n),this.dispatch(y.pM,[this.targetFolder,t])},y.prototype.onProgress=function(e,t,n,i){this.tD(n,this.file.size),this.nR(n,i)},y.prototype.onStop=function(){this.shouldBeRemovedOnStop&&this.remove()},y.prototype.uk=function(e,t){this.shouldBeRemovedOnStop=!0,e.sY()?e.lN():this.onAbort(e.uploadBlob)},y.prototype.remove=function(){var e=this;e.isDomRemoved||(e.domElement.container.remove(),e.application.cg.resizeFormPanel(),e.isDomRemoved=!0,e.dispatch(y.EVENT_DOM_REMOVED,[e]))},y.prototype.tE=function(e){var t=this.tj();this.tp(e),this.domElement.container.addClass("ckf_FileError"),this.application.cg.resizeFormPanel(),t.oW("failedUploadFile",e)},y.prototype.tp=function(e){var t=this;e&&(t.shouldBeRemovedOnStop=!1),t.domElement.ni.getParent().hide(),t.domElement.mz.hide(),t.domElement.np.hide(),t.domElement.mI.setText(e),t.domElement.button.getFirst().setHtml(t.application.lang.CloseBtn),t.domElement.button.addClass("cke_dialog_ui_button_ok"),t.domElement.button.removeClass("cke_dialog_ui_button_cancel")},y.prototype.tN=function(e){var t=this.tj();e?(this.tp(e),this.application.cg.resizeFormPanel()):this.remove(),t.oW("successUploadFile",e)},k=function(){return!P&&"undefined"!=typeof FormData},C=function(t){var n;return!(!(n=t.env?t:e).env.mac&&n.env.safari)},x=function(e,t,n,i){var o;o=setInterval(function(){t.ld.hasOwnProperty(n)&&(clearInterval(o),i(t,n,t.ld[n]))},10)},E=function(e,t,n,i,o,a,r,l){var s=l.bn();n.sX()||n.mE(t),s.hasAttribute("ondrop")||s.setAttribute("ondrop",R(t,V))},S=function(e,t,n,i,o,a,r,l){var s=R(t,G),d=t.cS("upload");a.setUploadCommand(t,d),r.setUploadCommand(t,d),t.cg.replaceUploadForm(s,function(){N(e,t,n,i,o,a,r,l)},!0,11)},N=function(e,t,n,i,o,a,r,l){n.tw(l),r.tw(l),a.tw(l)},T=function(e,t){return e.replace(U,function(e,n,i){return t[i]})},R=function(e,t){var n={application_name:D.escapeHtml(e.name),input_multiple:C(e)?'multiple="multiple"':"",lang_upload_add_files:e.lang.UploadAddFiles,lang_close_button:e.lang.CloseBtn};return T(t,n)},$=function(e,t,n,i){var o={file_name:D.escapeHtml(n.name),lang_cancel_button:e.lang.UploadBtnCancel};return T(i,o)},function(e){var t;Y.bind?t=Y.bind(this,e):(P=!0,t=Y),e.plugins.add("html5upload",{bM:["uploadform","csrftokenmanager"],bz:t})}(e)}(),function(){function t(e,t,n,i){e.execCommand(i?"moveFilesToFolder":"copyFilesToFolder",{files:n,destination:t,fileCallback:function(e,t){for(var n=D.indexOf(e.basketFiles,t),i=1,o=e.basketFiles.length-1,a=n;a<o;a++)e.basketFiles[a]?e.basketFiles[a]=e.basketFiles[a+i]:i++;e.basketFiles.length=Math.max(o,0)}})}H.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],bz:function(n){var i=window.top[e.nd+"cation"][e.jG+"st"],o=[],a=function(){for(var t=n.basketFiles.length?e.aS:e.aY,i=0,a=o.length;i<a;i++)n.cS(o[i]).bR(t)};n.bD("FolderPasteCopyBasket",{exec:function(e){var n=e.aV;n&&t(e,n,e.basketFiles)}}),n.bD("FolderPasteMoveBasket",{exec:function(n){if(e.bF&&1==e.bs.indexOf(e.bF.substr(1,1))%5&&e.lS(i)!=e.lS(e.ed)||e.bF&&e.bF.substr(3,1)!=e.bs.substr(9*(e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))%(e.bs.length-1),1))n.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license.");else{var o=n.aV;if(!o)return;t(n,o,n.basketFiles,!0),a()}}}),n.eU({folderPasteMoveBasket:{label:n.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:n.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var r=n.basket=new e.aL.BasketFolder(n);n.basketFiles=[],n.on("uiReady",function(t){var i=n.ld["foldertree.foldertree"];i.on("beforeAddFolder",function(e){e.removeListener(),e.data.folders.push(r)}),i.on("beforeDroppable",function(t){if(t.data.target instanceof e.aL.BasketFolder&&(t.data.source instanceof e.aL.File&&(t.data.source=[t.data.source]),D.isArray(t.data.source)&&t.data.source.length&&t.data.source[0]instanceof e.aL.File)){for(var i,o,a=t.data.source,r=0,l=0,s=a.length;l<s;l++){for(i=0,o=n.basketFiles.length;i<o;i++)if(a[l].isSameFile(n.basketFiles[i])){r=1;break}r||n.basketFiles.push(a[l])}t.cancel(1)}}),i.on("beforeContextMenu",function(t){var i;t.data.folder instanceof e.aL.BasketFolder?(delete(i=t.data.bj).renameFolder,delete i.removeFolder,delete i.createSubFolder,i.qT=n.basketFiles.length?e.aS:e.aY):((i=t.data.bj).folderPasteCopyBasket=n.basketFiles.length?e.aS:e.aY,i.folderPasteMoveBasket=n.basketFiles.length?e.aS:e.aY)}),i.on("beforeKeyboardNavigation",function(t){if(t.data.folder instanceof e.aL.BasketFolder){var n=t.data.db();46!=n&&113!=n||t.cancel()}}),n.bD("TruncateBasket",{exec:function(e){e.basketFiles.length&&e.fe("",e.lang.BasketTruncateConfirm,function(){e.basketFiles.length=0,e.oW("requestSelectFolder",{folder:e.basket})})}}),n.bD("RemoveFileFromBasket",{exec:function(e){var t=e.ld["filesview.filesview"].tools.oO();t&&t.length&&e.fe("",1==t.length?e.lang.BasketRemoveConfirm.replace("%1",D.escapeHtml(t[0].name)):e.lang.BasketRemoveConfirmMultiple.replace("%1",t.length),function(){for(var n,i=0,o=t.length;i<o;i++)for(n=0;n<e.basketFiles.length;n++)if(t[i].isSameFile(e.basketFiles[n])){e.basketFiles.splice(n,1);break}e.oW("requestSelectFolder",{folder:e.basket}),a()})}}),n.bD("OpenFileFolder",{exec:function(e){var t=e.ld["filesview.filesview"].data().cG;t&&e.oW("requestSelectFolder",{folder:t.folder})}}),n.eU&&n.gp("truncateBasket",{label:n.lang.BasketClear,command:"TruncateBasket",group:"folder"});var l=[],s=n.ld["filesview.filesview"],d=[];s.on("beforeContextMenu",function(t){if(t.data.folder instanceof e.aL.BasketFolder){var n=t.data.bj;delete n.renameFile,delete n.deleteFile,delete n.deleteFiles,n.mu=e.aS,n.hN=e.aS;for(var i=0;i<d.length;i++)n[d[i]]=e.aS}}),s.on("beforeShowFolderFiles",function(t){if(t.data.folder instanceof e.aL.BasketFolder){t.cancel(1),this.app.oW("requestRenderFiles",{files:n.basketFiles,mj:n.lang.BasketEmpty,eu:1,folder:t.data.folder}),this.app.oW("requestRepaintFolder",t.data),function(e){for(var t in e.plugins)if(e.plugins.hasOwnProperty(t)&&(t=e.plugins[t]).basketToolbar)for(var n=0;n<t.basketToolbar.length;n++){var i=t.basketToolbar[n];if(!e.bY._.items[i[0]]){var a=D.deepCopy(i[1]),r=a.command;if(!a.command){var l=i[1].onClick;r="BasketToolbar_"+i[0],e.bD(r,{exec:function(e){l(e.cg)}}),a.command=r}var s=D.capitalize(t.name);"function"==typeof a.label?a.label=a.label.call(t,e.cg):e.lang[t.name]&&e.lang[t.name][a.label]?a.label=e.lang[t.name][a.label]:e.lang[s]&&e.lang[s][a.label]?a.label=e.lang[s][a.label]:e.lang[a.label]&&(a.label=e.lang[a.label]),a.basketToolbar=1,a.disableEmpty&&o.push(r),e.bY.add(i[0],CKFinder._.UI_BUTTON,a)}}}(this.app),function(e){if(!e.eU)return;for(var t in e.plugins)if(e.plugins.hasOwnProperty(t)&&(t=e.plugins[t]).basketFileContextMenu)for(var n=0;n<t.basketFileContextMenu.length;n++){var i=t.basketFileContextMenu[n];if(!e._.iG[i[0]]){var a=D.deepCopy(i[1]);if(!a.command){var r="BasketContextMenu_"+i[0],l=i[1].onClick;e.bD("BasketContextMenu_"+i[0],{exec:function(e){l(e.cg)}}),a.command=r}var s=D.capitalize(t.name);"function"==typeof a.label?a.label=a.label.call(t,e.cg):e.lang[t.name]&&e.lang[t.name][a.label]?a.label=e.lang[t.name][a.label]:e.lang[s]&&e.lang[s][a.label]?a.label=e.lang[s][a.label]:e.lang[a.label]&&(a.label=e.lang[a.label]),a.disableEmpty&&o.push(r),e.gp(i[0],a),d.push(i[0])}}}(this.app),a();for(var i=this.app.dh.fk,r=0;r<i.length;r++){var s=this.app.document.getById(i[r].id),c=['<span class="cke_toolgroup" id="basket">'];for(var u in this.app.bY._.items)if(this.app.bY._.items.hasOwnProperty(u)){var f=n.bY._.items[u];if(f.mp[0].basketToolbar){var p=(f=n.bY.create(u)).er(n,c),h=i[r].items.push(p)-1;h>0&&(p.previous=i[r].items[h-1],p.previous.next=p),l[r]||(l[r]=[]),l[r].push(h)}}c.push("</span>"),s.appendHtml(c.join(""))}this.on("beforeShowFolderFiles",function(e){this.app.document.getById("basket").remove();for(var t=this.app.dh.fk,n=0;n<t.length;n++)for(var i=0;i<t[n].items.length;i++)l[n][i]&&delete t[n].items[i];e.removeListener()},null,null,1),this.oW("successShowFolderFiles",t.data),this.oW("afterShowFolderFiles",t.data)}}),s.on("beforeKeyboardNavigation",function(t){var i=n.aV;if(i&&i instanceof e.aL.BasketFolder){var o=t.data.db();46==o&&(t.cancel(),n.execCommand("RemoveFileFromBasket")),113==o&&t.cancel()}})},null,null,20)}}),e.aL.BasketFolder=D.createClass({$:function(t){e.aL.Folder.call(this,t,null,t.lang.BasketFolder),this.hasChildren=0,this.acl=new e.aL.Acl("1111111"),this.isBasket=!0},base:e.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(e){e.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(e){},moveFiles:function(e){}}})}(),e.DIALOG_RESIZE_NONE=0,e.DIALOG_RESIZE_WIDTH=1,e.DIALOG_RESIZE_HEIGHT=2,e.DIALOG_RESIZE_BOTH=3,function(){function t(e){return!!this._.tabs[e][0].$.offsetHeight}function n(){for(var e=this,n=e._.gx,i=e._.cU.length,o=D.indexOf(e._.cU,n)+i,a=o-1;a>o-i;a--)if(t.call(e,e._.cU[a%i]))return e._.cU[a%i];return null}function i(){for(var e=this,n=e._.gx,i=e._.cU.length,o=D.indexOf(e._.cU,n),a=o+1;a<o+i;a++)if(t.call(e,e._.cU[a%i]))return e._.cU[a%i];return null}function o(e,t,n){this.element=t,this.cQ=n,this.fM=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.aW=this.cQ,this.element.focus()},t.on("keydown",function(e){e.data.db()in{32:1,13:1}&&this.oW("click")}),t.on("focus",function(){this.oW("mouseover")}),t.on("blur",function(){this.oW("mouseout")})}var a,r,l,s;e.dialog=function(t,o){var a=e.dialog._.ev[o];a=D.extend(a(t),d),a=D.clone(a),a=new m(this,a);e.document;var r=t.theme.pu(t);this._={app:t,element:r.element,name:o,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1},this.bO=r.bO,this.bO.dialog.setStyles({position:f.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),e.event.call(this),this.dg=a=e.oW("dialogDefinition",{name:o,dg:a},t).dg,a.onLoad&&this.on("load",a.onLoad),a.onShow&&this.on("show",a.onShow),a.onHide&&this.on("hide",a.onHide),a.onOk&&this.on("ok",function(e){!1===a.onOk.call(this,e)&&(e.data.hide=!1)}),a.onCancel&&this.on("cancel",function(e){!1===a.onCancel.call(this,e)&&(e.data.hide=!1)});var l,s=this,c=function(e){var t=s._.contents;for(var n in t)for(var i in t[n])if(e.call(this,t[n][i]))return};function u(e){var t=s._.eO,n=e?1:-1;if(!(t.length<1)){for(var i=(s._.aW+n+t.length)%t.length,o=i;!t[o].fM()&&(o=(o+n+t.length)%t.length)!=i;);t[o].focus(),"text"==t[o].type&&t[o].select()}}function h(t){if(s==e.dialog._.dL){var o=t.data.db();if(l=0,9==o||o==e.dy+9){var a=o==e.dy+9;if(s._.eC){var r=a?n.call(s):i.call(s);s.selectPage(r),s._.tabs[r][0].focus()}else u(!a);l=1}else o!=e.eJ+121||s._.eC?37!=o&&39!=o||!s._.eC||(r=37==o?n.call(s):i.call(s),s.selectPage(r),s._.tabs[r][0].focus(),l=1):(s._.eC=!0,s._.tabs[s._.gx][0].focus(),l=1);l&&(t.stop(),t.data.preventDefault())}}function g(e){l&&e.data.preventDefault()}this.on("ok",function(e){c(function(n){if(n.validate){var i=n.validate(this);if("string"==typeof i&&(t.document.getWindow().$.alert(i),i=!1),!1===i)return n.select?n.select():n.focus(),e.data.hide=!1,e.stop(),!0}})},this,null,0),this.on("cancel",function(e){c(function(n){if(n.isChanged())return t.document.getWindow().$.confirm(t.lang.common.confirmCancel)||(e.data.hide=!1),!0})},this,null,0),this.bO.close.on("click",function(e){!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()},this),this.on("show",function(){(e.document.on("keydown",h,this,null,0),(f.opera||f.gecko&&f.mac)&&e.document.on("keypress",g,this),f.ie6Compat)&&v.getChild(0).getFrameDocument().on("keydown",h,this,null,0)}),this.on("hide",function(){e.document.removeListener("keydown",h),(f.opera||f.gecko&&f.mac)&&e.document.removeListener("keypress",g)}),this.on("iframeAdded",function(e){new T(e.data.iframe.$.contentWindow.document).on("keydown",h,this,null,0)}),this.on("show",function(){this._.hasFocus||(this._.aW=-1,u(!0))},this,null,4294967295),f.ie6Compat&&this.on("load",function(e){var t=this.getElement(),n=t.getFirst();n.remove(),n.appendTo(t)},this),function(t){var n=null,i=null,o=(t.getElement().getFirst(),t.eY()),a=o.config.dialog_magnetDistance,r=o.skin.margins||[0,0,0,0];void 0===a&&(a=20);function l(o){var l,s,d=t.hR(),c=e.document.getWindow().eR(),u=o.data.$.screenX,f=o.data.$.screenY,p=u-n.x,h=f-n.y;n={x:u,y:f},i.x+=p,i.y+=h,l=i.x+r[3]<a?-r[3]:i.x-r[1]>c.width-d.width-a?c.width-d.width+r[1]:i.x,s=i.y+r[0]<a?-r[0]:i.y-r[2]>c.height-d.height-a?c.height-d.height+r[2]:i.y,t.move(l,s,1),o.data.preventDefault()}function s(t){if(e.document.removeListener("mousemove",l),e.document.removeListener("mouseup",s),f.ie6Compat){var n=v.getChild(0).getFrameDocument();n.removeListener("mousemove",l),n.removeListener("mouseup",s)}}t.bO.title.on("mousedown",function(o){if(n={x:o.data.$.screenX,y:o.data.$.screenY},e.document.on("mousemove",l),e.document.on("mouseup",s),i=t.gz(),f.ie6Compat){var a=v.getChild(0).getFrameDocument();a.on("mousemove",l),a.on("mouseup",s)}o.data.preventDefault()},t)}(this),function(t){var n=t.dg,i=n.resizable;if(i==e.DIALOG_RESIZE_NONE)return;var o,a,r,l,s,d,c=t.eY();function u(n){s=t.hR(),n=n.data.$;var i=t.bO.contents,c=i.$.getElementsByTagName("iframe").length;if(c&&(d=L.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),i.append(d)),a=s.height-t.bO.contents.hR("height",!(f.gecko||f.opera||p&&f.quirks)),o=s.width-t.bO.contents.hR("width",1),l={x:n.screenX,y:n.screenY},r=e.document.getWindow().eR(),e.document.on("mousemove",h),e.document.on("mouseup",m),f.ie6Compat){var u=v.getChild(0).getFrameDocument();u.on("mousemove",h),u.on("mouseup",m)}n.preventDefault&&n.preventDefault()}function h(d){var u="rtl"==c.lang.dir,f=(d.data.$.screenX-l.x)*(u?-1:1),p=d.data.$.screenY-l.y,h=s.width,m=s.height,g=h+f*(t._.moved?1:2),v=m+p*(t._.moved?1:2),b=t._.element.getFirst(),y=u&&b.getComputedStyle("right"),w=t.gz();y&&(y="auto"==y?r.width-(w.x||0)-b.hR("width"):parseInt(y,10)),w.y+v>r.height&&(v=r.height-w.y),(u?y:w.x)+g>r.width&&(g=r.width-(u?y:w.x)),i!=e.DIALOG_RESIZE_WIDTH&&i!=e.DIALOG_RESIZE_BOTH||u&&f>0&&!w.x||(h=Math.max(n.minWidth||0,g-o)),i!=e.DIALOG_RESIZE_HEIGHT&&i!=e.DIALOG_RESIZE_BOTH||(m=Math.max(n.minHeight||0,v-a)),t.resize(h,m),function(e){if(t._.moved&&"rtl"==c.lang.dir){var n=t._.element.getFirst();n.setStyle("right",e+"px"),n.removeStyle("left")}else t._.moved||t.layout()}(y),d.data.preventDefault()}function m(){if(e.document.removeListener("mouseup",m),e.document.removeListener("mousemove",h),d&&(d.remove(),d=null),f.ie6Compat){var n=v.getChild(0).getFrameDocument();n.removeListener("mouseup",m),n.removeListener("mousemove",h)}if("rtl"==c.lang.dir){var i=t._.element.getFirst(),o=i.getComputedStyle("left");o="auto"==o?r.width-parseInt(i.rd("right"),10)-t.hR().width:parseInt(o,10),i.removeStyle("right"),t._.position.x+=1,t.move(o,t._.position.y)}}t.on("load",function(){var n="";i==e.DIALOG_RESIZE_WIDTH?n=" cke_resizer_horizontal":i==e.DIALOG_RESIZE_HEIGHT&&(n=" cke_resizer_vertical");var o=L.kE('<div class="cke_resizer'+n+'" title="'+D.htmlEncode(c.lang.resize)+'"></div>');o.on("mousedown",u),t.bO.footer.append(o,1)}),c.on("destroy",function(){D.removeFunction(u)})}(this),this.bO.title.setText(a.title);for(var b=0;b<a.contents.length;b++)this.addPage(a.contents[b]);var y=/cke_dialog_tab(\s|$|_)/;this.bO.tabs.on("click",function(e){var t,n=e.data.bK();(y.test(n.$.className)||"a"==n.getName())&&(t=n.$.id.substr(0,n.$.id.lastIndexOf("_")),this.selectPage(t),this._.eC&&(this._.eC=!1,this._.aW=-1,u(!0)),e.data.preventDefault())},this);var w=[],_=e.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:a.buttons},w).getChild();for(this.bO.footer.setHtml(w.join("")),b=0;b<_.length;b++)this._.buttons[_[b].id]=_[b];e.skins.load(t,"dialog")},e.dialog.prototype={resize:function(t,n){this._.hB&&this._.hB.width==t&&this._.hB.height==n||(e.dialog.oW("resize",{dialog:this,skin:this._.app.gd,width:t,height:n},this._.app),this._.hB={width:t,height:n})},hR:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},mn:function(){var e=this.hR();return e.height=e.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0),e},move:function(t,n,i){var o=this._.element.getFirst();if(void 0===r&&(r="fixed"==o.getComputedStyle("position")),!r||!this._.position||this._.position.x!=t||this._.position.y!=n){if(this._.position={x:t,y:n},!r){var a=e.document.getWindow().hV();t+=a.x,n+=a.y}o.setStyles({left:(t>0?t:0)+"px",top:(n>0?n:0)+"px"}),i&&(this._.moved=1)}},gz:function(){return D.extend({},this._.position)},show:function(){var t=this._.app;if("qt"==t.mode&&p){var n=t.getSelection();n&&n.up()}var i=this._.element,o=this.dg;if(!i.getParent()||!i.getParent().equals(e.document.bH())){if(i.appendTo(e.document.bH()),f.gecko&&f.version<10900){var a=this.bO.dialog;a.setStyle("position","absolute"),setTimeout(function(){a.setStyle("position","fixed")},0)}if(this.resize(this._.hB&&this._.hB.width||o.minWidth,this._.hB&&this._.hB.height||o.minHeight),this.selectPage(this.dg.contents[0].id),this.reset(),null===e.dialog._.gw&&(e.dialog._.gw=this._.app.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",e.dialog._.gw+=10),null===e.dialog._.dL){e.dialog._.dL=this,this._.ep=null;try{C(this._.app)}catch(e){v=void 0,C(t),k=!1}i.on("keydown",S),i.on(f.opera?"keypress":"keyup",N);for(var r in{keyup:1,keydown:1,keypress:1})i.on(r,U)}else{this._.ep=e.dialog._.dL,this._.ep.getElement().getFirst().$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2),e.dialog._.dL=this}R(this,this,"",null,function(){var e=this.getButton("cancel");e?e.click():!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()}),this._.hasFocus=!1,D.setTimeout(function(){this.layout(),this.bO.dialog.setStyle("visibility",""),this.cr("load",{}),this.oW("show",{}),this._.app.oW("dialogShow",this),this.gh(function(e){e.jW&&e.jW()})},100,this)}},layout:function(){var t=e.document.getWindow().eR(),n=this.hR();this.move(this._.moved?this._.position.x:(t.width-n.width)/2,this._.moved?this._.position.y:(t.height-n.height)/2)},gh:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e(this._.contents[t][n]);return this},reset:(a=function(e){e.reset&&e.reset()},function(){return this.gh(a),this}),rN:function(){var e=arguments;this.gh(function(t){t.qi&&t.qi.apply(t,e)})},sI:function(){var e=arguments;this.gh(function(t){t.rx&&t.rx.apply(t,e)})},hide:function(){this.oW("hide",{}),this._.app.oW("dialogHide",this);var t=this._.element;if(t.getParent()){if(t.remove(),this.bO.dialog.setStyle("visibility","hidden"),$(this),this._.ep){var n=this._.ep.getElement().getFirst();n.setStyle("z-index",parseInt(n.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}else x();if(e.dialog._.dL=this._.ep,this._.ep)e.dialog._.gw-=10;else{e.dialog._.gw=null,t.removeListener("keydown",S),t.removeListener(f.opera?"keypress":"keyup",N);for(var i in{keyup:1,keydown:1,keypress:1})t.removeListener(i,U);var o=this._.app;if(o.focus(),o._.activeElement=null,o._.oO=[],"qt"==o.mode&&p){var a=o.getSelection();a&&a.sd(!0)}}this.gh(function(e){e.ki&&e.ki()})}},addPage:function(t){var n=this,i=[],o=t.label?' title="'+D.htmlEncode(t.label)+'"':"",a=(t.elements,e.dialog._.gv.vbox.dQ(n,{type:"vbox",className:"cke_dialog_page_contents",children:t.elements,expand:!!t.expand,padding:t.padding,style:t.style||"width: 100%; height: 100%;"},i)),r=L.kE(i.join(""),e.document),l=L.kE(['<a class="cke_dialog_tab"',n._.gV>0?" cke_last":"cke_first",o,t.hidden?' style="display:none"':"",' id="',t.id+"_",D.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',t.label,"</a>"].join(""),e.document);0===n._.gV?n.bO.dialog.addClass("cke_single_page"):n.bO.dialog.removeClass("cke_single_page"),n._.tabs[t.id]=[l,r],n._.cU.push(t.id),n._.gV++,n._.qF=l;for(var s,d=n._.contents[t.id]={},c=a.getChild();s=c.shift();)d[s.id]=s,"function"==typeof s.getChild&&c.push.apply(c,s.getChild());r.setAttribute("name",t.id),r.appendTo(n.bO.contents),l.unselectable(),n.bO.tabs.append(l),t.accessKey&&(R(n,n,"bP+"+t.accessKey,I,W),n._.iX["bP+"+t.accessKey]=t.id)},selectPage:function(e){for(var t in this._.tabs){var n=this._.tabs[t][0],i=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),i.hide())}var o=this._.tabs[e];o[0].addClass("cke_dialog_tab_selected"),o[1].show(),this._.gx=e,this._.nM=D.indexOf(this._.cU,e)},vJ:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];t&&t.hide()},showPage:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];t&&t.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){return this._.contents[e][t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(e,t){if(void 0===t)t=this._.eO.length,this._.eO.push(new o(this,e,t));else{this._.eO.splice(t,0,new o(this,e,t));for(var n=t+1;n<this._.eO.length;n++)this._.eO[n].cQ++}},setTitle:function(e){this.bO.title.setText(e)}},D.extend(e.dialog,{add:function(e,t){this._.ev[e]&&"function"!=typeof t||(this._.ev[e]=t)},exists:function(e){return!!this._.ev[e]},getCurrent:function(){return e.dialog._.dL},okButton:(s=function(e,t){return t=t||{},D.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){var t=e.data.dialog;!1!==t.oW("ok",{hide:!0}).hide&&t.hide()}},t,!0)},s.type="button",s.override=function(e){return D.extend(function(t){return s(t,e)},{type:"button"},!0)},s),cancelButton:(l=function(e,t){return t=t||{},D.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){var t=e.data.dialog;!1!==t.oW("cancel",{hide:!0}).hide&&t.hide()}},t,!0)},l.type="button",l.override=function(e){return D.extend(function(t){return l(t,e)},{type:"button"},!0)},l),addUIElement:function(e,t){this._.gv[e]=t}}),e.dialog._={gv:{},ev:{},dL:null,gw:null},e.event.du(e.dialog),e.event.du(e.dialog.prototype,!0);var d={resizable:e.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[e.dialog.okButton,e.dialog.cancelButton]},c=function(e,t,n){for(var i,o=0;i=e[o];o++){if(i.id==t)return i;if(n&&i[n]){var a=c(i[n],t,n);if(a)return a}}return null},u=function(e,t,n,i,o){if(n){for(var a,r=0;a=e[r];r++){if(a.id==n)return e.splice(r,0,t),t;if(i&&a[i]){var l=u(a[i],t,n,i,!0);if(l)return l}}if(o)return null}return e.push(t),t},h=function(e,t,n){for(var i,o=0;i=e[o];o++){if(i.id==t)return e.splice(o,1);if(n&&i[n]){var a=h(i[n],t,n);if(a)return a}}return null},m=function(e,t){this.dialog=e;for(var n,i=t.contents,o=0;n=i[o];o++)i[o]=new g(e,n);D.extend(this,t)};function g(e,t){this._={dialog:e},D.extend(this,t)}m.prototype={vz:function(e){return c(this.contents,e)},getButton:function(e){return c(this.buttons,e)},uh:function(e,t){return u(this.contents,e,t)},qW:function(e,t){return u(this.buttons,e,t)},uP:function(e){h(this.contents,e)},uO:function(e){h(this.buttons,e)}},g.prototype={eB:function(e){return c(this.elements,e,"children")},add:function(e,t){return u(this.elements,e,t,"children")},remove:function(e){h(this.elements,e,"children")}};var v,b,y,w,_,F,k=!0,C=function(t){var n=e.document.getWindow();if(!k||!v){var i=t.config.dialog_backgroundCoverColor||"white",o=['<div style="position: ',f.ie6Compat?"absolute":"fixed","; z-index: ",t.config.baseFloatZIndex,"; top: 0px; left: 0px; ",f.ie6Compat?"":"background-color: "+i,'" id="cke_dialog_background_cover">'];if(f.ie6Compat){var a=f.isCustomDomain(),r="<html><body style=\\'background-color:"+i+";\\'></body></html>";o.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){document.open();"+(a?"document.domain='"+document.domain+"';":"")+"document.write( '"+r+"' );document.close();})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}o.push("</div>"),v=L.kE(o.join(""),e.document)}var l=v,s=function(){var e=n.eR();l.setStyles({width:e.width+"px",height:e.height+"px"})},d=function(){var t=n.hV(),i=e.dialog._.dL;l.setStyles({left:t.x+"px",top:t.y+"px"});do{var o=i.gz();i.move(o.x,o.y)}while(i=i._.ep)};if(b=s,n.on("resize",s),s(),f.ie6Compat){var c=function(){d(),arguments.callee.lw.apply(this,arguments)};n.$.setTimeout(function(){c.lw=window.onscroll||function(){},window.onscroll=c},0),d()}var u=t.config.dialog_backgroundCoverOpacity;l.setOpacity(void 0!==u?u:.5),l.appendTo(e.document.bH())},x=function(){if(v){var t=e.document.getWindow();v.remove(),t.removeListener("resize",b),f.ie6Compat&&t.$.setTimeout(function(){var e=window.onscroll&&window.onscroll.lw;window.onscroll=e||null},0),b=null}},E={},S=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode),a=E[(t?"bP+":"")+(n?"eJ+":"")+(i?"dy+":"")+o];a&&a.length&&((a=a[a.length-1]).keydown&&a.keydown.call(a.bf,a.dialog,a.iK),e.data.preventDefault())},N=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode),a=E[(t?"bP+":"")+(n?"eJ+":"")+(i?"dy+":"")+o];a&&a.length&&(a=a[a.length-1]).keyup&&(a.keyup.call(a.bf,a.dialog,a.iK),e.data.preventDefault())},R=function(e,t,n,i,o){(E[n]||(E[n]=[])).push({bf:e,dialog:t,iK:n,keyup:o||e.eZ,keydown:i||e.iU})},$=function(e){for(var t in E){for(var n=E[t],i=n.length-1;i>=0;i--)n[i].dialog!=e&&n[i].bf!=e||n.splice(i,1);0===n.length&&delete E[t]}},W=function(e,t){e._.iX[t]&&e.selectPage(e._.iX[t])},I=function(e,t){},O={27:1,13:1},U=function(e){e.data.db()in O&&e.data.stopPropagation()};function A(e,t){var n=function(){o(this),t(this)},i=function(){o(this)},o=function(e){e.removeListener("ok",n),e.removeListener("cancel",i)};e.on("ok",n),e.on("cancel",i)}we.dialog={bf:function(t,n,i,o,a,r,l){if(!(arguments.length<4)){var s,d=(o.call?o(n):o)||"div",c=["<",d," "],u=(a&&a.call?a(n):a)||{},f=(r&&r.call?r(n):r)||{},p=(l&&l.call?l(t,n):l)||"",h=this.oJ=f.id||D.getNextNumber()+"_uiElement";this.id=n.id,f.id=h;var m={};n.type&&(m["cke_dialog_ui_"+n.type]=1),n.className&&(m[n.className]=1);var g=f.class&&f.class.split?f.class.split(" "):[];for(s=0;s<g.length;s++)g[s]&&(m[g[s]]=1);var v=[];for(s in m)v.push(s);f.class=v.join(" "),n.title&&(f.title=n.title);var b=(n.style||"").split(";");for(s in u)b.push(s+":"+u[s]);for(n.hidden&&b.push("display:none"),s=b.length-1;s>=0;s--)""===b[s]&&b.splice(s,1);b.length>0&&(f.style=(f.style?f.style+"; ":"")+b.join("; "));for(s in f)c.push(s+'="'+D.htmlEncode(f[s])+'" ');c.push(">",p,"</",d,">"),i.push(c.join("")),(this._||(this._={})).dialog=t,"boolean"==typeof n.isChanged&&(this.isChanged=function(){return n.isChanged}),"function"==typeof n.isChanged&&(this.isChanged=n.isChanged),e.event.du(this),this.nc(n),this.eZ&&this.iU&&n.accessKey&&R(this,t,"bP+"+n.accessKey);var y=this;t.on("load",function(){y.getInputElement()&&y.getInputElement().on("focus",function(){t._.eC=!1,t._.hasFocus=!0,y.oW("focus")},y)}),this.eA&&(this.cQ=t._.eO.push(this)-1,this.on("focus",function(){t._.aW=y.cQ})),D.extend(this,n)}},hbox:function(e,t,n,i,o){if(!(arguments.length<4)){this._||(this._={}),this._.children=t;var a,r=o&&o.widths||null,l=o&&o.height||null;we.dialog.bf.call(this,e,o||{type:"hbox"},i,"table",{},o&&o.align&&{align:o.align}||null,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(a=0;a<n.length;a++){var t="cke_dialog_ui_hbox_child",i=[];0===a&&(t="cke_dialog_ui_hbox_first"),a==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" '),r?r[a]&&i.push("width:"+D.cssLength(r[a])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+D.cssLength(l)),o&&void 0!=o.padding&&i.push("padding:"+D.cssLength(o.padding)),i.length>0&&e.push('style="'+i.join("; ")+'" '),e.push(">",n[a],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,n,i,o){if(!(arguments.length<3)){this._||(this._={}),this._.children=t;var a=o&&o.width||null,r=o&&o.vY||null;we.dialog.bf.call(this,e,o||{type:"vbox"},i,"div",null,null,function(){var t=['<table cellspacing="0" border="0" '];t.push('style="'),o&&o.expand&&t.push("height:100%;"),t.push("width:"+D.cssLength(a||"100%"),";"),t.push('"'),t.push('align="',D.htmlEncode(o&&o.align||("ltr"==e.eY().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var i=0;i<n.length;i++){var l=[];t.push("<tr><td "),a&&l.push("width:"+D.cssLength(a||"100%")),r?l.push("height:"+D.cssLength(r[i])):o&&o.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),o&&void 0!=o.padding&&l.push("padding:"+D.cssLength(o.padding)),l.length>0&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[i],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}},we.dialog.bf.prototype={getElement:function(){return e.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e){return this.getInputElement().setValue(e),this.oW("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e,t=this.getInputElement();(t=t.getParent())&&-1==t.$.className.search("cke_dialog_page_contents"););return t?(e=t.getAttribute("name"),this._.dialog._.gx!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},nc:function(e){var t,n=/^on([A-Z]\w+)/,i=function(e,t,n,i){t.on("load",function(){e.getInputElement().on(n,i,e)})};for(var o in e)(t=o.match(n))&&(this.dm[o]?this.dm[o].call(this,this._.dialog,e[o]):i(this,this._.dialog,t[1].toLowerCase(),e[o]));return this},dm:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},iU:function(e,t){this.focus()},eZ:function(e,t){},disable:function(){var e=this.getInputElement();e.setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getInputElement();e.removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return!(!this.isEnabled()||!this.isVisible())}},we.dialog.hbox.prototype=D.extend(new we.dialog.bf,{getChild:function(e){return arguments.length<1?this._.children.concat():(e.splice||(e=[e]),e.length<2?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),we.dialog.vbox.prototype=new we.dialog.hbox,y={dQ:function(t,n,i){for(var o,a=n.children,r=[],l=[],s=0;s<a.length&&(o=a[s]);s++){var d=[];r.push(d),l.push(e.dialog._.gv[o.type].dQ(t,o,d))}return new we.dialog[n.type](t,l,r,i,n)}},e.dialog.addUIElement("hbox",y),e.dialog.addUIElement("vbox",y),e.rB=function(e){this.ry=e},e.rB.prototype={exec:function(e){e.openDialog(this.ry)},sG:!1},w=/^([a]|[^a])+$/,_=/^\d*$/,F=/^\d*(?:\.\d+)?$/,e.sg=1,e.jb=2,e.dialog.validate={functions:function(){return function(){var t,n=this&&this.getValue?this.getValue():arguments[0],i=void 0,o=e.jb,a=[];for(t=0;t<arguments.length&&"function"==typeof arguments[t];t++)a.push(arguments[t]);t<arguments.length&&"string"==typeof arguments[t]&&(i=arguments[t],t++),t<arguments.length&&"number"==typeof arguments[t]&&(o=arguments[t]);var r=o==e.jb;for(t=0;t<a.length;t++)r=o==e.jb?r&&a[t](n):r||a[t](n);return!!r||(void 0!==i&&alert(i),this&&(this.select||this.focus)&&(this.select||this.focus()),!1)}},regex:function(e,t){return function(){var n=this&&this.getValue?this.getValue():arguments[0];return!!e.test(n)||(void 0!==t&&alert(t),this&&(this.select||this.focus)&&(this.select?this.select():this.focus()),!1)}},notEmpty:function(e){return this.regex(w,e)},integer:function(e){return this.regex(_,e)},number:function(e){return this.regex(F,e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},D.extend(e.application.prototype,{openDialog:function(t,n,i){var o=e.dialog._.ev[t];if("function"==typeof o){var a=this._.oB||(this._.oB={}),r=a[t]||(a[t]=new e.dialog(this,t));return n&&n.call(r,r),!this._.activeElement&&(this._.activeElement=this.document.$.activeElement),!this._.oO&&(this._.oO=this.ld["filesview.filesview"].tools.oO()),r.show(),r}if("failed"==o)throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+t+'" failed when loading dg.');var l=e.document.bH(),s=l.$.style.cursor,d=this;return l.setStyle("cursor","wait"),e.scriptLoader.load(e.getUrl(o),function(){"function"!=typeof e.dialog._.ev[t]&&(e.dialog._.ev[t]="failed"),d.openDialog(t,n),l.setStyle("cursor",s)},null,null,i),null},hs:function(e,t,n,i){var o=this;setTimeout(function(){o.cg.openDialog("Input",function(a){a.show(),a.setTitle(e||o.lang.common.inputTitle),a.getContentElement("tab1","msg").getElement().setHtml(t),a.getContentElement("tab1","input").setValue(n),A(a,function(e){var t=e.getContentElement("tab1","input").getValue();i(t)})})},0)},msgDialog:function(e,t,n){var i=this;setTimeout(function(){i.cg.openDialog("Msg",function(o){o.show(),o.setTitle(e||i.lang.common.messageTitle),o.getContentElement("tab1","msg").getElement().setHtml(t),n&&A(o,function(e){n()})})},0)},fe:function(e,t,n){var i=this;setTimeout(function(){i.cg.openDialog("Confirm",function(o){o.show(),o.setTitle(e||i.lang.common.confirmationTitle),o.getContentElement("tab1","msg").getElement().setHtml(t),A(o,function(e){n()})})},0)},skippedFilesDialog:function(e,t,n,i){var o=this;setTimeout(function(){o.cg.openDialog("SkippedFiles",function(a){a.show(),a.setTitle(e||o.lang.common.messageTitle),n?(a.getContentElement("tab1","msg").getElement().show(),a.getContentElement("tab1","msg").getElement().setHtml(n)):a.getContentElement("tab1","msg").getElement().hide();var r="",l="cke_files_list",s="",d=t.length;d>3&&(l+=" cke_files_list_many",s=' style="height: '+Math.min(d+.1,20)+'em"');for(var c=0;c<d;c++)r+="<li>"+D.escapeHtml("string"==typeof t[c]?t[c]:t[c].getAttribute("name"))+"</li>";a.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+l+'"'+s+">"+r+"</ul>"),i&&A(a,function(){i()})})},0)}}),H.add("dialog",{bM:["dialogui"],onLoad:function(){e.dialog.add("Confirm",function(e){return{title:e.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),e.dialog.add("Msg",function(e){return{title:e.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}}),e.dialog.add("Input",function(e){return{title:e.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),e.dialog.add("SkippedFiles",function(e){return{title:e.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:"tab1",style:f.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:e.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})}(),H.add("dialogui"),ue=function(e){this._||(this._={}),this._.default=this._.hq=e.default||"";for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),D.extend.apply(D,t),this._},fe={dQ:function(e,t,n){return new we.dialog.ju(e,t,n)}},pe={dQ:function(e,t,n){return new we.dialog[t.type](e,t,n)}},he={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._.default},lu:function(){return this._.hq}},me=D.extend({},we.dialog.bf.prototype.dm,{onChange:function(e,t){this._.pL||(e.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this),this._.pL=!0),this.on("change",t)}},!0),ge=/^on([A-Z]\w+)/,ve=function(e){for(var t in e)(ge.test(t)||"title"==t||"type"==t)&&delete e[t];return e},D.extend(we.dialog,{dD:function(t,n,i,o){if(!(arguments.length<4)){var a=ue.call(this,n);a.hz=D.getNextNumber()+"_label",this._.children=[],we.dialog.bf.call(this,t,n,i,"div",null,null,function(){var i=[];if("horizontal"!=n.uC)i.push('<div class="cke_dialog_ui_labeled_label" id="',a.hz,'" >',n.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',o(t,n),"</div>");else{var r={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+a.hz+'">'+D.htmlEncode(n.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+o(t,n)+"</span>"}]};e.dialog._.gv.hbox.dQ(t,r,i)}return i.join("")})}},ju:function(e,t,n){if(!(arguments.length<3)){ue.call(this,t);var i=this._.le=D.getNextNumber()+"_textInput",o={class:"cke_dialog_ui_input_"+t.type,id:i,type:"text"};t.validate&&(this.validate=t.validate),t.maxLength&&(o.uy=t.maxLength),t.size&&(o.size=t.size);var a=this,r=!1;e.on("load",function(){a.getInputElement().on("keydown",function(e){13==e.data.db()&&(r=!0)}),a.getInputElement().on("keyup",function(t){13==t.data.db()&&r&&(e.getButton("ok")&&setTimeout(function(){e.getButton("ok").click()},0),r=!1)},null,null,1e3)}),we.dialog.dD.call(this,e,t,n,function(){var e=['<div class="cke_dialog_ui_input_',t.type,'"'];t.width&&e.push('style="width:'+t.width+'" '),e.push("><input ");for(var n in o)e.push(n+'="'+o[n]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(e,t,n){if(!(arguments.length<3)){ue.call(this,t);var i=this,o=this._.le=D.getNextNumber()+"_textarea",a={};t.validate&&(this.validate=t.validate),a.rows=t.rows||5,a.cols=t.cols||20,we.dialog.dD.call(this,e,t,n,function(){var e=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',o,'" '];for(var t in a)e.push(t+'="'+D.htmlEncode(a[t])+'" ');return e.push(">",D.htmlEncode(i._.default),"</textarea></div>"),e.join("")})}},checkbox:function(e,t,n){if(!(arguments.length<3)){var i=ue.call(this,t,{default:!!t.default});t.validate&&(this.validate=t.validate),we.dialog.bf.call(this,e,t,n,"span",null,null,function(){var n=D.extend({},t,{id:t.id?t.id+"_checkbox":D.getNextNumber()+"_checkbox"},!0),o=[],a={class:"cke_dialog_ui_checkbox_input",type:"checkbox"};return ve(n),t.default&&(a.checked="checked"),i.checkbox=new we.dialog.bf(e,n,o,"input",null,a),o.push(' <label for="',a.id,'">',D.htmlEncode(t.label),"</label>"),o.join("")})}},radio:function(e,t,n){if(!(arguments.length<3)){ue.call(this,t),this._.default||(this._.default=this._.hq=t.items[0][1]),t.validate&&(this.validate=t.sh);var i=[],o=this;we.dialog.dD.call(this,e,t,n,function(){for(var n=[],a=[],r=t.id?t.id+"_radio":D.getNextNumber()+"_radio",l=0;l<t.items.length;l++){var s=t.items[l],d=void 0!==s[2]?s[2]:s[0],c=void 0!==s[1]?s[1]:s[0],u=D.extend({},t,{id:D.getNextNumber()+"_radio_input",title:null,type:null},!0),f=D.extend({},u,{id:null,title:d},!0),p={type:"radio",class:"cke_dialog_ui_radio_input",name:r,value:c},h=[];o._.default==c&&(p.checked="checked"),ve(u),ve(f),i.push(new we.dialog.bf(e,u,h,"input",null,p)),h.push(" "),new we.dialog.bf(e,f,h,"label",null,{for:p.id},s[0]),n.push(h.join(""))}return new we.dialog.hbox(e,[],n,a),a.join("")}),this._.children=i}},button:function(t,n,i){if(arguments.length){"function"==typeof n&&(n=n(t.eY())),ue.call(this,n,{disabled:n.disabled||!1}),e.event.du(this);var o=this;t.on("load",function(e){var t=this.getElement();t.on("click",function(e){o.oW("click",{dialog:o.getDialog()}),e.data.preventDefault()}),t.unselectable()},this);var a=D.extend({},n);delete a.style,we.dialog.bf.call(this,t,a,i,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hp:"true",class:n.class},'<span class="cke_dialog_ui_button">'+D.htmlEncode(n.label)+"</span>")}},select:function(e,t,n){if(!(arguments.length<3)){var i=ue.call(this,t);t.validate&&(this.validate=t.validate),we.dialog.dD.call(this,e,t,n,function(){var n=D.extend({},t,{id:t.id?t.id+"_select":D.getNextNumber()+"_select"},!0),o=[],a=[],r={class:"cke_dialog_ui_input_select"};void 0!=t.size&&(r.size=t.size),void 0!=t.multiple&&(r.multiple=t.multiple),ve(n);for(var l,s=0;s<t.items.length&&(l=t.items[s]);s++)a.push('<option value="',D.htmlEncode(void 0!==l[1]?l[1]:l[0]),'" /> ',D.htmlEncode(l[0]));return i.select=new we.dialog.bf(e,n,o,"select",null,r,a.join("")),o.join("")})}},file:function(t,n,i){if(!(arguments.length<3)){void 0===n.default&&(n.default="");var o=D.extend(ue.call(this,n),{dg:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",function(){e.document.getById(o.gL).getParent().addClass("cke_dialog_ui_input_file")}),we.dialog.dD.call(this,t,n,i,function(){o.gL=D.getNextNumber()+"_fileInput";var e=f.isCustomDomain(),t=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',o.gL,'" title="',n.label,'" src="javascript:void('];return t.push(e?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),t.push(')"></iframe>'),t.join("")})}},fileButton:function(e,t,n){if(!(arguments.length<3)){ue.call(this,t);var i=this;t.validate&&(this.validate=t.validate);var o=D.extend({},t),a=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(n){var i=t.for;a&&!1===a.call(this,n)||(e.getContentElement(i[0],i[1]).submit(),this.disable())},e.on("load",function(){e.getContentElement(t.for[0],t.for[1])._.buttons.push(i)}),we.dialog.button.call(this,e,o,n)}},html:(se=/^\s*<[\w:]+\s+([^>]*)?>/,de=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,ce=/\/$/,function(e,t,n){if(!(arguments.length<3)){var i,o,a=[],r=t.html;if("<"!=r.charAt(0)&&(r="<span>"+r+"</span>"),t.focus){var l=this.focus;if(this.focus=function(){l.call(this),t.focus.call(this),this.oW("focus")},t.fM){var s=this.fM;this.fM=s}this.eA=!0}we.dialog.bf.call(this,e,t,a,"span",null,null,""),i=a.join("").match(se),o=r.match(de)||["","",""],ce.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]),n.push([o[1]," ",i[1]||"",o[2]].join(""))}})},!0),we.dialog.html.prototype=new we.dialog.bf,we.dialog.dD.prototype=D.extend(new we.dialog.bf,{rW:function(t){var n=e.document.getById(this._.hz);return n.iu()<1?new E.text(t,e.document).appendTo(n):n.getChild(0).$.nodeValue=t,this},vt:function(){var t=e.document.getById(this._.hz);return!t||t.iu()<1?"":t.getChild(0).getText()},dm:me},!0),we.dialog.button.prototype=D.extend(new we.dialog.bf,{click:function(){return this._.disabled?(this.getElement().$.blur(),!1):this.oW("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:D.extend({},we.dialog.bf.prototype.dm,{onClick:function(e,t){this.on("click",t)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0),we.dialog.ju.prototype=D.extend(new we.dialog.dD,{getInputElement:function(){return e.document.getById(this._.le)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},eZ:function(){this.select()},setValue:function(e){return e=null!==e?e:"",we.dialog.bf.prototype.setValue.call(this,e)},eA:!0},he,!0),we.dialog.textarea.prototype=new we.dialog.ju,we.dialog.select.prototype=D.extend(new we.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new L("option",this.getDialog().eY().document),o=this.getInputElement().$;return i.$.text=e,i.$.value=void 0===t||null===t?e:t,void 0===n||null===n?p?o.add(i.$):o.add(i.$,null):o.add(i.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;e.length>0;)e.remove(0);return this},eA:!0},he,!0),we.dialog.checkbox.prototype=D.extend(new we.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e){this.getInputElement().$.checked=e,this.oW("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(e,t){return p?(e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.oW("change",{value:e.$.checked})},this)},this),this.on("change",t),null):me.onChange.apply(this,arguments)}},eA:!0},he,!0),we.dialog.radio.prototype=D.extend(new we.dialog.bf,{setValue:function(e){for(var t,n=this._.children,i=0;i<n.length&&(t=n[i]);i++)t.getElement().$.checked=t.getValue()==e;this.oW("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},eZ:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},dm:{onChange:function(e,t){return p?(e.on("load",function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",function(e){"checked"==(e=e.data.$).propertyName&&this.$.checked&&t.oW("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):me.onChange.apply(this,arguments)}},eA:!0},he,!0),we.dialog.file.prototype=D.extend(new we.dialog.dD,he,{getInputElement:function(){var t=e.document.getById(this._.gL).getFrameDocument();return t.$.forms.length>0?new L(t.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},vy:function(e){return this.getInputElement().getParent().$.action},reset:function(){var t=e.document.getById(this._.gL).getFrameDocument(),n=this._.dg,i=this._.buttons;function o(){t.$.open(),f.isCustomDomain()&&(t.$.domain=document.domain);var e="";n.size&&(e=n.size-(p?7:0)),t.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',D.htmlEncode(n.action),'">','<input type="file" name="',D.htmlEncode(n.id||"cke_upload"),'" size="',D.htmlEncode(e>0?e:""),'" />',"</form>","</body></html>"].join("")),t.$.close();for(var o=0;o<i.length;o++)i[o].enable()}f.gecko?setTimeout(o,500):o()},getValue:function(){return""},dm:me,eA:!0},!0),we.dialog.fileButton.prototype=new we.dialog.button,e.dialog.addUIElement("text",fe),e.dialog.addUIElement("password",fe),e.dialog.addUIElement("textarea",pe),e.dialog.addUIElement("checkbox",pe),e.dialog.addUIElement("radio",pe),e.dialog.addUIElement("button",pe),e.dialog.addUIElement("select",pe),e.dialog.addUIElement("file",pe),e.dialog.addUIElement("fileButton",pe),e.dialog.addUIElement("html",pe),D.extend(CKFinder.dialog,e.dialog),H.add("help",{bM:["toolbar","button"],bz:function(t){t.config.disableHelpButton||(t.bD("help",{exec:function(t){t.ld["filesview.filesview"].bn().focus(),window.open(e.basePath+"help/"+(t.lang.HelpLang||"en")+"/index.html")}}),t.bY.add("Help",e.UI_BUTTON,{label:t.lang.Help,command:"help"}))}}),function(){var t,n,i,o=1,a=2,r=3,l=4,s=5,d=0,c=0,u=[];function h(e,t,o,a,r){for(var l=0,s=0,d=[],c=0;c<e.length;c++)a&&!a(e[c])||(d.push('<a href="',e[c].getUrl(),'" title="',D.escapeHtml(e[c].name),'" rel="',D.escapeHtml(o),'">a</a>'),e[c].isSameFile(t)&&(l=s),s++);return i="ckf_gallery_"+D.getRandomString(20),v(),(n=new L("div",r)).setAttribute("id",i),n.setHtml(d.join("")),n.appendTo(r.bH()),n.hide(),l}function m(t){if(t&&t.inPopup){var n=new T(t.document),i=n.getWindow();if(!p&&!f.opera||i.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==i.$.top.name)return n}return e.oC}function g(e){return function(){e.$.activeElement&&e.$.activeElement.blur(),e.$.activeElement&&e.$.activeElement.blur(),f.gecko||(e.getWindow().focus(),e.bH().focus())}}function v(){n&&n.remove()}function b(e){return function(){v(),e&&e.focus(!0,!0)}}function y(t){if(t.click)t.click();else if(e.document.$.createEvent){var n=e.document.$.createEvent("MouseEvents");n.initEvent("click",!0,!0),t.dispatchEvent(n)}}function w(e,t,n){p&&f.version<9?e.$.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){t.callee.apply(n,t)},0)}:e.on("load",function(){setTimeout(function(){t.callee.apply(n,t)},0)})}function _(e,t){if(!e||!e.inPopup){e&&e.ld["filesview.filesview"].on("afterRenderFiles",v);var n=m(t).getWindow().$;void 0!==n.jQuery&&n.jQuery.fn.colorbox?d=o:void 0!==n.jQuery&&n.jQuery.fn.fancybox?d=a:void 0!==n.jQuery&&n.jQuery.fn.prettyPhoto?d=r:void 0!==n.Shadowbox?d=l:void 0!==n.Prototype&&void 0!==n.Lightbox&&(d=s),d&&(c=1)}}CKFinder.addPlugin("gallery",{bM:["filesview"],appReady:function(){d=0,c=0,u=[],t=null,n=null},galleryCallback:function(e,f,p){c||_(null,e);var F=m(e),k=F.getWindow().$,C=function(e){return e.isImage()};if(!d&&e.config.gallery_autoLoad){if(!C(f))return!1;var x,E=F.getHead(),S=CKFinder.getPluginPath("gallery")+"colorbox/",N=arguments,T=void 0===k.jQuery;if(!T){var R=k.jQuery.fn.jquery.split("."),$=parseInt(R[0],10),W=parseInt(R[1],10),I=parseInt(R[2]||0,10);($<1||1==$&&W<4||1==$&&4==W&&I<3)&&(T=!0)}return T?(k.jQuery&&(u=[k.jQuery,k.$]),(x=new L("script",F)).setAttribute("type","text/javascript"),x.setAttribute("src",S+"jquery.min.js"),w(x,N,k),x.appendTo(E),!0):(F.appendStyleSheet(S+"colorbox.css"),(x=new L("script",F)).setAttribute("type","text/javascript"),x.setAttribute("src",S+"jquery.colorbox-min.js"),w(x,N,k),x.appendTo(E),!0)}if(u.length&&(t=k.jQuery.noConflict(!0),k.jQuery=u[0],k.$=u[1],u=[]),t||(t=k.jQuery),d){var O,U=D.getRandomString(20),A="ckf_gallery_"+U;switch(d){case o:if(!C(f))return!1;O=h(p,f,A,C,F),t("#"+i+" a").colorbox(D.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:e.lang.Gallery.current},e.config.gallery_config,{rel:A,group:A,onClosed:b(f),onOpen:g(F)},!0)).eq(O).click();break;case a:if(!(C=function(e){return e.isImage()||"swf"==e.ext})(f))return!1;O=h(p,f,A,C,F),k.jQuery("#"+i+" a").fancybox(D.extend({},e.config.gallery_config,{onClosed:v,onComplete:g(F),afterClose:b(f),afterShow:g(F)},!0)).eq(O).click();break;case r:if(!(C=function(e){return e.isImage()||"swf"==e.ext||"mov"==e.ext})(f))return!1;O=h(p,f,"prettyPhoto[ckf_gallery_"+U+"]",C,F),k.jQuery("#"+i+" a").prettyPhoto(D.extend({},e.config.gallery_config,{callback:b(f),changepicturecallback:g(F)},!0)).eq(O).click();break;case l:if(!(C=function(e){return e.isImage()||"swf"==e.ext||"mov"==e.ext})(f))return!1;O=h(p,f,A,C,F),k.Shadowbox.qi("#"+i+" a",D.extend({},e.config.gallery_config,{gallery:A,onClose:b(f),onFinish:g(F)},!0)),y(n.eG("a").getItem(O).$);break;case s:if(!C(f))return!1;O=h(p,f,"lightbox[ckf_gallery_"+U+"]",C,F),y(n.eG("a").getItem(O).$);break;default:return!1}return!0}return!1},bz:_})}(),U.gallery_autoLoad=!0,function(){var t="ckCsrfToken";"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){for(var e=this.replace(/^\s+/,""),t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}),e.getCsrfToken=function(){var e,n,i,o=function(e){e=e.toLowerCase();for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("="),o=decodeURIComponent(i[0].trim().toLowerCase()),a=i.length>1?i[1]:"";if(o===e)return decodeURIComponent(a)}return""}(t);return 40!=o.length&&(i=40,o=D.getRandomString(i),e=t,n=o,document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+";path=/"),o},H.add("csrftokenmanager")}(),function(){function t(t){if(!t||t.type!=e.cv||"form"!=t.getName())return[];for(var n=[],i=["style","className"],o=0;o<i.length;o++){var a=i[o],r=t.$.elements.namedItem(a);if(r){var l=new L(r);n.push([l,l.nextSibling]),l.remove()}}return n}function n(t,n){if(t&&t.type==e.cv&&"form"==t.getName()&&n.length>0)for(var i=n.length-1;i>=0;i--){var o=n[i][0],a=n[i][1];a?o.insertBefore(a):o.appendTo(t)}}function i(e,i){var o=t(e),a={},r=e.$;return i||(a.class=r.className||"",r.className=""),a.inline=r.style.cssText||"",i||(r.style.cssText="position: static; overflow: visible"),n(o),a}var o=null,a=null;H.add("maximize",{bz:function(r){var l,s,d,c=r.lang.Maximize,u=e.oC.getWindow(),h=[0,0,0,0],m={};l=e.document.getWindow().$;try{l=l.frameElement}catch(e){l=null}function g(e){var t=u.eR();if(!e&&l&&(e=[l]),e){for(var n=0,i=e.length;n<i;n++)e[n].setStyles({width:t.width+"px",height:t.height+"px"});r.oW("resize")}else r.resize(t.width,t.height)}(l=l&&new L(l))&&!l.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(l=null),r.bD("maximize",{oD:!1,exec:function(){var v,b,y,w,_=r.document.getWindow().$;if(r.cg.inPopup&&(!p&&!f.opera||_.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==_.top.name)){_=r.document.getWindow().$.parent;this.bu==e.aS?(h[2]=_.screenLeft||_.screenX,h[3]=_.screenTop||_.screenY,_.moveTo(0,0),a||(a=[_.screenLeft||_.screenX,_.screenTop||_.screenY]),h[2]-=a[0],h[3]-=a[1],_.outerHeight?(h[0]=_.outerWidth,h[1]=_.outerHeight):(h[0]=_.document.body.scrollWidth,h[1]=_.document.body.scrollHeight,o||(_.resizeTo(_.screen.availWidth,_.screen.availHeight),o=[_.screen.availWidth-_.document.body.scrollWidth,_.screen.availHeight-_.document.body.scrollHeight]),h[0]+=o[0],h[1]+=o[1]),_.resizeTo?_.resizeTo(_.screen.availWidth,_.screen.availHeight):(_.outerHeight=_.screen.availHeight,_.outerWidth=_.screen.availWidth)):(_.resizeTo?_.resizeTo(h[0],h[1]):(_.outerWidth=h[0],_.outerHeight=h[1]),_.moveTo(h[2],h[3]))}else{var F=l||r.container;if(this.bu==e.aS){s=u.hV();for(var k,C=F;C=C.getParent();)k=D.getNextNumber(),m[k]=i(C),C.$.og=k,C.is("html","body")&&C.setStyle("overflow","hidden"),C.setStyle("z-index",r.config.baseFloatZIndex-1);k=D.getNextNumber(),m[k]=i(F,!0),F.$.og=k;var x=[F];for(_=F.getDocument().getWindow().$;_.frameElement;)x.push(L.eB(_.frameElement)),_=_.parent;d=function(){g(x)},u.on("resize",d);var E,S=new T(_.document),N={overflow:f.webkit?"":"hidden",width:0,height:0};S.gT().setStyles(N),!f.gecko&&S.gT().setStyle("position","fixed"),S.bH().setStyles(N),p?setTimeout(function(){u.$.scrollTo(0,0)},0):u.$.scrollTo(0,0);for(var R=0,$=x.length;R<$;R++)(E=x[R]).setStyle("position","absolute"),E.$.offsetLeft,E.setStyles({"z-index":r.config.baseFloatZIndex-1,left:"0px",top:"0px"});x[0].addClass("cke_maximized"),g(x);var W=x[0].ir();x[0].setStyles({left:-1*W.x+"px",top:-1*W.y+"px"})}else{u.removeListener("resize",d);for(C=F;C;)v=C,b=m[C.$.og],void 0,w=void 0,y=t(v),w=v.$,"class"in b&&(w.className=b.class),"inline"in b&&(w.style.cssText=b.inline),n(y),C.$.og=null,C=C.getParent();m={},p?setTimeout(function(){u.$.scrollTo(s.x,s.y)},0):u.$.scrollTo(s.x,s.y),F.removeClass("cke_maximized"),f.webkit&&(F.setStyle("display","inline"),setTimeout(function(){F.setStyle("display","block")},0)),r.oW("resize")}}this.rJ();var I=this.pW[0];if(I){var O=this.bu==e.aS?c.maximize:c.minimize,U=r.document.getById(I._.id);U.getChild(1).setHtml(O),U.setAttribute("title",O),U.setAttribute("href",'javascript:void("'+O+'");')}}}),r.bY.qW("Maximize",{label:c.maximize,command:"maximize"})}})}(),function(){var e={};function t(e,t){for(var n=0,i=t.length;n<i;n++)if(t[n].name&&t[n].name===e)return!0;return!1}CKFinder.addPlugin("zip",{uiReady:function(n){var i=n.lang.Zip;CKFinder.dialog.add("compressToFileName",function(e){var t=e.getSelectedFolder();return{title:e.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:e.lang.FileRename},{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName",default:t.name,validate:function(){if(!this.getValue())return e.openMsgDialog("",e.lang.ErrorMsg.FileEmpty),!1}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipDirExists",function(t){var n=t.getSelectedFolder(),o=[[t.lang.ManuallyRename,"manuallyrename"]];return n.acl.fileDelete&&n.acl.fileRename&&n.acl.folderRename&&n.acl.folderDelete&&o.push([i.removeAndExtract,"overwrite"],[i.extractAndOverwrite,"merge"]),{title:t.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option",default:"manuallyrename",items:o}]}]}],onOk:function(){var n=this.getValueOf("tab1","option");return"manuallyrename"==n&&(n=null),e.extractTo(t.getSelectedFile(),n),!0},onCancel:function(){return e.ma(n),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipFileExists",function(t){var n=t.getSelectedFolder();return{title:t.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:t.lang.common.makeDecision,default:"autorename",items:[[t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"],[t.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:t.lang.common.rememberDecision}]}]}],onCancel:function(){return e.ma(n),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("compressFileExists",function(t){var n=t.getSelectedFolder(),i=[[t.lang.ManuallyRename,"manuallyrename"]];return n.acl.fileDelete&&n.acl.fileRename&&i.push([t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"]),{title:t.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option",default:"manuallyrename",items:i}]}]}],onOk:function(){var n=this.getValueOf("tab1","option");return"manuallyrename"==n&&(n=null),e.nX(t.getSelectedFolder(),e.pp.download,n),!0},onCancel:function(){return e.ma(n),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),n.connector.app.dZ("zip",112),e={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:i.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:i.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:i.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:i.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"}},ma:function(e){e.getChildren(function(t){e.close(),e.showFiles(),e.open()},!0)},oc:function(t){return t&&t.length?!!e.rQ.iz.test(t)&&n.lang.ErrorMsg.FolderInvChar:n.lang.ErrorMsg.FolderEmpty},nI:function(i){if(e.filesList[e.currentItem]){if(e.filesList[e.currentItem].options&&t(e.filesList[e.currentItem].options,[{name:"skip"},{name:"ok"}]))return e.currentItem++,void n.openDialog("unzipFileExists",e.nI);i.show();var o=n.lang.ErrorMsg["Folder"==e.filesList[e.currentItem].type?"FolderExists":"FileExists"];o="<strong>"+o.replace("%s",e.filesList[e.currentItem].name)+"</strong>",i.getContentElement("tab1","msg").getElement().setHtml(o),i.on("ok",function(t){t.removeListener();var o=i.getValueOf("tab1","remember"),a=i.getValueOf("tab1","option");if(!o){for(e.filesList[e.currentItem].options=a,e.currentItem++;e.currentItem<e.filesList.length&&e.filesList[e.currentItem].options&&(!e.filesList[e.currentItem].options||"skip"==e.filesList[e.currentItem].options);)e.currentItem++;return e.currentItem<e.filesList.length?void setTimeout(function(){n.openDialog("unzipFileExists",e.nI)},0):void e.extractHere(n.getSelectedFile(),!0)}for(var r=0,l=e.filesList.length;r<l;r++)e.filesList[r].options||(e.filesList[r].options=a);e.extractHere(n.getSelectedFile(),!0)})}else e.extractHere(n.getSelectedFile(),!0)},extract:function(t){var o={},a=t.file;t.extra&&(o=t.extra),o.fileName=t.file.name,n.connector.sendCommandPost(t.action,null,o,function(t){if(e.filesList=[],303==t.getErrorNumber()){e.currentItem=0;for(var o,a=t.selectNodes("Connector/Errors/Error"),r=t.selectNodes("Connector/UnzippedFiles/File"),l=0,s=0,d=a.length;s<d;s++)o="skip",115==a[s].getAttribute("code")&&(l=1,o=null),e.filesList[s]={name:a[s].getAttribute("name"),options:o,type:a[s].getAttribute("type"),code:a[s].getAttribute("code")};var c=0;for(d=r.length;c<d;c++,s++)e.filesList[s]={name:r[c].getAttribute("name"),options:r[c].getAttribute("action"),type:"File",code:0};if(l)return void n.openDialog("unzipFileExists",e.nI)}else if(t.checkError())return;var u=t.selectNodes("Connector/FolderExists/Folder");if(!u||!u.length){if((r=t.selectNodes("Connector/UnzippedFiles/File"))&&r.length){for(var f=[],p=(s=0,r.length);s<p;s++)"skip"==r[s].getAttribute("action")&&f.push(r[s].getAttribute("name"));if(e.filesList)for(s=0,p=e.filesList.length;s<p;s++)f.push(e.filesList[s].name);if(f.length)return n.openSkippedFilesDialog(null,f,i.extractSuccess),e.ma(n.getSelectedFolder()),!0}return n.openMsgDialog("OK",i.extractSuccess),e.ma(n.getSelectedFolder()),!0}n.openDialog("unzipDirExists",function(e){e.show();var t=n.lang.FolderNameExists;t="<strong>"+t.replace("%s",u[0].getAttribute("name"))+"</strong>",e.getContentElement("tab1","msg").getElement().setHtml(t)})},a.folder.type,a.folder)},extractHere:function(t,o){if(o){for(var a=!1,r=0,l=e.filesList.length;r<l;r++)if(115==e.filesList[r].code&&"skip"!=e.filesList[r].options){a=!0,o={};for(r=0,l=e.filesList.length;r<l;r++)o["files["+r+"][name]"]=e.filesList[r].name,o["files["+r+"][options]"]=e.filesList[r].options;break}if(!a){var s=[];for(r=0,l=e.filesList.length;r<l;r++)s.push(e.filesList[r].name);return void n.openSkippedFilesDialog(null,s,i.extractSuccess,function(){return e.ma(n.getSelectedFolder()),!0})}}o=o||{},e.extract({action:"ExtractHere",file:t,extra:o})},extractTo:function(i,o){o?e.extract({action:"ExtractTo",file:i,extra:{extractDir:e.extractDir||"/",force:o}}):n.openInputDialog(n.lang.DestinationFolder,n.lang.FolderRename,"",function(a){var r=n.getSelectedFolder(),l=(a=CKFinder.tools.trim(a),e.oc(a));if(l)return n.openConfirmDialog("",l,function(t){e.extractTo(i,o)}),!1;e.extractDir=a,r.hasChildren?r.getChildren(function(o){t(a,o)?n.openDialog("unzipDirExists",function(e){e.show();var t=n.lang.ErrorMsg.FolderExists;t="<strong>"+t.replace("%s",a)+"</strong>",e.getContentElement("tab1","msg").getElement().setHtml(t)}):e.extract({action:"ExtractTo",file:i,extra:{extractDir:a}})},!0):(r.createNewFolder(a),e.extract({action:"ExtractTo",file:i,extra:{extractDir:a}}))})},downloadZip:function(e,t,i){var o=n.connector.composeUrl("DownloadZip",{FileName:e,ZipName:t},i.type,i);n.connector.app.ld["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(n.document),o)},oH:function(t,i){n.connector.sendCommandPost("CreateZip",null,i,function(n){if(!n.checkError()){if(i.download)if(o=n.selectSingleNode("Connector/ZipFile")){var o=o.getAttribute("name");return e.downloadZip(o,i.zipName,t)}e.ma(t)}},t.type,t)},nX:function(i,o,a,r){var l={zipName:i.name+".zip",download:o};if(r)for(var s=0,d=r.length;s<d;s++)l["files["+s+"][name]"]=r[s].name,l["files["+s+"][type]"]=r[s].folder.type,l["files["+s+"][folder]"]=r[s].folder.getPath();if(a)return(l=e.pp).fileExistsAction=a,e.oH(i,l);if(i.isBasket||o){if(i.isBasket&&void 0===r){l.zipName="basket.zip";for(s=0,d=n.basketFiles.length;s<d;s++)l["files["+s+"][name]"]=n.basketFiles[s].name,l["files["+s+"][type]"]=n.basketFiles[s].folder.type,l["files["+s+"][folder]"]=n.basketFiles[s].folder.getPath()}return i.isBasket&&(i=n.folders[1],l.basket=!0),e.oH(i,l)}n.openDialog("compressToFileName",function(a){a.show(),a.getContentElement("tab1","fileName").getElement().setValue(i.name),a.on("ok",function(r){r.removeListener();var s=a.getValueOf("tab1","fileName");s=CKFinder.tools.trim(s)+".zip";var d=e.oc(s);if(d)return n.openConfirmDialog("",d,function(t){e.nX(i,o)}),!1;l.zipName=s,i.getFiles(function(o){if(t(s,o))return e.pp=l,n.openDialog("compressFileExists",function(e){e.show();var t=n.lang.ErrorMsg.FileExists;t="<strong>"+t.replace("%s",s)+"</strong>",e.getContentElement("tab1","msg").getElement().setHtml(t)}),!1;e.oH(i,l)},!0)})})}},n.addFileContextMenuOption(e.iG.extractHere,function(t,n){e.extractHere(n)},function(e){if(n.getSelectedFolder().isBasket)return!1;var t=n.getSelectedFiles();return!("zip"!==e.ext.toLowerCase()||n.config.selectMultiple&&t.length>1)&&(!(!e.folder.acl.fileUpload||!e.folder.acl.folderCreate)||-1)}),n.addFileContextMenuOption(e.iG.extractTo,function(t,n){e.extractTo(n)},function(e){if(n.getSelectedFolder().isBasket)return!1;var t=n.getSelectedFiles();return!("zip"!==e.ext.toLowerCase()||n.config.selectMultiple&&t.length>1)&&(!(!e.folder.acl.fileUpload||!e.folder.acl.folderCreate)||-1)}),n.addFileContextMenuOption(e.iG.compressZip,function(t,n){var i=t.getSelectedFiles(),o=t.getSelectedFolder();e.nX(o,!1,!1,i)},function(e){var t=n.getSelectedFolder();if(t.isBasket)return!1;var i=n.getSelectedFiles();return!(!n.config.selectMultiple||i.length<2)&&(!!(e.folder.acl.fileUpload&&e.folder.acl.folderCreate&&t.getResourceType().isExtensionAllowed("zip"))||-1)}),n.addFileContextMenuOption(e.iG.downloadZip,function(t,n){var i=t.getSelectedFiles(),o=t.getSelectedFolder();e.nX(o,!0,!1,i)},function(e){var t=n.getSelectedFiles();return!(!n.config.selectMultiple||t.length<2)&&(!!e.folder.acl.fileUpload||-1)}),n.addFolderContextMenuOption(e.iG.compressZip,function(t,n){e.nX(n,!1)},function(e){return!e.isBasket&&(!(!e.acl.fileUpload||!e.getResourceType().isExtensionAllowed("zip")||!n.files.length&&!e.hasChildren)||-1)}),n.addFolderContextMenuOption(e.iG.downloadZip,function(t,n){e.nX(n,!0)},function(e){return e.isBasket?!!e.app.basketFiles.length||-1:!(!e.acl.fileUpload||!n.files.length&&!e.hasChildren)||-1}),n.connector.app.ld["filesview.filesview"].on("beforeContextMenu",function(e){n.getSelectedFiles().length>1&&delete e.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(t){var n=t.getSelectedFolder();n.app.basketFiles.length&&e.nX(n,!0)},disableEmpty:!0}]]})}(),e.skins.add("kama",(be=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"],p&&f.version<7&&be.push("images/sprites_ie6.png"),{ls:be,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(t){t.config.width&&!isNaN(t.config.width)&&(t.config.width-=12);var n=[],i="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(f.webkit){i=i.split("}").slice(0,-1);for(var o=0;o<i.length;o++)i[o]=i[o].split("{")}function a(e){var t=e.getHead().append("style");return t.setAttribute("id","cke_ui_color"),t.setAttribute("type","text/css"),t}function r(e,t,n){for(var i,o,a,r=0;r<e.length;r++)if(f.webkit){for(o=0;o<e[r].$.sheet.rules.length;o++)e[r].$.sheet.removeRule(o);for(o=0;o<t.length;o++){for(a=t[o][1],i=0;i<n.length;i++)a=a.replace(n[i][0],n[i][1]);e[r].$.sheet.addRule(t[o][0],a)}}else{for(a=t,i=0;i<n.length;i++)a=a.replace(n[i][0],n[i][1]);p?e[r].$.styleSheet.cssText=a:e[r].setHtml(a)}}var l=/\$color/g;D.extend(t,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(o){var s,d,c=a(e.oC),u=a(this.document),p=".cke_"+t.name.replace(".","\\."),h=[p+" .cke_wrapper",p+"_dialog .cke_dialog_contents",p+"_dialog a.cke_dialog_tab",p+"_dialog .cke_dialog_footer"].join(","),m="background-color: $color !important;";return f.webkit?(s=[[h,m]],d=[["body,"+h,m]]):(s=h+"{"+m+"}",d="body,"+h+"{"+m+"}"),(this.setUiColor=function(e){var o=[[l,e]];t.uiColor=e,r([c],s,o),r([u],d,o),r(n,i,o)})(o)}}),t.on("menuShow",function(e){var o=e.data[0].element.eG("iframe").getItem(0).getFrameDocument();if(!o.getById("cke_ui_color")){var s=a(o);n.push(s);var d=t.rk();d&&r([s],i,[[l,d]])}}),t.config.uiColor&&t.on("uiReady",function(){t.setUiColor(t.config.uiColor)})}})),function(){function t(){e.dialog.on("resize",function(e){var t=e.data,n=t.width,i=t.height,o=t.dialog,a=o.bO.contents;"kama"==t.skin&&(a.setStyles({width:n+"px",height:i+"px"}),setTimeout(function(){var e=o.bO.dialog.getChild([0,0,0]),t=e.getChild(0),n=e.getChild(2);n.setStyle("width",t.$.offsetWidth+"px"),(n=e.getChild(7)).setStyle("width",t.$.offsetWidth-28+"px"),(n=e.getChild(4)).setStyle("height",t.$.offsetHeight-31-14+"px"),(n=e.getChild(5)).setStyle("height",t.$.offsetHeight-31-14+"px")},100))})}e.dialog?t():e.on("dialogPluginReady",t)}(),e.skins.add("v1",(ye=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"],p&&f.version<7&&ye.push("images/sprites_ie6.png"),{ls:ye,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}})),function(){function t(){e.dialog.on("resize",function(e){var t=e.data,n=t.width,i=t.height,o=t.dialog,a=o.bO.contents;"v1"==t.skin&&(a.setStyles({width:n+"px",height:i+"px"}),setTimeout(function(){var e=o.bO.dialog.getChild([0,0,0]),t=e.getChild(0),n=e.getChild(2);n.setStyle("width",t.$.offsetWidth+"px"),(n=e.getChild(7)).setStyle("width",t.$.offsetWidth-28+"px"),(n=e.getChild(4)).setStyle("height",t.$.offsetHeight-31-14+"px"),(n=e.getChild(5)).setStyle("height",t.$.offsetHeight-31-14+"px")},100))})}e.dialog?t():e.on("dialogPluginReady",t)}(),function(){function t(e,t,n){var i=e.querySelectorAll(t);if(i)for(var o=0;o<i.length;++o)n.call(i[o])}function n(){e.dialog.on("resize",function(e){var n=e.data,i=n.width,o=n.height,a=n.dialog,r=a.bO.contents;"bootstrap"==n.skin&&(r.setStyles({width:i+"px",height:o+"px"}),setTimeout(function(){var e=a.bO.dialog.getChild([0,0,0]),n=e.getChild(0),i=e.getChild(2);i.setStyle("width",n.$.offsetWidth+"px"),(i=e.getChild(7)).setStyle("width",n.$.offsetWidth-28+"px"),(i=e.getChild(4)).setStyle("height",n.$.offsetHeight-31-14+"px"),(i=e.getChild(5)).setStyle("height",n.$.offsetHeight-31-14+"px");var o=a._.element.$;t(o,'input[type="text"]',function(){this.classList.add("form-control")}),t(o,"a.cke_dialog_ui_button",function(){var e=this.classList;e.add("btn"),e.contains("cke_dialog_ui_button_ok")?e.add("btn-success"):e.contains("cke_dialog_ui_button_cancel")?e.add("btn-danger"):e.add("btn-default")})},100))})}e.skins.add("bootstrap",{application:{css:["app.css"]},host:{qx:1,css:["host.css"]},heightAdjust:50,bz:function(e){e.config.jh="png",e.on("appReady",function(){var t=e.document.$,n="rtl"===t.dir;n||t.querySelector("#toolbar_view .cke_toolbar").classList.add("col-md-10"),t.querySelector(".cke_search_box").classList.add("col-md-2",n?"pull-left":"pull-right");var i=t.querySelector(".cke_search_box input");i.classList.add("form-control"),i.setAttribute("placeholder",e.lang.Search.searchPlaceholder+"...")})}}),e.dialog?n():e.on("dialogPluginReady",n)}(),e.gc.add("default",{dQ:function(t){t.name;var n=t.element,i=t.ff;if(n&&i!=e.kZ){t.layout=new e.application.layout(t);var o=t.oW("themeSpace",{space:"head",html:""}),a=t.oW("themeSpace",{space:"sidebar",html:""}),r=t.oW("themeSpace",{space:"mainTop",html:""}),l=t.oW("themeSpace",{space:"mainMiddle",html:""}),s=t.oW("themeSpace",{space:"mainBottom",html:""}),d=t.config.skin.indexOf(","),c=(-1==d?t.config.skin:t.config.skin.substr(0,d))||"kama",u='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+t.lang.LangCode+'" dir="'+t.lang.dir+'"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+o.html+"</head><body>"+(f.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'\x3c!-- 1. CKE Skin class. --\x3e<div class="fake_wrapper cke_skin_'+c+'">\x3c!-- 2. High contrast class. --\x3e<div class="fake_wrapper">\x3c!-- Applicable: hc cke_hc --\x3e\x3c!-- 3. Browser class. --\x3e<div class="fake_wrapper '+f.cssClass+'">\x3c!-- 4. RTL class. --\x3e<div class="fake_wrapper cke_'+("ltr"==t.lang.dir||p&&f.version<8?"ltr":"rtl")+'">\x3c!-- Applicable: rtl cke_rtl --\x3e\x3c!-- 5. Layout class. --\x3e<div class="fake_wrapper"><div id="ckfinder_view" class="columns_2">\x3c!-- Applicable: columns_1 columns_2 --\x3e<div id="sidebar_container" class="container" role="region"'+(t.config.sidebarWidth?' style="width: '+D.cssLength(t.config.sidebarWidth)+'"':"")+'><div id="sidebar_wrapper" class="wrapper">'+a.html+'</div></div><div id="main_container" class="container" role="region">'+r.html+l.html+s.html+"</div></div></div></div></div></div></div></div></body></html>";e.log("[THEME] DOM flush using document.write"),t.document.$.write(u),t.cr("themeLoaded"),t.cr("uiReady",function(){h(),t.cr("appReady",function(){if(h(),f.ie8){var e,n=t.document.$;if(n.documentMode?e=n.documentMode:(e=5,n.compatMode&&"CSS1Compat"==n.compatMode&&(e=7)),e<8){var i=t.plugins.tools;i.showTool(i.addTool('<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>'))}}var o;f.ie6Compat&&t.document.getWindow().on("resize",h),t.document.getWindow().on("resize",function(){t.layout.ea.call(t.layout)}),function e(){var n=0;if(o=o||t.document.getHead().eG("link").getItem(0))try{o.$.sheet&&o.$.sheet.cssRules.length>0?n=1:o.$.styleSheet&&o.$.styleSheet.cssText.length>0?n=1:o.$.innerHTML&&o.$.innerHTML.length>0&&(n=1)}catch(e){}n?f.ie6Compat?(h(),t.layout.ea(),setTimeout(function(){t.layout.ea()},500)):(t.layout.ea(!0),setTimeout(function(){t.document.getById("ckfinder").removeStyle("visibility")})):window.setTimeout(e,250)}()})})}function h(){f.ie6Compat&&(t.layout.oG=t.document.getWindow().eR())}},pu:function(t){var n=D.getNextNumber(),i=L.kE(['<div class="cke_compatibility cke_'+t.name.replace(".","\\.")+"_dialog cke_skin_",t.gd,'" dir="',t.lang.dir,'" lang="',t.langCode,'"><table class="cke_dialog'," "+f.cssClass.replace(/browser/g,"cke_browser")," cke_",t.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',p?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+n).replace(/%/g,"cke_dialog_"),e.document),o=i.getChild([0,0,0,0,0]),a=o.getChild(0),r=o.getChild(1);return a.unselectable(),r.unselectable(),{element:i,bO:{dialog:i.getChild(0),title:a,close:r,tabs:o.getChild(2),contents:o.getChild([3,0,0,0]),footer:o.getChild(4)}}},destroy:function(t){var n=t.container,i=t.ia;n&&n.remove();for(var o=0;i&&o<i.length;o++)i[o].remove();t.element&&(t.ff==e.fc&&t.element.remove(),delete t.element)}}),e.application.prototype.vU=function(t){var n=""+t;return this._[n]||(this._[n]=e.document.getById(n+"_"+this.name))},e.application.prototype.nJ=function(e){/^\d+$/.test(e)&&(e+="px"),this.layout.dV().setStyle("width",e),this.oW("resize"),this.layout.ea()},e.application.prototype.resize=function(e,t){this.element.getChild(0).setStyle("height",t+"px"),this.element.getChild(0).setStyle("width",e+"px")},function(){var t="<div class='view tool_panel' style='padding:2px;display:block !important;position:static !important;color:black !important;background-color:white !important;'>",n="</div>",i="This is the DEMO version of CKFinder. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.",o="CKFinder Developer License<br/>Licensed to: ",a=t+i+n,r=t+o+n;function l(e,t,n){for(var i=0,o=0,a=0;a<e.$.parentNode.childNodes.length;a++){var r=e.$.parentNode.childNodes[a];if(1==r.nodeType){var l=r==e.$;if(!r.offsetHeight&&!l)continue;o++,l||(i+=r.offsetHeight)}}var s=e.$.offsetHeight-e.$.clientHeight,d=(o-1)*t;!f.ie6Compat||f.ie8||f.ie7Compat||(d+=2*t);var c=(p?e.$.parentNode.parentNode.parentNode.offsetHeight:e.$.parentNode.offsetHeight)-s-i-(d||0);n&&(c+=n);try{e.setStyle("height",c+"px")}catch(e){}}e.application.layout=function(e){this.app=a.length?e:null,this.jB=null},e.application.layout.prototype={ea:function(t){this.jB||(this.jB=D.setTimeout(function(){e.log("[THEME] Repainting layout");var s,d=e.bs.indexOf(e.bF.substr(1,1))%5,c=[e.bF.substr(8,1),e.bF.substr(6,1)],u=e.bF&&e.bF.substr(3,1)!=e.bs.substr(9*(e.bs.indexOf(e.bF.substr(0,1))+e.bs.indexOf(e.bF.substr(2,1)))%(e.bs.length-1),1),h=!!e.ed&&c[1]!=(s=e.ed.length+e.bs.indexOf(c[0]),e.bs.substr(9*s%32,1));if(e.bF&&1==d&&e.lS(window.top[e.nd+"cation"][e.jG+"st"])!=e.lS(e.ed)||4==d||u){for(var m=this.dV().getChild(0).getChildren(),g=0,v=0;v<m.count();v++)"static"==m.getItem(v).rd("position")&&(g=1);if(!g){if("bootstrap"==this.app.gd){var b="<div class='view tool_panel' style='display:block !important;position:static !important;color:#31708f !important;background-color:#d9edf7 !important;font-size: 13px; padding: 5px; margin:5px;border-radius:4px;'>";a=b+i+n,r=b+o+n}this.dV().getChild(0).appendHtml(u||h||4!=d?a:r+"<b>"+D.htmlEncode(e.ed)+"</b></div>")}}var y=this.pn(),w=this.pS(),_=e.skins.loaded[this.app.gd];if(_.ps&&p&&f.ie6Compat&&!f.ie8){var F=this.mB(),k=this.dV(),C=3*_.kN,x=_.rv?_.rv:0,E=this.oG.width-k.$.offsetWidth-C+x;F.setStyle("width",E+"px")}y&&l(y,_.mA,_.heightAdjust),w&&l(w,_.kN),this.jB=null,t=!1,this.app.oW("afterRepaintLayout"),f.ie6Compat&&D.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},!0===t?0:500,this))},dV:function(){return this.kS||(this.kS=this.app.document.getById("sidebar_container")),this.kS},mB:function(){return this.lb||(this.lb=this.app.document.getById("main_container")),this.lb},pS:function(){return void 0===this.kK&&(this.kK=this.app.document.getById("folders_view")),this.kK},pn:function(){return void 0===this.kD&&(this.kD=this.app.document.getById("files_view")),this.kD}}}()}();